/* Melown-js (c) 2011 - 2017 MELOWN TECHNOLOGIES SE */ 
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a._mproj4_=b()}(this,function(){"use strict";function a(a,b){if(a[b])return a[b];for(var c,d,e=Object.keys(a),f=b.toLowerCase().replace(Vb,""),g=-1;++g<e.length;)if(c=e[g],d=c.toLowerCase().replace(Vb,""),d===f)return a[c]}function b(a){if("string"!=typeof a)throw new Error("not a string");this.text=a.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Xb}function c(a){var c=new b(a);return c.output()}function d(a,b,c){Array.isArray(b)&&(c.unshift(b),b=null);var d=b?{}:a,f=c.reduce(function(a,b){return e(b,a),a},d);b&&(a[b]=f)}function e(a,b){if(!Array.isArray(a))return void(b[a]=!0);var c=a.shift();if("PARAMETER"===c&&(c=a.shift()),1===a.length)return Array.isArray(a[0])?(b[c]={},void e(a[0],b[c])):void(b[c]=a[0]);if(!a.length)return void(b[c]=!0);if("TOWGS84"===c)return void(b[c]=a);Array.isArray(c)||(b[c]={});var f;switch(c){case"UNIT":case"PRIMEM":case"VERT_DATUM":return b[c]={name:a[0].toLowerCase(),convert:a[1]},void(3===a.length&&e(a[2],b[c]));case"SPHEROID":case"ELLIPSOID":return b[c]={name:a[0],a:a[1],rf:a[2]},void(4===a.length&&e(a[3],b[c]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return a[0]=["name",a[0]],void d(b,c,a);default:for(f=-1;++f<a.length;)if(!Array.isArray(a[f]))return e(a,b[c]);return d(b,c,a)}}function f(a,b){var c=b[0],d=b[1];!(c in a)&&d in a&&(a[c]=a[d],3===b.length&&(a[c]=b[2](a[c])))}function g(a){return a*gc}function h(a){function b(b){var c=a.to_meter||1;return b*c}"GEOGCS"===a.type?a.projName="longlat":"LOCAL_CS"===a.type?(a.projName="identity",a.local=!0):"object"==typeof a.PROJECTION?a.projName=Object.keys(a.PROJECTION)[0]:a.projName=a.PROJECTION,a.UNIT&&(a.units=a.UNIT.name.toLowerCase(),"metre"===a.units&&(a.units="meter"),a.UNIT.convert&&("GEOGCS"===a.type?a.DATUM&&a.DATUM.SPHEROID&&(a.to_meter=a.UNIT.convert*a.DATUM.SPHEROID.a):(a.to_meter=a.UNIT.convert,10)));var c=a.GEOGCS;"GEOGCS"===a.type&&(c=a),c&&(c.DATUM?a.datumCode=c.DATUM.name.toLowerCase():a.datumCode=c.name.toLowerCase(),"d_"===a.datumCode.slice(0,2)&&(a.datumCode=a.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==a.datumCode&&"new_zealand_1949"!==a.datumCode||(a.datumCode="nzgd49"),"wgs_1984"===a.datumCode&&("Mercator_Auxiliary_Sphere"===a.PROJECTION&&(a.sphere=!0),a.datumCode="wgs84"),"_ferro"===a.datumCode.slice(-6)&&(a.datumCode=a.datumCode.slice(0,-6)),"_jakarta"===a.datumCode.slice(-8)&&(a.datumCode=a.datumCode.slice(0,-8)),~a.datumCode.indexOf("belge")&&(a.datumCode="rnb72"),c.DATUM&&c.DATUM.SPHEROID&&(a.ellps=c.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===a.ellps.toLowerCase().slice(0,13)&&(a.ellps="intl"),a.a=c.DATUM.SPHEROID.a,a.rf=parseFloat(c.DATUM.SPHEROID.rf,10)),~a.datumCode.indexOf("osgb_1936")&&(a.datumCode="osgb36")),a.b&&!isFinite(a.b)&&(a.b=a.a);var d=function(b){return f(a,b)},e=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",g],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",g],["x0","false_easting",b],["y0","false_northing",b],["long0","central_meridian",g],["lat0","latitude_of_origin",g],["lat0","standard_parallel_1",g],["lat1","standard_parallel_1",g],["lat2","standard_parallel_2",g],["alpha","azimuth",g],["srsCode","name"]];e.forEach(d),a.long0||!a.longc||"Albers_Conic_Equal_Area"!==a.projName&&"Lambert_Azimuthal_Equal_Area"!==a.projName||(a.long0=a.longc),a.lat_ts||!a.lat1||"Stereographic_South_Pole"!==a.projName&&"Polar Stereographic (variant B)"!==a.projName||(a.lat0=g(a.lat1>0?90:-90),a.lat_ts=a.lat1)}function i(a){var b=this;if(2===arguments.length){var c=arguments[1];"string"==typeof c?"+"===c.charAt(0)?i[a]=Wb(arguments[1]):i[a]=hc(arguments[1]):i[a]=c}else if(1===arguments.length){if(Array.isArray(a))return a.map(function(a){Array.isArray(a)?i.apply(b,a):i(a)});if("string"==typeof a){if(a in i)return i[a]}else"EPSG"in a?i["EPSG:"+a.EPSG]=a:"ESRI"in a?i["ESRI:"+a.ESRI]=a:"IAU2000"in a?i["IAU2000:"+a.IAU2000]=a:console.log(a);return}}function j(a){return"string"==typeof a}function k(a){return a in i}function l(a){return ic.some(function(b){return a.indexOf(b)>-1})}function m(a){return"+"===a[0]}function n(a){return j(a)?k(a)?i[a]:l(a)?hc(a):m(a)?Wb(a):void 0:a}function o(){var a=this.b/this.a;this.es=1-a*a,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=kc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function p(a){var b=a.x,c=a.y;if(c*Pb>90&&c*Pb<-90&&b*Pb>180&&b*Pb<-180)return null;var d,e;if(Math.abs(Math.abs(c)-Jb)<=Nb)return null;if(this.sphere)d=this.x0+this.a*this.k0*mc(b-this.long0),e=this.y0+this.a*this.k0*Math.log(Math.tan(Qb+.5*c));else{var f=Math.sin(c),g=nc(this.e,c,f);d=this.x0+this.a*this.k0*mc(b-this.long0),e=this.y0-this.a*this.k0*Math.log(g)}return a.x=d,a.y=e,a}function q(a){var b,c,d=a.x-this.x0,e=a.y-this.y0;if(this.sphere)c=Jb-2*Math.atan(Math.exp(-e/(this.a*this.k0)));else{var f=Math.exp(-e/(this.a*this.k0));if(c=oc(this.e,f),c===-9999)return null}return b=mc(this.long0+d/(this.a*this.k0)),a.x=b,a.y=c,a}function r(){}function s(a){return a}function t(a,b){var c=vc.length;return a.names?(vc[c]=a,a.names.forEach(function(a){uc[a.toLowerCase()]=c}),this):(console.log(b),!0)}function u(a){if(!a)return!1;var b=a.toLowerCase();return"undefined"!=typeof uc[b]&&vc[uc[b]]?vc[uc[b]]:void 0}function v(){tc.forEach(t)}function w(a,b,c,d){var e=a*a,f=b*b,g=(e-f)/e,h=0;d?(a*=1-g*(Kb+g*(Lb+g*Mb)),e=a*a,g=0):h=Math.sqrt(g);var i=(e-f)/f;return{es:g,e:h,ep2:i}}function x(b,c,d,e,f){if(!b){var g=a(xc,e);g||(g=yc),b=g.a,c=g.b,d=g.rf}return d&&!c&&(c=(1-1/d)*b),(0===d||Math.abs(b-c)<Nb)&&(f=!0,c=b),{a:b,b:c,rf:d,sphere:f}}function y(a,b,c,d,e,f){var g={};return void 0===a||"none"===a?g.datum_type=Hb:g.datum_type=Gb,b&&(g.datum_params=b.map(parseFloat),0===g.datum_params[0]&&0===g.datum_params[1]&&0===g.datum_params[2]||(g.datum_type=Eb),g.datum_params.length>3&&(0===g.datum_params[3]&&0===g.datum_params[4]&&0===g.datum_params[5]&&0===g.datum_params[6]||(g.datum_type=Fb,g.datum_params[3]*=Ib,g.datum_params[4]*=Ib,g.datum_params[5]*=Ib,g.datum_params[6]=g.datum_params[6]/1e6+1))),g.a=c,g.b=d,g.es=e,g.ep2=f,g}function z(b,c){if(!(this instanceof z))return new z(b);c=c||function(a){if(a)throw a};var d=n(b);if("object"!=typeof d)return void c(b);var e=z.projections.get(d.projName);if(!e)return void c(b);if(d.datumCode&&"none"!==d.datumCode){var f=a(zc,d.datumCode);f&&(d.datum_params=f.towgs84?f.towgs84.split(","):null,d.ellps=f.ellipse,d.datumName=f.datumName?f.datumName:d.datumCode)}d.k0=d.k0||1,d.axis=d.axis||"enu",d.ellps=d.ellps||"wgs84";var g=x(d.a,d.b,d.rf,d.ellps,d.sphere),h=w(g.a,g.b,g.rf,d.R_A),i=d.datum||y(d.datumCode,d.datum_params,g.a,g.b,h.es,h.ep2);jc(this,d),jc(this,e),this.a=g.a,this.b=g.b,this.rf=g.rf,this.sphere=g.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=i,this.init(),c(null,this)}function A(a,b){return a.datum_type===b.datum_type&&(!(a.a!==b.a||Math.abs(a.es-b.es)>5e-11)&&(a.datum_type===Eb?a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]:a.datum_type!==Fb||a.datum_params[0]===b.datum_params[0]&&a.datum_params[1]===b.datum_params[1]&&a.datum_params[2]===b.datum_params[2]&&a.datum_params[3]===b.datum_params[3]&&a.datum_params[4]===b.datum_params[4]&&a.datum_params[5]===b.datum_params[5]&&a.datum_params[6]===b.datum_params[6]))}function B(a,b,c){var d,e,f,g,h=a.x,i=a.y,j=a.z?a.z:0;if(i<-Jb&&i>-1.001*Jb)i=-Jb;else if(i>Jb&&i<1.001*Jb)i=Jb;else if(i<-Jb||i>Jb)return null;return h>Math.PI&&(h-=2*Math.PI),e=Math.sin(i),g=Math.cos(i),f=e*e,d=c/Math.sqrt(1-b*f),{x:(d+j)*g*Math.cos(h),y:(d+j)*g*Math.sin(h),z:(d*(1-b)+j)*e}}function C(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=1e-12,v=u*u,w=30,x=a.x,y=a.y,z=a.z?a.z:0;if(e=Math.sqrt(x*x+y*y),f=Math.sqrt(x*x+y*y+z*z),e/c<u){if(r=0,f/c<u)return s=Jb,t=-d,{x:a.x,y:a.y,z:a.z}}else r=Math.atan2(y,x);g=z/f,h=e/f,i=1/Math.sqrt(1-b*(2-b)*h*h),l=h*(1-b)*i,m=g*i,q=0;do q++,k=c/Math.sqrt(1-b*m*m),t=e*l+z*m-k*(1-b*m*m),j=b*k/(k+t),i=1/Math.sqrt(1-j*(2-j)*h*h),n=h*(1-j)*i,o=g*i,p=o*l-n*m,l=n,m=o;while(p*p>v&&q<w);return s=Math.atan(o/Math.abs(n)),{x:r,y:s,z:t}}function D(a,b,c){if(b===Eb)return{x:a.x+c[0],y:a.y+c[1],z:a.z+c[2]};if(b===Fb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6];return{x:j*(a.x-i*a.y+h*a.z)+d,y:j*(i*a.x+a.y-g*a.z)+e,z:j*(-h*a.x+g*a.y+a.z)+f}}}function E(a,b,c){if(b===Eb)return{x:a.x-c[0],y:a.y-c[1],z:a.z-c[2]};if(b===Fb){var d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],i=c[5],j=c[6],k=(a.x-d)/j,l=(a.y-e)/j,m=(a.z-f)/j;return{x:k+i*l-h*m,y:-i*k+l+g*m,z:h*k-g*l+m}}}function F(a){return a===Eb||a===Fb}function G(a,b){return(a.datum.datum_type===Eb||a.datum.datum_type===Fb)&&"WGS84"!==b.datumCode||(b.datum.datum_type===Eb||b.datum.datum_type===Fb)&&"WGS84"!==a.datumCode}function H(a,b,c){var d;return Array.isArray(c)&&(c=Cc(c)),a.datum&&b.datum&&G(a,b)&&(d=new z("WGS84"),c=H(a,d,c),a=d),"enu"!==a.axis&&(c=Bc(a,!1,c)),"longlat"===a.projName?(c.x*=Ob,c.y*=Ob):a.isGeocent?(a.to_meter&&(c.x*=a.to_meter,c.y*=a.to_meter,c.z*=a.to_meter),c=C(c,b.es,b.a,b.b)):(a.to_meter&&(c.x*=a.to_meter,c.y*=a.to_meter),c=a.inverse(c)),a.from_greenwich&&(c.x+=a.from_greenwich),c=Ac(a.datum,b.datum,c),b.from_greenwich&&(c.x-=b.from_greenwich),"longlat"===b.projName?(c.x*=Pb,c.y*=Pb):b.isGeocent?(c=B(c,b.es,b.a),b.to_meter&&(c.x/=b.to_meter,c.y/=b.to_meter,c.z/=b.to_meter)):(b.forward(c),b.to_meter&&(c.x/=b.to_meter,c.y/=b.to_meter)),"enu"!==b.axis?Bc(b,!0,c):c}function I(a,b,c){var d;return Array.isArray(c)?(d=H(a,b,c),3===c.length?[d.x,d.y,d.z]:[d.x,d.y]):H(a,b,c)}function J(a){return a instanceof z?a:a.oProj?a.oProj:z(a)}function K(a,b,c,d){if(d)return a;a=J(a);var e,f=!1;return"undefined"==typeof b?(b=a,a=Dc,f=!0):("undefined"!=typeof b.x||Array.isArray(b))&&(c=b,b=a,a=Dc,f=!0),b=J(b),c?I(a,b,c):(e={forward:function(c){return I(a,b,c)},inverse:function(c){return I(b,a,c)},info:function(){return{a:b.a,b:b.b,ra:b.R_A,"proj-name":b.projName}}},f&&(e.oProj=b),e)}function L(a,b){return b=b||5,T(Q({lat:a[1],lon:a[0]}),b)}function M(a){var b=R(X(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat,b.lon,b.lat]:[b.left,b.bottom,b.right,b.top]}function N(a){var b=R(X(a.toUpperCase()));return b.lat&&b.lon?[b.lon,b.lat]:[(b.left+b.right)/2,(b.top+b.bottom)/2]}function O(a){return a*(Math.PI/180)}function P(a){return 180*(a/Math.PI)}function Q(a){var b,c,d,e,f,g,h,i,j,k=a.lat,l=a.lon,m=6378137,n=.00669438,o=.9996,p=O(k),q=O(l);j=Math.floor((l+180)/6)+1,180===l&&(j=60),k>=56&&k<64&&l>=3&&l<12&&(j=32),k>=72&&k<84&&(l>=0&&l<9?j=31:l>=9&&l<21?j=33:l>=21&&l<33?j=35:l>=33&&l<42&&(j=37)),b=6*(j-1)-180+3,i=O(b),c=n/(1-n),d=m/Math.sqrt(1-n*Math.sin(p)*Math.sin(p)),e=Math.tan(p)*Math.tan(p),f=c*Math.cos(p)*Math.cos(p),g=Math.cos(p)*(q-i),h=m*((1-n/4-3*n*n/64-5*n*n*n/256)*p-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*p)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*p)-35*n*n*n/3072*Math.sin(6*p));var r=o*d*(g+(1-e+f)*g*g*g/6+(5-18*e+e*e+72*f-58*c)*g*g*g*g*g/120)+5e5,s=o*(h+d*Math.tan(p)*(g*g/2+(5-e+9*f+4*f*f)*g*g*g*g/24+(61-58*e+e*e+600*f-330*c)*g*g*g*g*g*g/720));return k<0&&(s+=1e7),{northing:Math.round(s),easting:Math.round(r),zoneNumber:j,zoneLetter:S(k)}}function R(a){var b=a.northing,c=a.easting,d=a.zoneLetter,e=a.zoneNumber;if(e<0||e>60)return null;var f,g,h,i,j,k,l,m,n,o,p=.9996,q=6378137,r=.00669438,s=(1-Math.sqrt(1-r))/(1+Math.sqrt(1-r)),t=c-5e5,u=b;d<"N"&&(u-=1e7),m=6*(e-1)-180+3,f=r/(1-r),l=u/p,n=l/(q*(1-r/4-3*r*r/64-5*r*r*r/256)),o=n+(3*s/2-27*s*s*s/32)*Math.sin(2*n)+(21*s*s/16-55*s*s*s*s/32)*Math.sin(4*n)+151*s*s*s/96*Math.sin(6*n),g=q/Math.sqrt(1-r*Math.sin(o)*Math.sin(o)),h=Math.tan(o)*Math.tan(o),i=f*Math.cos(o)*Math.cos(o),j=q*(1-r)/Math.pow(1-r*Math.sin(o)*Math.sin(o),1.5),k=t/(g*p);var v=o-g*Math.tan(o)/j*(k*k/2-(5+3*h+10*i-4*i*i-9*f)*k*k*k*k/24+(61+90*h+298*i+45*h*h-252*f-3*i*i)*k*k*k*k*k*k/720);v=P(v);var w=(k-(1+2*h+i)*k*k*k/6+(5-2*i+28*h-3*i*i+8*f+24*h*h)*k*k*k*k*k/120)/Math.cos(o);w=m+P(w);var x;if(a.accuracy){var y=R({northing:a.northing+a.accuracy,easting:a.easting+a.accuracy,zoneLetter:a.zoneLetter,zoneNumber:a.zoneNumber});x={top:y.lat,right:y.lon,bottom:v,left:w}}else x={lat:v,lon:w};return x}function S(a){var b="Z";return 84>=a&&a>=72?b="X":72>a&&a>=64?b="W":64>a&&a>=56?b="V":56>a&&a>=48?b="U":48>a&&a>=40?b="T":40>a&&a>=32?b="S":32>a&&a>=24?b="R":24>a&&a>=16?b="Q":16>a&&a>=8?b="P":8>a&&a>=0?b="N":0>a&&a>=-8?b="M":-8>a&&a>=-16?b="L":-16>a&&a>=-24?b="K":-24>a&&a>=-32?b="J":-32>a&&a>=-40?b="H":-40>a&&a>=-48?b="G":-48>a&&a>=-56?b="F":-56>a&&a>=-64?b="E":-64>a&&a>=-72?b="D":-72>a&&a>=-80&&(b="C"),b}function T(a,b){var c="00000"+a.easting,d="00000"+a.northing;return a.zoneNumber+a.zoneLetter+U(a.easting,a.northing,a.zoneNumber)+c.substr(c.length-5,b)+d.substr(d.length-5,b)}function U(a,b,c){var d=V(c),e=Math.floor(a/1e5),f=Math.floor(b/1e5)%20;return W(e,f,d)}function V(a){var b=a%Ec;return 0===b&&(b=Ec),b}function W(a,b,c){var d=c-1,e=Fc.charCodeAt(d),f=Gc.charCodeAt(d),g=e+a-1,h=f+b,i=!1;g>Lc&&(g=g-Lc+Hc-1,i=!0),(g===Ic||e<Ic&&g>Ic||(g>Ic||e<Ic)&&i)&&g++,(g===Jc||e<Jc&&g>Jc||(g>Jc||e<Jc)&&i)&&(g++,g===Ic&&g++),g>Lc&&(g=g-Lc+Hc-1),h>Kc?(h=h-Kc+Hc-1,i=!0):i=!1,(h===Ic||f<Ic&&h>Ic||(h>Ic||f<Ic)&&i)&&h++,(h===Jc||f<Jc&&h>Jc||(h>Jc||f<Jc)&&i)&&(h++,h===Ic&&h++),h>Kc&&(h=h-Kc+Hc-1);var j=String.fromCharCode(g)+String.fromCharCode(h);return j}function X(a){if(a&&0===a.length)throw"MGRSPoint coverting from nothing";for(var b,c=a.length,d=null,e="",f=0;!/[A-Z]/.test(b=a.charAt(f));){if(f>=2)throw"MGRSPoint bad conversion from: "+a;e+=b,f++}var g=parseInt(e,10);if(0===f||f+3>c)throw"MGRSPoint bad conversion from: "+a;var h=a.charAt(f++);if(h<="A"||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+a;d=a.substring(f,f+=2);for(var i=V(g),j=Y(d.charAt(0),i),k=Z(d.charAt(1),i);k<$(h);)k+=2e6;var l=c-f;if(l%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+a;var m,n,o,p,q,r=l/2,s=0,t=0;return r>0&&(m=1e5/Math.pow(10,r),n=a.substring(f,f+r),s=parseFloat(n)*m,o=a.substring(f+r),t=parseFloat(o)*m),p=s+j,q=t+k,{easting:p,northing:q,zoneLetter:h,zoneNumber:g,accuracy:m}}function Y(a,b){for(var c=Fc.charCodeAt(b-1),d=1e5,e=!1;c!==a.charCodeAt(0);){if(c++,c===Ic&&c++,c===Jc&&c++,c>Lc){if(e)throw"Bad character: "+a;c=Hc,e=!0}d+=1e5}return d}function Z(a,b){if(a>"V")throw"MGRSPoint given invalid Northing "+a;for(var c=Gc.charCodeAt(b-1),d=0,e=!1;c!==a.charCodeAt(0);){if(c++,c===Ic&&c++,c===Jc&&c++,c>Kc){if(e)throw"Bad character: "+a;c=Hc,e=!0}d+=1e5}return d}function $(a){var b;switch(a){case"C":b=11e5;break;case"D":b=2e6;break;case"E":b=28e5;break;case"F":b=37e5;break;case"G":b=46e5;break;case"H":b=55e5;break;case"J":b=64e5;break;case"K":b=73e5;break;case"L":b=82e5;break;case"M":b=91e5;break;case"N":b=0;break;case"P":b=8e5;break;case"Q":b=17e5;break;case"R":b=26e5;break;case"S":b=35e5;break;case"T":b=44e5;break;case"U":b=53e5;break;case"V":b=62e5;break;case"W":b=7e6;break;case"X":b=79e5;break;default:b=-1}if(b>=0)return b;throw"Invalid zone letter: "+a}function Point(a,b,c){if(!(this instanceof Point))return new Point(a,b,c);if(Array.isArray(a))this.x=a[0],this.y=a[1],this.z=a[2]||0;else if("object"==typeof a)this.x=a.x,this.y=a.y,this.z=a.z||0;else if("string"==typeof a&&"undefined"==typeof b){var d=a.split(",");this.x=parseFloat(d[0],10),this.y=parseFloat(d[1],10),this.z=parseFloat(d[2],10)||0}else this.x=a,this.y=b,this.z=c||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function _(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=$c(this.es),this.ml0=_c(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function aa(a){var b,c,d,e=a.x,f=a.y,g=mc(e-this.long0),h=Math.sin(f),i=Math.cos(f);if(this.es){var j=i*g,k=Math.pow(j,2),l=this.ep2*Math.pow(i,2),m=Math.pow(l,2),n=Math.abs(i)>Nb?Math.tan(f):0,o=Math.pow(n,2),p=Math.pow(o,2);b=1-this.es*Math.pow(h,2),j/=Math.sqrt(b);var q=_c(f,h,i,this.en);c=this.a*(this.k0*j*(1+k/6*(1-o+l+k/20*(5-18*o+p+14*l-58*o*l+k/42*(61+179*p-p*o-479*o)))))+this.x0,d=this.a*(this.k0*(q-this.ml0+h*g*j/2*(1+k/12*(5-o+9*l+4*m+k/30*(61+p-58*o+270*l-330*o*l+k/56*(1385+543*p-p*o-3111*o))))))+this.y0}else{var r=i*Math.sin(g);if(Math.abs(Math.abs(r)-1)<Nb)return 93;if(c=.5*this.a*this.k0*Math.log((1+r)/(1-r))+this.x0,d=i*Math.cos(g)/Math.sqrt(1-Math.pow(r,2)),r=Math.abs(d),r>=1){if(r-1>Nb)return 93;d=0}else d=Math.acos(d);f<0&&(d=-d),d=this.a*this.k0*(d-this.lat0)+this.y0}return a.x=c,a.y=d,a}function ba(a){var b,c,d,e,f=(a.x-this.x0)*(1/this.a),g=(a.y-this.y0)*(1/this.a);if(this.es)if(b=this.ml0+g/this.k0,c=bd(b,this.es,this.en),Math.abs(c)<Jb){var h=Math.sin(c),i=Math.cos(c),j=Math.abs(i)>Nb?Math.tan(c):0,k=this.ep2*Math.pow(i,2),l=Math.pow(k,2),m=Math.pow(j,2),n=Math.pow(m,2);b=1-this.es*Math.pow(h,2);var o=f*Math.sqrt(b)/this.k0,p=Math.pow(o,2);b*=j,d=c-b*p/(1-this.es)*.5*(1-p/12*(5+3*m-9*k*m+k-4*l-p/30*(61+90*m-252*k*m+45*n+46*k-p/56*(1385+3633*m+4095*n+1574*n*m)))),e=mc(this.long0+o*(1-p/6*(1+2*m+k-p/20*(5+28*m+24*n+8*k*m+6*k-p/42*(61+662*m+1320*n+720*n*m))))/i)}else d=Jb*lc(g),e=0;else{var q=Math.exp(f/this.k0),r=.5*(q-1/q),s=this.lat0+g/this.k0,t=Math.cos(s);b=Math.sqrt((1-Math.pow(t,2))/(1+Math.pow(r,2))),d=Math.asin(b),g<0&&(d=-d),e=0===r&&0===t?0:mc(Math.atan2(r,t)+this.long0)}return a.x=e,a.y=d,a}function ca(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var a=this.es/(1+Math.sqrt(1-this.es)),b=a/(2-a),c=b;this.cgb[0]=b*(2+b*(-2/3+b*(-2+b*(116/45+b*(26/45+b*(-2854/675)))))),this.cbg[0]=b*(-2+b*(2/3+b*(4/3+b*(-82/45+b*(32/45+b*(4642/4725)))))),c*=b,this.cgb[1]=c*(7/3+b*(-1.6+b*(-227/45+b*(2704/315+b*(2323/945))))),this.cbg[1]=c*(5/3+b*(-16/15+b*(-13/9+b*(904/315+b*(-1522/945))))),c*=b,this.cgb[2]=c*(56/15+b*(-136/35+b*(-1262/105+b*(73814/2835)))),this.cbg[2]=c*(-26/15+b*(34/21+b*(1.6+b*(-12686/2835)))),c*=b,this.cgb[3]=c*(4279/630+b*(-332/35+b*(-399572/14175))),this.cbg[3]=c*(1237/630+b*(-2.4+b*(-24832/14175))),c*=b,this.cgb[4]=c*(4174/315+b*(-144838/6237)),this.cbg[4]=c*(-734/315+b*(109598/31185)),c*=b,this.cgb[5]=c*(601676/22275),this.cbg[5]=c*(444337/155925),c=Math.pow(b,2),this.Qn=this.k0/(1+b)*(1+c*(.25+c*(1/64+c/256))),this.utg[0]=b*(-.5+b*(2/3+b*(-37/96+b*(1/360+b*(81/512+b*(-96199/604800)))))),this.gtu[0]=b*(.5+b*(-2/3+b*(5/16+b*(41/180+b*(-127/288+b*(7891/37800)))))),this.utg[1]=c*(-1/48+b*(-1/15+b*(437/1440+b*(-46/105+b*(1118711/3870720))))),this.gtu[1]=c*(13/48+b*(-.6+b*(557/1440+b*(281/630+b*(-1983433/1935360))))),c*=b,this.utg[2]=c*(-17/480+b*(37/840+b*(209/4480+b*(-5569/90720)))),this.gtu[2]=c*(61/240+b*(-103/140+b*(15061/26880+b*(167603/181440)))),c*=b,this.utg[3]=c*(-4397/161280+b*(11/504+b*(830251/7257600))),this.gtu[3]=c*(49561/161280+b*(-179/168+b*(6601661/7257600))),c*=b,this.utg[4]=c*(-4583/161280+b*(108847/3991680)),this.gtu[4]=c*(34729/80640+b*(-3418889/1995840)),c*=b,this.utg[5]=c*-.03233083094085698,this.gtu[5]=.6650675310896665*c;var d=id(this.cbg,this.lat0);this.Zb=-this.Qn*(d+jd(this.gtu,2*d))}function da(a){var b=mc(a.x-this.long0),c=a.y;c=id(this.cbg,c);var d=Math.sin(c),e=Math.cos(c),f=Math.sin(b),g=Math.cos(b);c=Math.atan2(d,g*e),b=Math.atan2(f*e,fd(d,e*g)),b=hd(Math.tan(b));var h=ld(this.gtu,2*c,2*b);c+=h[0],b+=h[1];var i,j;return Math.abs(b)<=2.623395162778?(i=this.a*(this.Qn*b)+this.x0,j=this.a*(this.Qn*c+this.Zb)+this.y0):(i=1/0,j=1/0),a.x=i,a.y=j,a}function ea(a){var b=(a.x-this.x0)*(1/this.a),c=(a.y-this.y0)*(1/this.a);c=(c-this.Zb)/this.Qn,b/=this.Qn;var d,e;if(Math.abs(b)<=2.623395162778){var f=ld(this.utg,2*c,2*b);c+=f[0],b+=f[1],b=Math.atan(ed(b));var g=Math.sin(c),h=Math.cos(c),i=Math.sin(b),j=Math.cos(b);c=Math.atan2(g*j,fd(i,j*h)),b=Math.atan2(i,j*h),d=mc(b+this.long0),e=id(this.cgb,c)}else d=1/0,e=1/0;return a.x=d,a.y=e,a}function fa(){var a=od(this.zone,this.long0);if(void 0===a)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(a)-183)*Ob,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,nd.init.apply(this),this.forward=nd.forward,this.inverse=nd.inverse}function ga(){var a=Math.sin(this.lat0),b=Math.cos(this.lat0);b*=b,this.rc=Math.sqrt(1-this.es)/(1-this.es*a*a),this.C=Math.sqrt(1+this.es*b*b/(1-this.es)),this.phic0=Math.asin(a/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Qb)/(Math.pow(Math.tan(.5*this.lat0+Qb),this.C)*sd(this.e*a,this.ratexp))}function ha(a){var b=a.x,c=a.y;return a.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*c+Qb),this.C)*sd(this.e*Math.sin(c),this.ratexp))-Jb,a.x=this.C*b,a}function ia(a){for(var b=1e-14,c=a.x/this.C,d=a.y,e=Math.pow(Math.tan(.5*d+Qb)/this.K,1/this.C),f=td;f>0&&(d=2*Math.atan(e*sd(this.e*Math.sin(a.y),-.5*this.e))-Jb,!(Math.abs(d-a.y)<b));--f)a.y=d;return f?(a.x=c,a.y=d,a):null}function ja(){vd.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ka(a){var b,c,d,e;return a.x=mc(a.x-this.long0),vd.forward.apply(this,[a]),b=Math.sin(a.y),c=Math.cos(a.y),d=Math.cos(a.x),e=this.k0*this.R2/(1+this.sinc0*b+this.cosc0*c*d),a.x=e*c*Math.sin(a.x),a.y=e*(this.cosc0*b-this.sinc0*c*d),a.x=this.a*a.x+this.x0,a.y=this.a*a.y+this.y0,a}function la(a){var b,c,d,e,f;if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,f=Math.sqrt(a.x*a.x+a.y*a.y)){var g=2*Math.atan2(f,this.R2);b=Math.sin(g),c=Math.cos(g),e=Math.asin(c*this.sinc0+a.y*b*this.cosc0/f),d=Math.atan2(a.x*b,f*this.cosc0*c-a.y*this.sinc0*b)}else e=this.phic0,d=0;return a.x=d,a.y=e,vd.inverse.apply(this,[a]),a.x=mc(a.x+this.long0),a}function ma(a,b,c){return b*=c,Math.tan(.5*(Jb+a))*Math.pow((1-b)/(1+b),.5*c)}function na(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Nb&&(this.k0=.5*(1+lc(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Nb&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Nb&&(this.k0=.5*this.cons*kc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/nc(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=kc(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Jb,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function oa(a){var b,c,d,e,f,g,h=a.x,i=a.y,j=Math.sin(i),k=Math.cos(i),l=mc(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=Nb&&Math.abs(i+this.lat0)<=Nb?(a.x=NaN,a.y=NaN,a):this.sphere?(b=2*this.k0/(1+this.sinlat0*j+this.coslat0*k*Math.cos(l)),a.x=this.a*b*k*Math.sin(l)+this.x0,a.y=this.a*b*(this.coslat0*j-this.sinlat0*k*Math.cos(l))+this.y0,a):(c=2*Math.atan(this.ssfn_(i,j,this.e))-Jb,e=Math.cos(c),d=Math.sin(c),Math.abs(this.coslat0)<=Nb?(f=nc(this.e,i*this.con,this.con*j),g=2*this.a*this.k0*f/this.cons,a.x=this.x0+g*Math.sin(h-this.long0),a.y=this.y0-this.con*g*Math.cos(h-this.long0),a):(Math.abs(this.sinlat0)<Nb?(b=2*this.a*this.k0/(1+e*Math.cos(l)),a.y=b*d):(b=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*d+this.cosX0*e*Math.cos(l))),a.y=b*(this.cosX0*d-this.sinX0*e*Math.cos(l))+this.y0),a.x=b*e*Math.sin(l)+this.x0,a))}function pa(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g=Math.sqrt(a.x*a.x+a.y*a.y);if(this.sphere){var h=2*Math.atan(g/(.5*this.a*this.k0));return b=this.long0,c=this.lat0,g<=Nb?(a.x=b,a.y=c,a):(c=Math.asin(Math.cos(h)*this.sinlat0+a.y*Math.sin(h)*this.coslat0/g),b=mc(Math.abs(this.coslat0)<Nb?this.lat0>0?this.long0+Math.atan2(a.x,-1*a.y):this.long0+Math.atan2(a.x,a.y):this.long0+Math.atan2(a.x*Math.sin(h),g*this.coslat0*Math.cos(h)-a.y*this.sinlat0*Math.sin(h))),a.x=b,a.y=c,a)}if(Math.abs(this.coslat0)<=Nb){if(g<=Nb)return c=this.lat0,b=this.long0,a.x=b,a.y=c,a;a.x*=this.con,a.y*=this.con,d=g*this.cons/(2*this.a*this.k0),c=this.con*oc(this.e,d),b=this.con*mc(this.con*this.long0+Math.atan2(a.x,-1*a.y))}else e=2*Math.atan(g*this.cosX0/(2*this.a*this.k0*this.ms1)),b=this.long0,g<=Nb?f=this.X0:(f=Math.asin(Math.cos(e)*this.sinX0+a.y*Math.sin(e)*this.cosX0/g),b=mc(this.long0+Math.atan2(a.x*Math.sin(e),g*this.cosX0*Math.cos(e)-a.y*this.sinX0*Math.sin(e)))),c=-1*oc(this.e,Math.tan(.5*(Jb+f)));return a.x=b,a.y=c,a}function qa(){var a=this.lat0;this.lambda0=this.long0;var b=Math.sin(a),c=this.a,d=this.rf,e=1/d,f=2*e-Math.pow(e,2),g=this.e=Math.sqrt(f);this.R=this.k0*c*Math.sqrt(1-f)/(1-f*Math.pow(b,2)),this.alpha=Math.sqrt(1+f/(1-f)*Math.pow(Math.cos(a),4)),this.b0=Math.asin(b/this.alpha);var h=Math.log(Math.tan(Math.PI/4+this.b0/2)),i=Math.log(Math.tan(Math.PI/4+a/2)),j=Math.log((1+g*b)/(1-g*b));this.K=h-this.alpha*i+this.alpha*g/2*j}function ra(a){var b=Math.log(Math.tan(Math.PI/4-a.y/2)),c=this.e/2*Math.log((1+this.e*Math.sin(a.y))/(1-this.e*Math.sin(a.y))),d=-this.alpha*(b+c)+this.K,e=2*(Math.atan(Math.exp(d))-Math.PI/4),f=this.alpha*(a.x-this.lambda0),g=Math.atan(Math.sin(f)/(Math.sin(this.b0)*Math.tan(e)+Math.cos(this.b0)*Math.cos(f))),h=Math.asin(Math.cos(this.b0)*Math.sin(e)-Math.sin(this.b0)*Math.cos(e)*Math.cos(f));return a.y=this.R/2*Math.log((1+Math.sin(h))/(1-Math.sin(h)))+this.y0,a.x=this.R*g+this.x0,a}function sa(a){for(var b=a.x-this.x0,c=a.y-this.y0,d=b/this.R,e=2*(Math.atan(Math.exp(c/this.R))-Math.PI/4),f=Math.asin(Math.cos(this.b0)*Math.sin(e)+Math.sin(this.b0)*Math.cos(e)*Math.cos(d)),g=Math.atan(Math.sin(d)/(Math.cos(this.b0)*Math.cos(d)-Math.sin(this.b0)*Math.tan(e))),h=this.lambda0+g/this.alpha,i=0,j=f,k=-1e3,l=0;Math.abs(j-k)>1e-7;){if(++l>20)return;i=1/this.alpha*(Math.log(Math.tan(Math.PI/4+f/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(j))/2)),k=j,j=2*Math.atan(Math.exp(i))-Math.PI/2}return a.x=h,a.y=j,a}function ta(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var a=Math.sin(this.lat0),b=Math.cos(this.lat0),c=this.e*a;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(b,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-c*c);var d=nc(this.e,this.lat0,a),e=this.bl/b*Math.sqrt((1-this.es)/(1-c*c));e*e<1&&(e=1);var f,g;if(isNaN(this.longc)){var h=nc(this.e,this.lat1,Math.sin(this.lat1)),i=nc(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(e+Math.sqrt(e*e-1))*Math.pow(d,this.bl):this.el=(e-Math.sqrt(e*e-1))*Math.pow(d,this.bl);var j=Math.pow(h,this.bl),k=Math.pow(i,this.bl);f=this.el/j,g=.5*(f-1/f);var l=(this.el*this.el-k*j)/(this.el*this.el+k*j),m=(k-j)/(k+j),n=mc(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(l*Math.tan(.5*this.bl*n)/m)/this.bl,this.long0=mc(this.long0);var o=mc(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*o)/g),this.alpha=Math.asin(e*Math.sin(this.gamma0))}else f=this.lat0>=0?e+Math.sqrt(e*e-1):e-Math.sqrt(e*e-1),this.el=f*Math.pow(d,this.bl),g=.5*(f-1/f),this.gamma0=Math.asin(Math.sin(this.alpha)/e),this.long0=this.longc-Math.asin(g*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(e*e-1),Math.cos(this.alpha))}function ua(a){var b,c,d,e=a.x,f=a.y,g=mc(e-this.long0);if(Math.abs(Math.abs(f)-Jb)<=Nb)d=f>0?-1:1,c=this.al/this.bl*Math.log(Math.tan(Qb+d*this.gamma0*.5)),b=-1*d*Jb*this.al/this.bl;else{var h=nc(this.e,f,Math.sin(f)),i=this.el/Math.pow(h,this.bl),j=.5*(i-1/i),k=.5*(i+1/i),l=Math.sin(this.bl*g),m=(j*Math.sin(this.gamma0)-l*Math.cos(this.gamma0))/k;c=Math.abs(Math.abs(m)-1)<=Nb?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-m)/(1+m))/this.bl,b=Math.abs(Math.cos(this.bl*g))<=Nb?this.al*this.bl*g:this.al*Math.atan2(j*Math.cos(this.gamma0)+l*Math.sin(this.gamma0),Math.cos(this.bl*g))/this.bl}return this.no_rot?(a.x=this.x0+b,a.y=this.y0+c):(b-=this.uc,a.x=this.x0+c*Math.cos(this.alpha)+b*Math.sin(this.alpha),a.y=this.y0+b*Math.cos(this.alpha)-c*Math.sin(this.alpha)),a}function va(a){var b,c;this.no_rot?(c=a.y-this.y0,b=a.x-this.x0):(c=(a.x-this.x0)*Math.cos(this.alpha)-(a.y-this.y0)*Math.sin(this.alpha),b=(a.y-this.y0)*Math.cos(this.alpha)+(a.x-this.x0)*Math.sin(this.alpha),b+=this.uc);var d=Math.exp(-1*this.bl*c/this.al),e=.5*(d-1/d),f=.5*(d+1/d),g=Math.sin(this.bl*b/this.al),h=(g*Math.cos(this.gamma0)+e*Math.sin(this.gamma0))/f,i=Math.pow(this.el/Math.sqrt((1+h)/(1-h)),1/this.bl);return Math.abs(h-1)<Nb?(a.x=this.long0,a.y=Jb):Math.abs(h+1)<Nb?(a.x=this.long0,a.y=-1*Jb):(a.y=oc(this.e,i),a.x=mc(this.long0-Math.atan2(e*Math.cos(this.gamma0)-g*Math.sin(this.gamma0),Math.cos(this.bl*b/this.al))/this.bl)),a}function wa(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Nb)){var a=this.b/this.a;this.e=Math.sqrt(1-a*a);var b=Math.sin(this.lat1),c=Math.cos(this.lat1),d=kc(this.e,b,c),e=nc(this.e,this.lat1,b),f=Math.sin(this.lat2),g=Math.cos(this.lat2),h=kc(this.e,f,g),i=nc(this.e,this.lat2,f),j=nc(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Nb?this.ns=Math.log(d/h)/Math.log(e/i):this.ns=b,isNaN(this.ns)&&(this.ns=b),this.f0=d/(this.ns*Math.pow(e,this.ns)),this.rh=this.a*this.f0*Math.pow(j,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function xa(a){var b=a.x,c=a.y;Math.abs(2*Math.abs(c)-Math.PI)<=Nb&&(c=lc(c)*(Jb-2*Nb));var d,e,f=Math.abs(Math.abs(c)-Jb);if(f>Nb)d=nc(this.e,c,Math.sin(c)),e=this.a*this.f0*Math.pow(d,this.ns);else{if(f=c*this.ns,f<=0)return null;e=0}var g=this.ns*mc(b-this.long0);return a.x=this.k0*(e*Math.sin(g))+this.x0,a.y=this.k0*(this.rh-e*Math.cos(g))+this.y0,a}function ya(a){var b,c,d,e,f,g=(a.x-this.x0)/this.k0,h=this.rh-(a.y-this.y0)/this.k0;this.ns>0?(b=Math.sqrt(g*g+h*h),c=1):(b=-Math.sqrt(g*g+h*h),c=-1);var i=0;if(0!==b&&(i=Math.atan2(c*g,c*h)),0!==b||this.ns>0){if(c=1/this.ns,d=Math.pow(b/(this.a*this.f0),c),e=oc(this.e,d),e===-9999)return null}else e=-Jb;return f=mc(i/this.ns+this.long0),a.x=f,a.y=e,a}function za(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq;
}function Aa(a){var b,c,d,e,f,g,h,i=a.x,j=a.y,k=mc(i-this.long0);return b=Math.pow((1+this.e*Math.sin(j))/(1-this.e*Math.sin(j)),this.alfa*this.e/2),c=2*(Math.atan(this.k*Math.pow(Math.tan(j/2+this.s45),this.alfa)/b)-this.s45),d=-k*this.alfa,e=Math.asin(Math.cos(this.ad)*Math.sin(c)+Math.sin(this.ad)*Math.cos(c)*Math.cos(d)),f=Math.asin(Math.cos(c)*Math.sin(d)/Math.cos(e)),g=this.n*f,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(e/2+this.s45),this.n),a.y=h*Math.cos(g)/1,a.x=h*Math.sin(g)/1,this.czech||(a.y*=-1,a.x*=-1),a}function Ba(a){var b,c,d,e,f,g,h,i,j=a.x;a.x=a.y,a.y=j,this.czech||(a.y*=-1,a.x*=-1),g=Math.sqrt(a.x*a.x+a.y*a.y),f=Math.atan2(a.y,a.x),e=f/Math.sin(this.s0),d=2*(Math.atan(Math.pow(this.ro0/g,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),b=Math.asin(Math.cos(this.ad)*Math.sin(d)-Math.sin(this.ad)*Math.cos(d)*Math.cos(e)),c=Math.asin(Math.cos(d)*Math.sin(e)/Math.cos(b)),a.x=this.long0-c/this.alfa,h=b,i=0;var k=0;do a.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(b/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.e/2))-this.s45),Math.abs(h-a.y)<1e-10&&(i=1),h=a.y,k+=1;while(0===i&&k<15);return k>=15?null:a}function Ca(){this.sphere||(this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.ml0=this.a*Id(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Da(a){var b,c,d=a.x,e=a.y;if(d=mc(d-this.long0),this.sphere)b=this.a*Math.asin(Math.cos(e)*Math.sin(d)),c=this.a*(Math.atan2(Math.tan(e),Math.cos(d))-this.lat0);else{var f=Math.sin(e),g=Math.cos(e),h=Nd(this.a,this.e,f),i=Math.tan(e)*Math.tan(e),j=d*Math.cos(e),k=j*j,l=this.es*g*g/(1-this.es),m=this.a*Id(this.e0,this.e1,this.e2,this.e3,e);b=h*j*(1-k*i*(1/6-(8-i+8*l)*k/120)),c=m-this.ml0+h*f/g*k*(.5+(5-i+6*l)*k/24)}return a.x=b+this.x0,a.y=c+this.y0,a}function Ea(a){a.x-=this.x0,a.y-=this.y0;var b,c,d=a.x/this.a,e=a.y/this.a;if(this.sphere){var f=e+this.lat0;b=Math.asin(Math.sin(f)*Math.cos(d)),c=Math.atan2(Math.tan(d),Math.cos(f))}else{var g=this.ml0/this.a+e,h=Pd(g,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(h)-Jb)<=Nb)return a.x=this.long0,a.y=Jb,e<0&&(a.y*=-1),a;var i=Nd(this.a,this.e,Math.sin(h)),j=i*i*i/this.a/this.a*(1-this.es),k=Math.pow(Math.tan(h),2),l=d*this.a/i,m=l*l;b=h-i*Math.tan(h)/j*l*l*(.5-(1+3*k)*l*l/24),c=l*(1-m*(k/3+(1+3*k)*k*m/15))/Math.cos(h)}return a.x=mc(c+this.long0),a.y=Od(b),a}function Fa(){var a=Math.abs(this.lat0);if(Math.abs(a-Jb)<Nb?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<Nb?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var b;switch(this.qp=Sd(this.e,1),this.mmf=.5/(1-this.es),this.apa=Ia(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),b=Math.sin(this.lat0),this.sinb1=Sd(this.e,b)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*b*b)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ga(a){var b,c,d,e,f,g,h,i,j,k,l=a.x,m=a.y;if(l=mc(l-this.long0),this.sphere){if(f=Math.sin(m),k=Math.cos(m),d=Math.cos(l),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c=this.mode===this.EQUIT?1+k*d:1+this.sinph0*f+this.cosph0*k*d,c<=Nb)return null;c=Math.sqrt(2/c),b=c*k*Math.sin(l),c*=this.mode===this.EQUIT?f:this.cosph0*f-this.sinph0*k*d}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(d=-d),Math.abs(m+this.phi0)<Nb)return null;c=Qb-.5*m,c=2*(this.mode===this.S_POLE?Math.cos(c):Math.sin(c)),b=c*Math.sin(l),c*=d}}else{switch(h=0,i=0,j=0,d=Math.cos(l),e=Math.sin(l),f=Math.sin(m),g=Sd(this.e,f),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=g/this.qp,i=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:j=1+this.sinb1*h+this.cosb1*i*d;break;case this.EQUIT:j=1+i*d;break;case this.N_POLE:j=Jb+m,g=this.qp-g;break;case this.S_POLE:j=m-Jb,g=this.qp+g}if(Math.abs(j)<Nb)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:j=Math.sqrt(2/j),c=this.mode===this.OBLIQ?this.ymf*j*(this.cosb1*h-this.sinb1*i*d):(j=Math.sqrt(2/(1+i*d)))*h*this.ymf,b=this.xmf*j*i*e;break;case this.N_POLE:case this.S_POLE:g>=0?(b=(j=Math.sqrt(g))*e,c=d*(this.mode===this.S_POLE?j:-j)):b=c=0}}return a.x=this.a*b+this.x0,a.y=this.a*c+this.y0,a}function Ha(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i=a.x/this.a,j=a.y/this.a;if(this.sphere){var k,l=0,m=0;if(k=Math.sqrt(i*i+j*j),c=.5*k,c>1)return null;switch(c=2*Math.asin(c),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(m=Math.sin(c),l=Math.cos(c)),this.mode){case this.EQUIT:c=Math.abs(k)<=Nb?0:Math.asin(j*m/k),i*=m,j=l*k;break;case this.OBLIQ:c=Math.abs(k)<=Nb?this.phi0:Math.asin(l*this.sinph0+j*m*this.cosph0/k),i*=m*this.cosph0,j=(l-Math.sin(c)*this.sinph0)*k;break;case this.N_POLE:j=-j,c=Jb-c;break;case this.S_POLE:c-=Jb}b=0!==j||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(i,j):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i/=this.dd,j*=this.dd,g=Math.sqrt(i*i+j*j),g<Nb)return a.x=0,a.y=this.phi0,a;e=2*Math.asin(.5*g/this.rq),d=Math.cos(e),i*=e=Math.sin(e),this.mode===this.OBLIQ?(h=d*this.sinb1+j*e*this.cosb1/g,f=this.qp*h,j=g*this.cosb1*d-j*this.sinb1*e):(h=j*e/g,f=this.qp*h,j=g*d)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(j=-j),f=i*i+j*j,!f)return a.x=0,a.y=this.phi0,a;h=1-f/this.qp,this.mode===this.S_POLE&&(h=-h)}b=Math.atan2(i,j),c=Ja(Math.asin(h),this.apa)}return a.x=mc(this.long0+b),a.y=c,a}function Ia(a){var b,c=[];return c[0]=a*Xd,b=a*a,c[0]+=b*Yd,c[1]=b*$d,b*=a,c[0]+=b*Zd,c[1]+=b*_d,c[2]=b*ae,c}function Ja(a,b){var c=a+a;return a+b[0]*Math.sin(c)+b[1]*Math.sin(c+c)+b[2]*Math.sin(c+c+c)}function Ka(){Math.abs(this.lat1+this.lat2)<Nb||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=kc(this.e3,this.sin_po,this.cos_po),this.qs1=Sd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=kc(this.e3,this.sin_po,this.cos_po),this.qs2=Sd(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Sd(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Nb?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function La(a){var b=a.x,c=a.y;this.sin_phi=Math.sin(c),this.cos_phi=Math.cos(c);var d=Sd(this.e3,this.sin_phi,this.cos_phi),e=this.a*Math.sqrt(this.c-this.ns0*d)/this.ns0,f=this.ns0*mc(b-this.long0),g=e*Math.sin(f)+this.x0,h=this.rh-e*Math.cos(f)+this.y0;return a.x=g,a.y=h,a}function Ma(a){var b,c,d,e,f,g;return a.x-=this.x0,a.y=this.rh-a.y+this.y0,this.ns0>=0?(b=Math.sqrt(a.x*a.x+a.y*a.y),d=1):(b=-Math.sqrt(a.x*a.x+a.y*a.y),d=-1),e=0,0!==b&&(e=Math.atan2(d*a.x,d*a.y)),d=b*this.ns0/this.a,this.sphere?g=Math.asin((this.c-d*d)/(2*this.ns0)):(c=(this.c-d*d)/this.ns0,g=this.phi1z(this.e3,c)),f=mc(e/this.ns0+this.long0),a.x=f,a.y=g,a}function Na(a,b){var c,d,e,f,g,h=de(.5*b);if(a<Nb)return h;for(var i=a*a,j=1;j<=25;j++)if(c=Math.sin(h),d=Math.cos(h),e=a*c,f=1-e*e,g=.5*f*f/d*(b/(1-i)-c/f+.5/a*Math.log((1-e)/(1+e))),h+=g,Math.abs(g)<=1e-7)return h;return null}function Oa(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Pa(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=mc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,g>0||Math.abs(g)<=Nb?(h=this.x0+this.a*f*c*Math.sin(d)/g,i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)/g):(h=this.x0+this.infinity_dist*c*Math.sin(d),i=this.y0+this.infinity_dist*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function Qa(a){var b,c,d,e,f,g;return a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,a.x/=this.k0,a.y/=this.k0,(b=Math.sqrt(a.x*a.x+a.y*a.y))?(e=Math.atan2(b,this.rc),c=Math.sin(e),d=Math.cos(e),g=de(d*this.sin_p14+a.y*c*this.cos_p14/b),f=Math.atan2(a.x*c,b*this.cos_p14*d-a.y*this.sin_p14*c),f=mc(this.long0+f)):(g=this.phic0,f=0),a.x=f,a.y=g,a}function Ra(){this.sphere||(this.k0=kc(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Sa(a){var b,c,d=a.x,e=a.y,f=mc(d-this.long0);if(this.sphere)b=this.x0+this.a*f*Math.cos(this.lat_ts),c=this.y0+this.a*Math.sin(e)/Math.cos(this.lat_ts);else{var g=Sd(this.e,Math.sin(e));b=this.x0+this.a*this.k0*f,c=this.y0+this.a*g*.5/this.k0}return a.x=b,a.y=c,a}function Ta(a){a.x-=this.x0,a.y-=this.y0;var b,c;return this.sphere?(b=mc(this.long0+a.x/this.a/Math.cos(this.lat_ts)),c=Math.asin(a.y/this.a*Math.cos(this.lat_ts))):(c=ie(this.e,2*a.y*this.k0/this.a),b=mc(this.long0+a.x/(this.a*this.k0))),a.x=b,a.y=c,a}function Ua(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Va(a){var b=a.x,c=a.y,d=mc(b-this.long0),e=Od(c-this.lat0);return a.x=this.x0+this.a*d*this.rc,a.y=this.y0+this.a*e,a}function Wa(a){var b=a.x,c=a.y;return a.x=mc(this.long0+(b-this.x0)/(this.a*this.rc)),a.y=Od(this.lat0+(c-this.y0)/this.a),a}function Xa(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.ml0=this.a*Id(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Ya(a){var b,c,d,e=a.x,f=a.y,g=mc(e-this.long0);if(d=g*Math.sin(f),this.sphere)Math.abs(f)<=Nb?(b=this.a*g,c=-1*this.a*this.lat0):(b=this.a*Math.sin(d)/Math.tan(f),c=this.a*(Od(f-this.lat0)+(1-Math.cos(d))/Math.tan(f)));else if(Math.abs(f)<=Nb)b=this.a*g,c=-1*this.ml0;else{var h=Nd(this.a,this.e,Math.sin(f))/Math.tan(f);b=h*Math.sin(d),c=this.a*Id(this.e0,this.e1,this.e2,this.e3,f)-this.ml0+h*(1-Math.cos(d))}return a.x=b+this.x0,a.y=c+this.y0,a}function Za(a){var b,c,d,e,f,g,h,i,j;if(d=a.x-this.x0,e=a.y-this.y0,this.sphere)if(Math.abs(e+this.a*this.lat0)<=Nb)b=mc(d/this.a+this.long0),c=0;else{g=this.lat0+e/this.a,h=d*d/this.a/this.a+g*g,i=g;var k;for(f=ne;f;--f)if(k=Math.tan(i),j=-1*(g*(i*k+1)-i-.5*(i*i+h)*k)/((i-g)/k-1),i+=j,Math.abs(j)<=Nb){c=i;break}b=mc(this.long0+Math.asin(d*Math.tan(i)/this.a)/Math.sin(c))}else if(Math.abs(e+this.ml0)<=Nb)c=0,b=mc(this.long0+d/this.a);else{g=(this.ml0+e)/this.a,h=d*d/this.a/this.a+g*g,i=g;var l,m,n,o,p;for(f=ne;f;--f)if(p=this.e*Math.sin(i),l=Math.sqrt(1-p*p)*Math.tan(i),m=this.a*Id(this.e0,this.e1,this.e2,this.e3,i),n=this.e0-2*this.e1*Math.cos(2*i)+4*this.e2*Math.cos(4*i)-6*this.e3*Math.cos(6*i),o=m/this.a,j=(g*(l*o+1)-o-.5*l*(o*o+h))/(this.es*Math.sin(2*i)*(o*o+h-2*g*o)/(4*l)+(g-o)*(l*n-2/Math.sin(2*i))-n),i-=j,Math.abs(j)<=Nb){c=i;break}l=Math.sqrt(1-this.es*Math.pow(Math.sin(c),2))*Math.tan(c),b=mc(this.long0+Math.asin(d*l/this.a)/Math.sin(c))}return a.x=b,a.y=c,a}function $a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function _a(a){var b,c=a.x,d=a.y,e=d-this.lat0,f=c-this.long0,g=e/Ib*1e-5,h=f,i=1,j=0;for(b=1;b<=10;b++)i*=g,j+=this.A[b]*i;var k,l,m=j,n=h,o=1,p=0,q=0,r=0;for(b=1;b<=6;b++)k=o*m-p*n,l=p*m+o*n,o=k,p=l,q=q+this.B_re[b]*o-this.B_im[b]*p,r=r+this.B_im[b]*o+this.B_re[b]*p;return a.x=r*this.a+this.x0,a.y=q*this.a+this.y0,a}function ab(a){var b,c,d,e=a.x,f=a.y,g=e-this.x0,h=f-this.y0,i=h/this.a,j=g/this.a,k=1,l=0,m=0,n=0;for(b=1;b<=6;b++)c=k*i-l*j,d=l*i+k*j,k=c,l=d,m=m+this.C_re[b]*k-this.C_im[b]*l,n=n+this.C_im[b]*k+this.C_re[b]*l;for(var o=0;o<this.iterations;o++){var p,q,r=m,s=n,t=i,u=j;for(b=2;b<=6;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,t+=(b-1)*(this.B_re[b]*r-this.B_im[b]*s),u+=(b-1)*(this.B_im[b]*r+this.B_re[b]*s);r=1,s=0;var v=this.B_re[1],w=this.B_im[1];for(b=2;b<=6;b++)p=r*m-s*n,q=s*m+r*n,r=p,s=q,v+=b*(this.B_re[b]*r-this.B_im[b]*s),w+=b*(this.B_im[b]*r+this.B_re[b]*s);var x=v*v+w*w;m=(t*v+u*w)/x,n=(u*v-t*w)/x}var y=m,z=n,A=1,B=0;for(b=1;b<=9;b++)A*=y,B+=this.D[b]*A;var C=this.lat0+B*Ib*1e5,D=this.long0+z;return a.x=D,a.y=C,a}function bb(){}function cb(a){var b=a.x,c=a.y,d=mc(b-this.long0),e=this.x0+this.a*d,f=this.y0+this.a*Math.log(Math.tan(Math.PI/4+c/2.5))*1.25;return a.x=e,a.y=f,a}function db(a){a.x-=this.x0,a.y-=this.y0;var b=mc(this.long0+a.x/this.a),c=2.5*(Math.atan(Math.exp(.8*a.y/this.a))-Math.PI/4);return a.x=b,a.y=c,a}function eb(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=$c(this.es)}function fb(a){var b,c,d=a.x,e=a.y;if(d=mc(d-this.long0),this.sphere){if(this.m)for(var f=this.n*Math.sin(e),g=ue;g;--g){var h=(this.m*e+Math.sin(e)-f)/(this.m+Math.cos(e));if(e-=h,Math.abs(h)<Nb)break}else e=1!==this.n?Math.asin(this.n*Math.sin(e)):e;b=this.a*this.C_x*d*(this.m+Math.cos(e)),c=this.a*this.C_y*e}else{var i=Math.sin(e),j=Math.cos(e);c=this.a*_c(e,i,j,this.en),b=this.a*d*j/Math.sqrt(1-this.es*i*i)}return a.x=b,a.y=c,a}function gb(a){var b,c,d,e;return a.x-=this.x0,d=a.x/this.a,a.y-=this.y0,b=a.y/this.a,this.sphere?(b/=this.C_y,d/=this.C_x*(this.m+Math.cos(b)),this.m?b=de((this.m*b+Math.sin(b))/this.n):1!==this.n&&(b=de(Math.sin(b)/this.n)),d=mc(d+this.long0),b=Od(b)):(b=bd(a.y/this.a,this.es,this.en),e=Math.abs(b),e<Jb?(e=Math.sin(b),c=this.long0+a.x*Math.sqrt(1-this.es*e*e)/(this.a*Math.cos(b)),d=mc(c)):e-Nb<Jb&&(d=this.long0)),a.x=d,a.y=b,a}function hb(){}function ib(a){for(var b=a.x,c=a.y,d=mc(b-this.long0),e=c,f=Math.PI*Math.sin(c),g=0;!0;g++){var h=-(e+Math.sin(e)-f)/(1+Math.cos(e));if(e+=h,Math.abs(h)<Nb)break}e/=2,Math.PI/2-Math.abs(c)<Nb&&(d=0);var i=.900316316158*this.a*d*Math.cos(e)+this.x0,j=1.4142135623731*this.a*Math.sin(e)+this.y0;return a.x=i,a.y=j,a}function jb(a){var b,c;a.x-=this.x0,a.y-=this.y0,c=a.y/(1.4142135623731*this.a),Math.abs(c)>.999999999999&&(c=.999999999999),b=Math.asin(c);var d=mc(this.long0+a.x/(.900316316158*this.a*Math.cos(b)));d<-Math.PI&&(d=-Math.PI),d>Math.PI&&(d=Math.PI),c=(2*b+Math.sin(2*b))/Math.PI,Math.abs(c)>1&&(c=1);var e=Math.asin(c);return a.x=d,a.y=e,a}function kb(){Math.abs(this.lat1+this.lat2)<Nb||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Jd(this.es),this.e1=Kd(this.es),this.e2=Ld(this.es),this.e3=Md(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=kc(this.e,this.sinphi,this.cosphi),this.ml1=Id(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Nb?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=kc(this.e,this.sinphi,this.cosphi),this.ml2=Id(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Id(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function lb(a){var b,c=a.x,d=a.y;if(this.sphere)b=this.a*(this.g-d);else{var e=Id(this.e0,this.e1,this.e2,this.e3,d);b=this.a*(this.g-e)}var f=this.ns*mc(c-this.long0),g=this.x0+b*Math.sin(f),h=this.y0+this.rh-b*Math.cos(f);return a.x=g,a.y=h,a}function mb(a){a.x-=this.x0,a.y=this.rh-a.y+this.y0;var b,c,d,e;this.ns>=0?(c=Math.sqrt(a.x*a.x+a.y*a.y),b=1):(c=-Math.sqrt(a.x*a.x+a.y*a.y),b=-1);var f=0;if(0!==c&&(f=Math.atan2(b*a.x,b*a.y)),this.sphere)return e=mc(this.long0+f/this.ns),d=Od(this.g-c/this.a),a.x=e,a.y=d,a;var g=this.g-c/this.a;return d=Pd(g,this.e0,this.e1,this.e2,this.e3),e=mc(this.long0+f/this.ns),a.x=e,a.y=d,a}function nb(){this.R=this.a}function ob(a){var b,c,d=a.x,e=a.y,f=mc(d-this.long0);Math.abs(e)<=Nb&&(b=this.x0+this.R*f,c=this.y0);var g=de(2*Math.abs(e/Math.PI));(Math.abs(f)<=Nb||Math.abs(Math.abs(e)-Jb)<=Nb)&&(b=this.x0,c=e>=0?this.y0+Math.PI*this.R*Math.tan(.5*g):this.y0+Math.PI*this.R*-Math.tan(.5*g));var h=.5*Math.abs(Math.PI/f-f/Math.PI),i=h*h,j=Math.sin(g),k=Math.cos(g),l=k/(j+k-1),m=l*l,n=l*(2/j-1),o=n*n,p=Math.PI*this.R*(h*(l-o)+Math.sqrt(i*(l-o)*(l-o)-(o+i)*(m-o)))/(o+i);f<0&&(p=-p),b=this.x0+p;var q=i+l;return p=Math.PI*this.R*(n*q-h*Math.sqrt((o+i)*(i+1)-q*q))/(o+i),c=e>=0?this.y0+p:this.y0-p,a.x=b,a.y=c,a}function pb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return a.x-=this.x0,a.y-=this.y0,l=Math.PI*this.R,d=a.x/l,e=a.y/l,f=d*d+e*e,g=-Math.abs(e)*(1+f),h=g-2*e*e+d*d,i=-2*g+1+2*e*e+f*f,n=e*e/i+(2*h*h*h/i/i/i-9*g*h/i/i)/27,j=(g-h*h/3/i)/i,k=2*Math.sqrt(-j/3),l=3*n/j/k,Math.abs(l)>1&&(l=l>=0?1:-1),m=Math.acos(l)/3,c=a.y>=0?(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI:-(-k*Math.cos(m+Math.PI/3)-h/3/i)*Math.PI,b=Math.abs(d)<Nb?this.long0:mc(this.long0+Math.PI*(f-1+Math.sqrt(1+2*(d*d-e*e)+f*f))/2/d),a.x=b,a.y=c,a}function qb(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function rb(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=a.x,z=a.y,A=Math.sin(a.y),B=Math.cos(a.y),C=mc(y-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=Nb?(a.x=this.x0+this.a*(Jb-z)*Math.sin(C),a.y=this.y0-this.a*(Jb-z)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Nb?(a.x=this.x0+this.a*(Jb+z)*Math.sin(C),a.y=this.y0+this.a*(Jb+z)*Math.cos(C),a):(s=this.sin_p12*A+this.cos_p12*B*Math.cos(C),q=Math.acos(s),r=q/Math.sin(q),a.x=this.x0+this.a*r*B*Math.sin(C),a.y=this.y0+this.a*r*(this.cos_p12*A-this.sin_p12*B*Math.cos(C)),a):(b=Jd(this.es),c=Kd(this.es),d=Ld(this.es),e=Md(this.es),Math.abs(this.sin_p12-1)<=Nb?(f=this.a*Id(b,c,d,e,Jb),g=this.a*Id(b,c,d,e,z),a.x=this.x0+(f-g)*Math.sin(C),a.y=this.y0-(f-g)*Math.cos(C),a):Math.abs(this.sin_p12+1)<=Nb?(f=this.a*Id(b,c,d,e,Jb),g=this.a*Id(b,c,d,e,z),a.x=this.x0+(f+g)*Math.sin(C),a.y=this.y0+(f+g)*Math.cos(C),a):(h=A/B,i=Nd(this.a,this.e,this.sin_p12),j=Nd(this.a,this.e,A),k=Math.atan((1-this.es)*h+this.es*i*this.sin_p12/(j*B)),l=Math.atan2(Math.sin(C),this.cos_p12*Math.tan(k)-this.sin_p12*Math.cos(C)),t=0===l?Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.abs(Math.abs(l)-Math.PI)<=Nb?-Math.asin(this.cos_p12*Math.sin(k)-this.sin_p12*Math.cos(k)):Math.asin(Math.sin(C)*Math.cos(k)/Math.sin(l)),m=this.e*this.sin_p12/Math.sqrt(1-this.es),n=this.e*this.cos_p12*Math.cos(l)/Math.sqrt(1-this.es),o=m*n,p=n*n,u=t*t,v=u*t,w=v*t,x=w*t,q=i*t*(1-u*p*(1-p)/6+v/8*o*(1-2*p)+w/120*(p*(4-7*p)-3*m*m*(1-7*p))-x/48*o),a.x=this.x0+q*Math.sin(l),a.y=this.y0+q*Math.cos(l),a))}function sb(a){a.x-=this.x0,a.y-=this.y0;var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x;if(this.sphere){if(b=Math.sqrt(a.x*a.x+a.y*a.y),b>2*Jb*this.a)return;return c=b/this.a,d=Math.sin(c),e=Math.cos(c),f=this.long0,Math.abs(b)<=Nb?g=this.lat0:(g=de(e*this.sin_p12+a.y*d*this.cos_p12/b),h=Math.abs(this.lat0)-Jb,f=mc(Math.abs(h)<=Nb?this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y):this.long0+Math.atan2(a.x*d,b*this.cos_p12*e-a.y*this.sin_p12*d))),a.x=f,a.y=g,a}return i=Jd(this.es),j=Kd(this.es),k=Ld(this.es),l=Md(this.es),Math.abs(this.sin_p12-1)<=Nb?(m=this.a*Id(i,j,k,l,Jb),b=Math.sqrt(a.x*a.x+a.y*a.y),n=m-b,g=Pd(n/this.a,i,j,k,l),f=mc(this.long0+Math.atan2(a.x,-1*a.y)),a.x=f,a.y=g,a):Math.abs(this.sin_p12+1)<=Nb?(m=this.a*Id(i,j,k,l,Jb),b=Math.sqrt(a.x*a.x+a.y*a.y),n=b-m,g=Pd(n/this.a,i,j,k,l),f=mc(this.long0+Math.atan2(a.x,a.y)),a.x=f,a.y=g,a):(b=Math.sqrt(a.x*a.x+a.y*a.y),q=Math.atan2(a.x,a.y),o=Nd(this.a,this.e,this.sin_p12),r=Math.cos(q),s=this.e*this.cos_p12*r,t=-s*s/(1-this.es),u=3*this.es*(1-t)*this.sin_p12*this.cos_p12*r/(1-this.es),v=b/o,w=v-t*(1+t)*Math.pow(v,3)/6-u*(1+3*t)*Math.pow(v,4)/24,x=1-t*w*w/2-v*w*w*w/6,p=Math.asin(this.sin_p12*Math.cos(w)+this.cos_p12*Math.sin(w)*r),f=mc(this.long0+Math.asin(Math.sin(q)*Math.sin(w)/Math.cos(p))),g=Math.atan((1-this.es*x*this.sin_p12/Math.sin(p))*Math.tan(p)/(1-this.es)),a.x=f,a.y=g,a)}function tb(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ub(a){var b,c,d,e,f,g,h,i,j=a.x,k=a.y;return d=mc(j-this.long0),b=Math.sin(k),c=Math.cos(k),e=Math.cos(d),g=this.sin_p14*b+this.cos_p14*c*e,f=1,(g>0||Math.abs(g)<=Nb)&&(h=this.a*f*c*Math.sin(d),i=this.y0+this.a*f*(this.cos_p14*b-this.sin_p14*c*e)),a.x=h,a.y=i,a}function vb(a){var b,c,d,e,f,g,h;return a.x-=this.x0,a.y-=this.y0,b=Math.sqrt(a.x*a.x+a.y*a.y),c=de(b/this.a),d=Math.sin(c),e=Math.cos(c),g=this.long0,Math.abs(b)<=Nb?(h=this.lat0,a.x=g,a.y=h,a):(h=de(e*this.sin_p14+a.y*d*this.cos_p14/b),f=Math.abs(this.lat0)-Jb,Math.abs(f)<=Nb?(g=mc(this.lat0>=0?this.long0+Math.atan2(a.x,-a.y):this.long0-Math.atan2(-a.x,a.y)),a.x=g,a.y=h,a):(g=mc(this.long0+Math.atan2(a.x*d,b*this.cos_p14*e-a.y*this.sin_p14*d)),a.x=g,a.y=h,a))}function wb(){this.isGeocent=!0}function xb(a){return a}function yb(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.face_enum={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},this.area_enum={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},this.lat0>=Jb-Qb/2?this.face=this.face_enum.TOP:this.lat0<=-(Jb-Qb/2)?this.face=this.face_enum.BOTTOM:Math.abs(this.long0)<=Qb?this.face=this.face_enum.FRONT:Math.abs(this.long0)<=Jb+Qb?this.face=this.long0>0?this.face_enum.RIGHT:this.face_enum.LEFT:this.face=this.face_enum.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function zb(a){var b,c,d,e,f,g,h={x:0,y:0},i={value:0};if(a.x-=this.long0,b=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(a.y)):a.y,c=a.x,this.face===this.face_enum.TOP)e=Jb-b,c>=Qb&&c<=Jb+Qb?(i.value=this.area_enum.AREA_0,d=c-Jb):c>Jb+Qb||c<=-(Jb+Qb)?(i.value=this.area_enum.AREA_1,d=c>0?c-Sb:c+Sb):c>-(Jb+Qb)&&c<=-Qb?(i.value=this.area_enum.AREA_2,d=c+Jb):(i.value=this.area_enum.AREA_3,d=c);else if(this.face===this.face_enum.BOTTOM)e=Jb+b,c>=Qb&&c<=Jb+Qb?(i.value=this.area_enum.AREA_0,d=-c+Jb):c<Qb&&c>=-Qb?(i.value=this.area_enum.AREA_1,d=-c):c<-Qb&&c>=-(Jb+Qb)?(i.value=this.area_enum.AREA_2,d=-c-Jb):(i.value=this.area_enum.AREA_3,d=c>0?-c+Sb:-c-Sb);else{var j,k,l,m,n,o,p;this.face===this.face_enum.RIGHT?c=this.qsc_shift_lon_origin(c,+Jb):this.face===this.face_enum.BACK?c=this.qsc_shift_lon_origin(c,+Sb):this.face===this.face_enum.LEFT&&(c=this.qsc_shift_lon_origin(c,-Jb)),m=Math.sin(b),n=Math.cos(b),o=Math.sin(c),p=Math.cos(c),j=n*p,k=n*o,l=m,this.face===this.face_enum.FRONT?(e=Math.acos(j),d=this.qsc_fwd_equat_face_theta(e,l,k,i)):this.face===this.face_enum.RIGHT?(e=Math.acos(k),d=this.qsc_fwd_equat_face_theta(e,l,-j,i)):this.face===this.face_enum.BACK?(e=Math.acos(-j),d=this.qsc_fwd_equat_face_theta(e,l,-k,i)):this.face===this.face_enum.LEFT?(e=Math.acos(-k),d=this.qsc_fwd_equat_face_theta(e,l,j,i)):(e=d=0,i.value=this.area_enum.AREA_0)}return g=Math.atan(12/Sb*(d+Math.acos(Math.sin(d)*Math.cos(Qb))-Jb)),f=Math.sqrt((1-Math.cos(e))/(Math.cos(g)*Math.cos(g))/(1-Math.cos(Math.atan(1/Math.cos(d))))),i.value===this.area_enum.AREA_1?g+=Jb:i.value===this.area_enum.AREA_2?g+=Sb:i.value===this.area_enum.AREA_3&&(g+=1.5*Sb),h.x=f*Math.cos(g),h.y=f*Math.sin(g),h.x=h.x*this.a+this.x0,h.y=h.y*this.a+this.y0,a.x=h.x,a.y=h.y,a}function Ab(a){var b,c,d,e,f,g,h,i,j,k={lam:0,phi:0},l={value:0};if(a.x=(a.x-this.x0)/this.a,a.y=(a.y-this.y0)/this.a,c=Math.atan(Math.sqrt(a.x*a.x+a.y*a.y)),b=Math.atan2(a.y,a.x),a.x>=0&&a.x>=Math.abs(a.y)?l.value=this.area_enum.AREA_0:a.y>=0&&a.y>=Math.abs(a.x)?(l.value=this.area_enum.AREA_1,b-=Jb):a.x<0&&-a.x>=Math.abs(a.y)?(l.value=this.area_enum.AREA_2,b=b<0?b+Sb:b-Sb):(l.value=this.area_enum.AREA_3,b+=Jb),j=Sb/12*Math.tan(b),f=Math.sin(j)/(Math.cos(j)-1/Math.sqrt(2)),g=Math.atan(f),d=Math.cos(b),e=Math.tan(c),h=1-d*d*e*e*(1-Math.cos(Math.atan(1/Math.cos(g)))),h<-1?h=-1:h>1&&(h=1),this.face===this.face_enum.TOP)i=Math.acos(h),k.phi=Jb-i,l.value===this.area_enum.AREA_0?k.lam=g+Jb:l.value===this.area_enum.AREA_1?k.lam=g<0?g+Sb:g-Sb:l.value===this.area_enum.AREA_2?k.lam=g-Jb:k.lam=g;else if(this.face===this.face_enum.BOTTOM)i=Math.acos(h),k.phi=i-Jb,l.value===this.area_enum.AREA_0?k.lam=-g+Jb:l.value===this.area_enum.AREA_1?k.lam=-g:l.value===this.area_enum.AREA_2?k.lam=-g-Jb:k.lam=g<0?-g-Sb:-g+Sb;else{var m,n,o;m=h,j=m*m,o=j>=1?0:Math.sqrt(1-j)*Math.sin(g),j+=o*o,n=j>=1?0:Math.sqrt(1-j),l.value===this.area_enum.AREA_1?(j=n,n=-o,o=j):l.value===this.area_enum.AREA_2?(n=-n,o=-o):l.value===this.area_enum.AREA_3&&(j=n,n=o,o=-j),this.face===this.face_enum.RIGHT?(j=m,m=-n,n=j):this.face===this.face_enum.BACK?(m=-m,n=-n):this.face===this.face_enum.LEFT&&(j=m,m=n,n=-j),k.phi=Math.acos(-o)-Jb,k.lam=Math.atan2(n,m),this.face===this.face_enum.RIGHT?k.lam=this.qsc_shift_lon_origin(k.lam,-Jb):this.face===this.face_enum.BACK?k.lam=this.qsc_shift_lon_origin(k.lam,-Sb):this.face===this.face_enum.LEFT&&(k.lam=this.qsc_shift_lon_origin(k.lam,+Jb))}if(0!==this.es){var p,q,r;p=k.phi<0?1:0,q=Math.tan(k.phi),r=this.b/Math.sqrt(q*q+this.one_minus_f_squared),k.phi=Math.atan(Math.sqrt(this.a*this.a-r*r)/(this.one_minus_f*r)),p&&(k.phi=-k.phi)}return k.lam+=this.long0,a.x=k.lam,a.y=k.phi,a}function Bb(a,b,c,d){var e;return a<Nb?(d.value=this.area_enum.AREA_0,e=0):(e=Math.atan2(b,c),Math.abs(e)<=Qb?d.value=this.area_enum.AREA_0:e>Qb&&e<=Jb+Qb?(d.value=this.area_enum.AREA_1,e-=Jb):e>Jb+Qb||e<=-(Jb+Qb)?(d.value=this.area_enum.AREA_2,e=e>=0?e-Sb:e+Sb):(d.value=this.area_enum.AREA_3,e+=Jb)),e}function Cb(a,b){var c=a+b;return c<-Sb?c+=Rb:c>+Sb&&(c-=Rb),c}var Db=function(a){a("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),a("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),a("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),a.WGS84=a["EPSG:4326"],a["EPSG:3785"]=a["EPSG:3857"],a.GOOGLE=a["EPSG:3857"],a["EPSG:900913"]=a["EPSG:3857"],a["EPSG:102113"]=a["EPSG:3857"]},Eb=1,Fb=2,Gb=4,Hb=5,Ib=484813681109536e-20,Jb=Math.PI/2,Kb=.16666666666666666,Lb=.04722222222222222,Mb=.022156084656084655,Nb="undefined"==typeof Number.EPSILON?1e-10:Number.EPSILON,Ob=.017453292519943295,Pb=57.29577951308232,Qb=Math.PI/4,Rb=2*Math.PI,Sb=3.14159265359,Tb={};Tb.greenwich=0,Tb.lisbon=-9.131906111111,Tb.paris=2.337229166667,Tb.bogota=-74.080916666667,Tb.madrid=-3.687938888889,Tb.rome=12.452333333333,Tb.bern=7.439583333333,Tb.jakarta=106.807719444444,Tb.ferro=-17.666666666667,Tb.brussels=4.367975,Tb.stockholm=18.058277777778,Tb.athens=23.7163375,Tb.oslo=10.722916666667;var Ub={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},Vb=/[\s_\-\/\(\)]/g,Wb=function(b){var c,d,e,f={},g=b.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,b){var c=b.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),h={proj:"projName",datum:"datumCode",rf:function(a){f.rf=parseFloat(a)},lat_0:function(a){f.lat0=a*Ob},lat_1:function(a){f.lat1=a*Ob},lat_2:function(a){f.lat2=a*Ob},lat_ts:function(a){f.lat_ts=a*Ob},lon_0:function(a){f.long0=a*Ob},lon_1:function(a){f.long1=a*Ob},lon_2:function(a){f.long2=a*Ob},alpha:function(a){f.alpha=parseFloat(a)*Ob},lonc:function(a){f.longc=a*Ob},x_0:function(a){f.x0=parseFloat(a)},y_0:function(a){f.y0=parseFloat(a)},k_0:function(a){f.k0=parseFloat(a)},k:function(a){f.k0=parseFloat(a)},a:function(a){f.a=parseFloat(a)},b:function(a){f.b=parseFloat(a)},r_a:function(){f.R_A=!0},zone:function(a){f.zone=parseInt(a,10)},south:function(){f.utmSouth=!0},towgs84:function(a){f.datum_params=a.split(",").map(function(a){return parseFloat(a)})},to_meter:function(a){f.to_meter=parseFloat(a)},units:function(b){f.units=b;var c=a(Ub,b);c&&(f.to_meter=c.to_meter)},from_greenwich:function(a){f.from_greenwich=a*Ob},pm:function(b){var c=a(Tb,b);f.from_greenwich=(c?c:parseFloat(b))*Ob},nadgrids:function(a){"@null"===a?f.datumCode="none":f.nadgrids=a},axis:function(a){var b="ewnsud";3===a.length&&b.indexOf(a.substr(0,1))!==-1&&b.indexOf(a.substr(1,1))!==-1&&b.indexOf(a.substr(2,1))!==-1&&(f.axis=a)}};for(c in g)d=g[c],c in h?(e=h[c],"function"==typeof e?e(d):f[e]=d):f[c]=d;return"string"==typeof f.datumCode&&"WGS84"!==f.datumCode&&(f.datumCode=f.datumCode.toLowerCase()),f},Xb=1,Yb=2,Zb=3,$b=4,_b=5,ac=-1,bc=/\s/,cc=/[A-Za-z]/,dc=/[A-Za-z84]/,ec=/[,\]]/,fc=/[\d\.E\-\+]/;b.prototype.readCharicter=function(){var a=this.text[this.place++];if(this.state!==$b)for(;bc.test(a);){if(this.place>=this.text.length)return;a=this.text[this.place++]}switch(this.state){case Xb:return this.neutral(a);case Yb:return this.keyword(a);case $b:return this.quoted(a);case _b:return this.afterquote(a);case Zb:return this.number(a);case ac:return}},b.prototype.afterquote=function(a){if('"'===a)return this.word+='"',void(this.state=$b);if(ec.test(a))return this.word=this.word.trim(),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in afterquote yet, index '+this.place)},b.prototype.afterItem=function(a){return","===a?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Xb)):"]"===a?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Xb,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=ac))):void 0},b.prototype.number=function(a){if(fc.test(a))return void(this.word+=a);if(ec.test(a))return this.word=parseFloat(this.word),void this.afterItem(a);throw new Error("havn't handled \""+a+'" in number yet, index '+this.place)},b.prototype.quoted=function(a){return'"'===a?void(this.state=_b):void(this.word+=a)},b.prototype.keyword=function(a){if(dc.test(a))return void(this.word+=a);if("["===a){var b=[];return b.push(this.word),this.level++,null===this.root?this.root=b:this.currentObject.push(b),this.stack.push(this.currentObject),this.currentObject=b,void(this.state=Xb)}if(ec.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in keyword yet, index '+this.place)},b.prototype.neutral=function(a){if(cc.test(a))return this.word=a,void(this.state=Yb);if('"'===a)return this.word="",void(this.state=$b);if(fc.test(a))return this.word=a,void(this.state=Zb);if(ec.test(a))return void this.afterItem(a);throw new Error("havn't handled \""+a+'" in neutral yet, index '+this.place)},b.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ac)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var gc=.017453292519943295,hc=function(a){var b=c(a),d=b.shift(),f=b.shift();b.unshift(["name",f]),b.unshift(["type",d]);var g={};return e(b,g),h(g),g};Db(i);var ic=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],jc=function(a,b){a=a||{};var c,d;if(!b)return a;for(d in b)c=b[d],void 0!==c&&(a[d]=c);return a},kc=function(a,b,c){var d=a*b;return c/Math.sqrt(1-d*d)},lc=function(a){return a<0?-1:1;
},mc=function(a){return Math.abs(a)<=Sb?a:a-lc(a)*Rb},nc=function(a,b,c){var d=a*c,e=.5*a;return d=Math.pow((1-d)/(1+d),e),Math.tan(.5*(Jb-b))/d},oc=function(a,b){for(var c,d,e=.5*a,f=Jb-2*Math.atan(b),g=0;g<=15;g++)if(c=a*Math.sin(f),d=Jb-2*Math.atan(b*Math.pow((1-c)/(1+c),e))-f,f+=d,Math.abs(d)<=1e-10)return f;return-9999},pc=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],qc={init:o,forward:p,inverse:q,names:pc},rc=["longlat","identity"],sc={init:r,forward:s,inverse:s,names:rc},tc=[qc,sc],uc={},vc=[],wc={start:v,add:t,get:u},xc={};xc.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},xc.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},xc.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},xc.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},xc.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},xc.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},xc.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},xc.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},xc.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},xc.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},xc.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},xc.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},xc.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},xc.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},xc.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},xc.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},xc.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},xc.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},xc.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},xc.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},xc.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},xc.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},xc.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},xc.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},xc.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},xc.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},xc.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},xc.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},xc.hough={a:6378270,rf:297,ellipseName:"Hough"},xc.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},xc.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},xc.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},xc.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},xc.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},xc.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},xc.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},xc.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},xc.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},xc.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},xc.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},xc.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var yc=xc.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};xc.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var zc={};zc.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},zc.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},zc.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},zc.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},zc.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},zc.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},zc.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},zc.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},zc.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},zc.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},zc.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},zc.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},zc.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},zc.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},zc.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},zc.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},z.projections=wc,z.projections.start();var Ac=function(a,b,c){return A(a,b)?c:a.datum_type===Hb||b.datum_type===Hb?c:a.es!==b.es||a.a!==b.a||F(a.datum_type)||F(b.datum_type)?(c=B(c,a.es,a.a),F(a.datum_type)&&(c=D(c,a.datum_type,a.datum_params)),F(b.datum_type)&&(c=E(c,b.datum_type,b.datum_params)),C(c,b.es,b.a,b.b)):c},Bc=function(a,b,c){var d,e,f,g=c.x,h=c.y,i=c.z||0,j={};for(f=0;f<3;f++)if(!b||2!==f||void 0!==c.z)switch(0===f?(d=g,e="x"):1===f?(d=h,e="y"):(d=i,e="z"),a.axis[f]){case"e":j[e]=d;break;case"w":j[e]=-d;break;case"n":j[e]=d;break;case"s":j[e]=-d;break;case"u":void 0!==c[e]&&(j.z=d);break;case"d":void 0!==c[e]&&(j.z=-d);break;default:return null}return j},Cc=function(a){var b={x:a[0],y:a[1]};return a.length>2&&(b.z=a[2]),a.length>3&&(b.m=a[3]),b},Dc=z("WGS84"),Ec=6,Fc="AJSAJS",Gc="AFAFAF",Hc=65,Ic=73,Jc=79,Kc=86,Lc=90,Mc={forward:L,inverse:M,toPoint:N};Point.fromMGRS=function(a){return new Point(N(a))},Point.prototype.toMGRS=function(a){return L([this.x,this.y],a)};var Nc="2.4.4-alpha",Oc=1,Pc=.25,Qc=.046875,Rc=.01953125,Sc=.01068115234375,Tc=.75,Uc=.46875,Vc=.013020833333333334,Wc=.007120768229166667,Xc=.3645833333333333,Yc=.005696614583333333,Zc=.3076171875,$c=function(a){var b=[];b[0]=Oc-a*(Pc+a*(Qc+a*(Rc+a*Sc))),b[1]=a*(Tc-a*(Qc+a*(Rc+a*Sc)));var c=a*a;return b[2]=c*(Uc-a*(Vc+a*Wc)),c*=a,b[3]=c*(Xc-a*Yc),b[4]=c*a*Zc,b},_c=function(a,b,c,d){return c*=b,b*=b,d[0]*a-c*(d[1]+b*(d[2]+b*(d[3]+b*d[4])))},ad=20,bd=function(a,b,c){for(var d=1/(1-b),e=a,f=ad;f;--f){var g=Math.sin(e),h=1-b*g*g;if(h=(_c(e,g,Math.cos(e),c)-a)*(h*Math.sqrt(h))*d,e-=h,Math.abs(h)<Nb)return e}return e},cd=["Transverse_Mercator","Transverse Mercator","tmerc"],dd={init:_,forward:aa,inverse:ba,names:cd},ed=function(a){var b=Math.exp(a);return b=(b-1/b)/2},fd=function(a,b){a=Math.abs(a),b=Math.abs(b);var c=Math.max(a,b),d=Math.min(a,b)/(c?c:1);return c*Math.sqrt(1+Math.pow(d,2))},gd=function(a){var b=1+a,c=b-1;return 0===c?a:a*Math.log(b)/c},hd=function(a){var b=Math.abs(a);return b=gd(b*(1+b/(fd(1,b)+1))),a<0?-b:b},id=function(a,b){for(var c,d=2*Math.cos(2*b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return b+c*Math.sin(2*b)},jd=function(a,b){for(var c,d=2*Math.cos(b),e=a.length-1,f=a[e],g=0;--e>=0;)c=-g+d*f+a[e],g=f,f=c;return Math.sin(b)*c},kd=function(a){var b=Math.exp(a);return b=(b+1/b)/2},ld=function(a,b,c){for(var d,e,f=Math.sin(b),g=Math.cos(b),h=ed(c),i=kd(c),j=2*g*i,k=-2*f*h,l=a.length-1,m=a[l],n=0,o=0,p=0;--l>=0;)d=o,e=n,o=m,n=p,m=-d+j*o-k*n+a[l],p=-e+k*o+j*n;return j=f*i,k=g*h,[j*m-k*p,j*p+k*m]},md=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],nd={init:ca,forward:da,inverse:ea,names:md},od=function(a,b){if(void 0===a){if(a=Math.floor(30*(mc(b)+Math.PI)/Math.PI)+1,a<0)return 0;if(a>60)return 60}return a},pd="etmerc",qd=["Universal Transverse Mercator System","utm"],rd={init:fa,names:qd,dependsOn:pd},sd=function(a,b){return Math.pow((1-a)/(1+a),b)},td=20,ud=["gauss"],vd={init:ga,forward:ha,inverse:ia,names:ud},wd=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],xd={init:ja,forward:ka,inverse:la,names:wd},yd=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],zd={init:na,forward:oa,inverse:pa,names:yd,ssfn_:ma},Ad=["somerc"],Bd={init:qa,forward:ra,inverse:sa,names:Ad},Cd=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],Dd={init:ta,forward:ua,inverse:va,names:Cd},Ed=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],Fd={init:wa,forward:xa,inverse:ya,names:Ed},Gd=["Krovak","krovak"],Hd={init:za,forward:Aa,inverse:Ba,names:Gd},Id=function(a,b,c,d,e){return a*e-b*Math.sin(2*e)+c*Math.sin(4*e)-d*Math.sin(6*e)},Jd=function(a){return 1-.25*a*(1+a/16*(3+1.25*a))},Kd=function(a){return.375*a*(1+.25*a*(1+.46875*a))},Ld=function(a){return.05859375*a*a*(1+.75*a)},Md=function(a){return a*a*a*(35/3072)},Nd=function(a,b,c){var d=b*c;return a/Math.sqrt(1-d*d)},Od=function(a){return Math.abs(a)<Jb?a:a-lc(a)*Math.PI},Pd=function(a,b,c,d,e){var f,g;f=a/b;for(var h=0;h<15;h++)if(g=(a-(b*f-c*Math.sin(2*f)+d*Math.sin(4*f)-e*Math.sin(6*f)))/(b-2*c*Math.cos(2*f)+4*d*Math.cos(4*f)-6*e*Math.cos(6*f)),f+=g,Math.abs(g)<=1e-10)return f;return NaN},Qd=["Cassini","Cassini_Soldner","cass"],Rd={init:Ca,forward:Da,inverse:Ea,names:Qd},Sd=function(a,b){var c;return a>1e-7?(c=a*b,(1-a*a)*(b/(1-c*c)-.5/a*Math.log((1-c)/(1+c)))):2*b},Td=1,Ud=2,Vd=3,Wd=4,Xd=.3333333333333333,Yd=.17222222222222222,Zd=.10257936507936508,$d=.06388888888888888,_d=.0664021164021164,ae=.016415012942191543,be=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],ce={init:Fa,forward:Ga,inverse:Ha,names:be,S_POLE:Td,N_POLE:Ud,EQUIT:Vd,OBLIQ:Wd},de=function(a){return Math.abs(a)>1&&(a=a>1?1:-1),Math.asin(a)},ee=["Albers_Conic_Equal_Area","Albers","aea"],fe={init:Ka,forward:La,inverse:Ma,names:ee,phi1z:Na},ge=["gnom"],he={init:Oa,forward:Pa,inverse:Qa,names:ge},ie=function(a,b){var c=1-(1-a*a)/(2*a)*Math.log((1-a)/(1+a));if(Math.abs(Math.abs(b)-c)<1e-6)return b<0?-1*Jb:Jb;for(var d,e,f,g,h=Math.asin(.5*b),i=0;i<30;i++)if(e=Math.sin(h),f=Math.cos(h),g=a*e,d=Math.pow(1-g*g,2)/(2*f)*(b/(1-a*a)-e/(1-g*g)+.5/a*Math.log((1-g)/(1+g))),h+=d,Math.abs(d)<=1e-10)return h;return NaN},je=["cea"],ke={init:Ra,forward:Sa,inverse:Ta,names:je},le=["Equirectangular","Equidistant_Cylindrical","eqc"],me={init:Ua,forward:Va,inverse:Wa,names:le},ne=20,oe=["Polyconic","poly"],pe={init:Xa,forward:Ya,inverse:Za,names:oe},qe=["New_Zealand_Map_Grid","nzmg"],re={init:$a,forward:_a,inverse:ab,names:qe},se=["Miller_Cylindrical","mill"],te={init:bb,forward:cb,inverse:db,names:se},ue=20,ve=["Sinusoidal","sinu"],we={init:eb,forward:fb,inverse:gb,names:ve},xe=["Mollweide","moll"],ye={init:hb,forward:ib,inverse:jb,names:xe},ze=["Equidistant_Conic","eqdc"],Ae={init:kb,forward:lb,inverse:mb,names:ze},Be=["Van_der_Grinten_I","VanDerGrinten","vandg"],Ce={init:nb,forward:ob,inverse:pb,names:Be},De=["Azimuthal_Equidistant","aeqd"],Ee={init:qb,forward:rb,inverse:sb,names:De},Fe=["ortho"],Ge={init:tb,forward:ub,inverse:vb,names:Fe},He=["geocent"],Ie={init:wb,forward:xb,inverse:xb,names:He},Je=["Quadrilateralized Spherical Cube","qsc"],Ke={init:yb,forward:zb,inverse:Ab,names:Je,qsc_fwd_equat_face_theta:Bb,qsc_shift_lon_origin:Cb},Le=function(_mproj4_){_mproj4_.Proj.projections.add(dd),_mproj4_.Proj.projections.add(nd),_mproj4_.Proj.projections.add(rd),_mproj4_.Proj.projections.add(xd),_mproj4_.Proj.projections.add(zd),_mproj4_.Proj.projections.add(Bd),_mproj4_.Proj.projections.add(Dd),_mproj4_.Proj.projections.add(Fd),_mproj4_.Proj.projections.add(Hd),_mproj4_.Proj.projections.add(Rd),_mproj4_.Proj.projections.add(ce),_mproj4_.Proj.projections.add(fe),_mproj4_.Proj.projections.add(he),_mproj4_.Proj.projections.add(ke),_mproj4_.Proj.projections.add(me),_mproj4_.Proj.projections.add(pe),_mproj4_.Proj.projections.add(re),_mproj4_.Proj.projections.add(te),_mproj4_.Proj.projections.add(we),_mproj4_.Proj.projections.add(ye),_mproj4_.Proj.projections.add(Ae),_mproj4_.Proj.projections.add(Ce),_mproj4_.Proj.projections.add(Ee),_mproj4_.Proj.projections.add(Ge),_mproj4_.Proj.projections.add(Ie),_mproj4_.Proj.projections.add(Ke)};return K.defaultDatum="WGS84",K.Proj=z,K.WGS84=new K.Proj("WGS84"),K.Point=Point,K.toPoint=Cc,K.defs=i,K.transform=H,K.mgrs=Mc,K.version=Nc,Le(K),K});var GeographicLib={};GeographicLib.Constants={};GeographicLib.Math={};GeographicLib.Accumulator={};(function(c){c.WGS84={a:6378137,f:1/298.257223563};c.version={major:1,minor:45,patch:0};c.version_string="1.45"})(GeographicLib.Constants);
(function(m){m.digits=53;m.epsilon=Math.pow(.5,m.digits-1);m.degree=Math.PI/180;m.sq=function(x){return x*x};m.hypot=function(x,y){var a,b;x=Math.abs(x);y=Math.abs(y);a=Math.max(x,y);b=Math.min(x,y)/(a?a:1);return a*Math.sqrt(1+b*b)};m.cbrt=function(x){var y=Math.pow(Math.abs(x),1/3);return x<0?-y:y};m.log1p=function(x){var y=1+x,z=y-1;return z===0?x:x*Math.log(y)/z};m.atanh=function(x){var y=Math.abs(x);y=m.log1p(2*y/(1-y))/2;return x<0?-y:y};m.sum=function(u,v){var s=u+v,up=s-v,vpp=s-up,t;up-=u;
vpp-=v;t=-(up+vpp);return{s:s,t:t}};m.polyval=function(N,p,s,x){var y=N<0?0:p[s++];while(--N>=0)y=y*x+p[s++];return y};m.AngRound=function(x){var z=1/16,y=Math.abs(x);y=y<z?z-(z-y):y;return x<0?0-y:y};m.AngNormalize=function(x){x=x%360;return x<-180?x+360:x<180?x:x-360};m.LatFix=function(x){return Math.abs(x)>90?Number.NaN:x};m.AngDiff=function(x,y){var r=m.sum(m.AngNormalize(x),m.AngNormalize(-y)),d=-m.AngNormalize(r.s),t=r.t;return(d==180&&t<0?-180:d)-t};m.sincosd=function(x){var r,q,s,c,sinx,cosx;
r=x%360;q=Math.floor(r/90+.5);r-=90*q;r*=this.degree;s=Math.sin(r);c=Math.cos(r);switch(q&3){case 0:sinx=s;cosx=c;break;case 1:sinx=c;cosx=0-s;break;case 2:sinx=0-s;cosx=0-c;break;default:sinx=0-c;cosx=s;break}return{s:sinx,c:cosx}};m.atan2d=function(y,x){var q=0,t,ang;if(Math.abs(y)>Math.abs(x)){t=x;x=y;y=t;q=2}if(x<0){x=-x;++q}ang=Math.atan2(y,x)/this.degree;switch(q){case 1:ang=(y>0?180:-180)-ang;break;case 2:ang=90-ang;break;case 3:ang=-90+ang;break}return ang}})(GeographicLib.Math);
(function(a,m){a.Accumulator=function(y){this.Set(y)};a.Accumulator.prototype.Set=function(y){if(!y)y=0;if(y.constructor===a.Accumulator){this._s=y._s;this._t=y._t}else{this._s=y;this._t=0}};a.Accumulator.prototype.Add=function(y){var u=m.sum(y,this._t),v=m.sum(u.s,this._s);u=u.t;this._s=v.s;this._t=v.t;if(this._s===0)this._s=u;else this._t+=u};a.Accumulator.prototype.Sum=function(y){var b;if(!y)return this._s;else{b=new a.Accumulator(this);b.Add(y);return b._s}};a.Accumulator.prototype.Negate=function(){this._s*=
-1;this._t*=-1}})(GeographicLib.Accumulator,GeographicLib.Math);GeographicLib.DMS={};
(function(d){var lookup,zerofill,InternalDecode,NumMatch,hemispheres_="SNWE",signs_="-+",digits_="0123456789",dmsindicators_="D'\":",dmsindicatorsu_="\u00b0'\"",components_=["degrees","minutes","seconds"];lookup=function(s,c){return s.indexOf(c.toUpperCase())};zerofill=function(s,n){return String("0000").substr(0,Math.max(0,Math.min(4,n-s.length)))+s};d.NONE=0;d.LATITUDE=1;d.LONGITUDE=2;d.AZIMUTH=3;d.DEGREE=0;d.MINUTE=1;d.SECOND=2;d.Decode=function(dms){var dmsa=dms,end,v=0,i=0,mi,pi,vals,ind1=d.NONE,
ind2,p,pa,pb;dmsa=dmsa.replace(/\u00b0/g,"d").replace(/\u00ba/g,"d").replace(/\u2070/g,"d").replace(/\u02da/g,"d").replace(/\u2032/g,"'").replace(/\u00b4/g,"'").replace(/\u2019/g,"'").replace(/\u2033/g,'"').replace(/\u201d/g,'"').replace(/\u2212/g,"-").replace(/''/g,'"').trim();end=dmsa.length;for(p=0;p<end;p=pb,++i){pa=p;if(i===0&&lookup(hemispheres_,dmsa.charAt(pa))>=0)++pa;if(i>0||pa<end&&lookup(signs_,dmsa.charAt(pa))>=0)++pa;mi=dmsa.substr(pa,end-pa).indexOf("-");pi=dmsa.substr(pa,end-pa).indexOf("+");
if(mi<0)mi=end;else mi+=pa;if(pi<0)pi=end;else pi+=pa;pb=Math.min(mi,pi);vals=InternalDecode(dmsa.substr(p,pb-p));v+=vals.val;ind2=vals.ind;if(ind1==d.NONE)ind1=ind2;else if(!(ind2==d.NONE||ind1==ind2))throw new Error("Incompatible hemisphere specifies in "+dmsa.substr(0,pb));}if(i===0)throw new Error("Empty or incomplete DMS string "+dmsa);return{val:v,ind:ind1}};InternalDecode=function(dmsa){var vals={},errormsg="",sign,beg,end,ind1,k,ipieces,fpieces,npiece,icurrent,fcurrent,ncurrent,p,pointseen,
digcount,intcount,x;do{sign=1;beg=0;end=dmsa.length;ind1=d.NONE;k=-1;if(end>beg&&(k=lookup(hemispheres_,dmsa.charAt(beg)))>=0){ind1=k&2?d.LONGITUDE:d.LATITUDE;sign=k&1?1:-1;++beg}if(end>beg&&(k=lookup(hemispheres_,dmsa.charAt(end-1)))>=0)if(k>=0){if(ind1!==d.NONE){if(dmsa.charAt(beg-1).toUpperCase()===dmsa.charAt(end-1).toUpperCase())errormsg="Repeated hemisphere indicators "+dmsa.charAt(beg-1)+" in "+dmsa.substr(beg-1,end-beg+1);else errormsg="Contradictory hemisphere indicators "+dmsa.charAt(beg-
1)+" and "+dmsa.charAt(end-1)+" in "+dmsa.substr(beg-1,end-beg+1);break}ind1=k&2?d.LONGITUDE:d.LATITUDE;sign=k&1?1:-1;--end}if(end>beg&&(k=lookup(signs_,dmsa.charAt(beg)))>=0)if(k>=0){sign*=k?1:-1;++beg}if(end===beg){errormsg="Empty or incomplete DMS string "+dmsa;break}ipieces=[0,0,0];fpieces=[0,0,0];npiece=0;icurrent=0;fcurrent=0;ncurrent=0;p=beg;pointseen=false;digcount=0;intcount=0;while(p<end){x=dmsa.charAt(p++);if((k=lookup(digits_,x))>=0){++ncurrent;if(digcount>0)++digcount;else{icurrent=10*
icurrent+k;++intcount}}else if(x==="."){if(pointseen){errormsg="Multiple decimal points in "+dmsa.substr(beg,end-beg);break}pointseen=true;digcount=1}else if((k=lookup(dmsindicators_,x))>=0){if(k>=3){if(p===end){errormsg="Illegal for colon to appear at the end of "+dmsa.substr(beg,end-beg);break}k=npiece}if(k===npiece-1){errormsg="Repeated "+components_[k]+" component in "+dmsa.substr(beg,end-beg);break}else if(k<npiece){errormsg=components_[k]+" component follows "+components_[npiece-1]+" component in "+
dmsa.substr(beg,end-beg);break}if(ncurrent===0){errormsg="Missing numbers in "+components_[k]+" component of "+dmsa.substr(beg,end-beg);break}if(digcount>0){fcurrent=parseFloat(dmsa.substr(p-intcount-digcount-1,intcount+digcount));icurrent=0}ipieces[k]=icurrent;fpieces[k]=icurrent+fcurrent;if(p<end){npiece=k+1;icurrent=fcurrent=0;ncurrent=digcount=intcount=0}}else if(lookup(signs_,x)>=0){errormsg="Internal sign in DMS string "+dmsa.substr(beg,end-beg);break}else{errormsg="Illegal character "+x+" in DMS string "+
dmsa.substr(beg,end-beg);break}}if(errormsg.length)break;if(lookup(dmsindicators_,dmsa.charAt(p-1))<0){if(npiece>=3){errormsg="Extra text following seconds in DMS string "+dmsa.substr(beg,end-beg);break}if(ncurrent===0){errormsg="Missing numbers in trailing component of "+dmsa.substr(beg,end-beg);break}if(digcount>0){fcurrent=parseFloat(dmsa.substr(p-intcount-digcount,intcount+digcount));icurrent=0}ipieces[npiece]=icurrent;fpieces[npiece]=icurrent+fcurrent}if(pointseen&&digcount===0){errormsg="Decimal point in non-terminal component of "+
dmsa.substr(beg,end-beg);break}if(ipieces[1]>=60||fpieces[1]>60){errormsg="Minutes "+fpieces[1]+" not in range [0,60)";break}if(ipieces[2]>=60||fpieces[2]>60){errormsg="Seconds "+fpieces[2]+" not in range [0,60)";break}vals.ind=ind1;vals.val=sign*(fpieces[2]?(60*(60*fpieces[0]+fpieces[1])+fpieces[2])/3600:fpieces[1]?(60*fpieces[0]+fpieces[1])/60:fpieces[0]);return vals}while(false);vals.val=NumMatch(dmsa);if(vals.val===0)throw new Error(errormsg);else vals.ind=d.NONE;return vals};NumMatch=function(s){var t,
sign,p0,p1;if(s.length<3)return 0;t=s.toUpperCase().replace(/0+$/,"");sign=t.charAt(0)==="-"?-1:1;p0=t.charAt(0)==="-"||t.charAt(0)==="+"?1:0;p1=t.length-1;if(p1+1<p0+3)return 0;t=t.substr(p0,p1+1-p0);if(t==="NAN"||t==="1.#QNAN"||t==="1.#SNAN"||t==="1.#IND"||t==="1.#R")return Number.NaN;else if(t==="INF"||t==="1.#INF")return sign*Number.POSITIVE_INFINITY;return 0};d.DecodeLatLon=function(stra,strb,longfirst){var vals={},valsa=d.Decode(stra),valsb=d.Decode(strb),a=valsa.val,ia=valsa.ind,b=valsb.val,
ib=valsb.ind,lat,lon;if(!longfirst)longfirst=false;if(ia===d.NONE&&ib===d.NONE){ia=longfirst?d.LONGITUDE:d.LATITUDE;ib=longfirst?d.LATITUDE:d.LONGITUDE}else if(ia===d.NONE)ia=d.LATITUDE+d.LONGITUDE-ib;else if(ib===d.NONE)ib=d.LATITUDE+d.LONGITUDE-ia;if(ia===ib)throw new Error("Both "+stra+" and "+strb+" interpreted as "+(ia===d.LATITUDE?"latitudes":"longitudes"));lat=ia===d.LATITUDE?a:b;lon=ia===d.LATITUDE?b:a;if(Math.abs(lat)>90)throw new Error("Latitude "+lat+" not in [-90,90]");vals.lat=lat;vals.lon=
lon;return vals};d.DecodeAngle=function(angstr){var vals=d.Decode(angstr),ang=vals.val,ind=vals.ind;if(ind!==d.NONE)throw new Error("Arc angle "+angstr+" includes a hemisphere N/E/W/S");return ang};d.DecodeAzimuth=function(azistr){var vals=d.Decode(azistr),azi=vals.val,ind=vals.ind;if(ind===d.LATITUDE)throw new Error("Azimuth "+azistr+" has a latitude hemisphere N/S");return azi};d.Encode=function(angle,trailing,prec,ind){var scale=1,i,sign,idegree,fdegree,f,pieces,ip,fp,s;if(!ind)ind=d.NONE;if(!isFinite(angle))return angle<
0?String("-inf"):angle>0?String("inf"):String("nan");prec=Math.min(15-2*trailing,prec);for(i=0;i<trailing;++i)scale*=60;for(i=0;i<prec;++i)scale*=10;if(ind===d.AZIMUTH)angle-=Math.floor(angle/360)*360;sign=angle<0?-1:1;angle*=sign;idegree=Math.floor(angle);fdegree=(angle-idegree)*scale+.5;f=Math.floor(fdegree);fdegree=f==fdegree&&f&1?f-1:f;fdegree/=scale;fdegree=Math.floor((angle-idegree)*scale+.5)/scale;if(fdegree>=1){idegree+=1;fdegree-=1}pieces=[fdegree,0,0];for(i=1;i<=trailing;++i){ip=Math.floor(pieces[i-
1]);fp=pieces[i-1]-ip;pieces[i]=fp*60;pieces[i-1]=ip}pieces[0]+=idegree;s="";if(ind===d.NONE&&sign<0)s+="-";switch(trailing){case d.DEGREE:s+=zerofill(pieces[0].toFixed(prec),ind===d.NONE?0:1+Math.min(ind,2)+prec+(prec?1:0))+dmsindicatorsu_.charAt(0);break;default:s+=zerofill(pieces[0].toFixed(0),ind===d.NONE?0:1+Math.min(ind,2))+dmsindicatorsu_.charAt(0);switch(trailing){case d.MINUTE:s+=zerofill(pieces[1].toFixed(prec),2+prec+(prec?1:0))+dmsindicatorsu_.charAt(1);break;case d.SECOND:s+=zerofill(pieces[1].toFixed(0),
2)+dmsindicatorsu_.charAt(1);s+=zerofill(pieces[2].toFixed(prec),2+prec+(prec?1:0))+dmsindicatorsu_.charAt(2);break;default:break}}if(ind!==d.NONE&&ind!==d.AZIMUTH)s+=hemispheres_.charAt((ind===d.LATITUDE?0:2)+(sign<0?0:1));return s}})(GeographicLib.DMS);GeographicLib.Geodesic={};GeographicLib.GeodesicLine={};GeographicLib.PolygonArea={};
(function(g,l,p,m,c){var GEOGRAPHICLIB_GEODESIC_ORDER=6,nA1_=GEOGRAPHICLIB_GEODESIC_ORDER,nA2_=GEOGRAPHICLIB_GEODESIC_ORDER,nA3_=GEOGRAPHICLIB_GEODESIC_ORDER,nA3x_=nA3_,nC3x_,nC4x_,maxit1_=20,maxit2_=maxit1_+m.digits+10,tol0_=m.epsilon,tol1_=200*tol0_,tol2_=Math.sqrt(tol0_),tolb_=tol0_*tol1_,xthresh_=1E3*tol2_,CAP_NONE=0,CAP_ALL=31,CAP_MASK=CAP_ALL,OUT_ALL=32640,Astroid,A1m1f_coeff,C1f_coeff,C1pf_coeff,A2m1f_coeff,C2f_coeff,A3_coeff,C3_coeff,C4_coeff;g.tiny_=Math.sqrt(Number.MIN_VALUE);g.nC1_=GEOGRAPHICLIB_GEODESIC_ORDER;
g.nC1p_=GEOGRAPHICLIB_GEODESIC_ORDER;g.nC2_=GEOGRAPHICLIB_GEODESIC_ORDER;g.nC3_=GEOGRAPHICLIB_GEODESIC_ORDER;g.nC4_=GEOGRAPHICLIB_GEODESIC_ORDER;nC3x_=g.nC3_*(g.nC3_-1)/2;nC4x_=g.nC4_*(g.nC4_+1)/2,g.CAP_C1=1<<0;g.CAP_C1p=1<<1;g.CAP_C2=1<<2;g.CAP_C3=1<<3;g.CAP_C4=1<<4;g.NONE=0;g.LATITUDE=1<<7|CAP_NONE;g.LONGITUDE=1<<8|g.CAP_C3;g.AZIMUTH=1<<9|CAP_NONE;g.DISTANCE=1<<10|g.CAP_C1;g.STANDARD=g.LATITUDE|g.LONGITUDE|g.AZIMUTH|g.DISTANCE;g.DISTANCE_IN=1<<11|g.CAP_C1|g.CAP_C1p;g.REDUCEDLENGTH=1<<12|g.CAP_C1|
g.CAP_C2;g.GEODESICSCALE=1<<13|g.CAP_C1|g.CAP_C2;g.AREA=1<<14|g.CAP_C4;g.ALL=OUT_ALL|CAP_ALL;g.LONG_UNROLL=1<<15;g.OUT_MASK=OUT_ALL|g.LONG_UNROLL;g.SinCosSeries=function(sinp,sinx,cosx,c){var k=c.length,n=k-(sinp?1:0),ar=2*(cosx-sinx)*(cosx+sinx),y0=n&1?c[--k]:0,y1=0;n=Math.floor(n/2);while(n--){y1=ar*y0-y1+c[--k];y0=ar*y1-y0+c[--k]}return sinp?2*sinx*cosx*y0:cosx*(y0-y1)};Astroid=function(x,y){var k,p=m.sq(x),q=m.sq(y),r=(p+q-1)/6,S,r2,r3,disc,u,T3,T,ang,v,uv,w;if(!(q===0&&r<=0)){S=p*q/4;r2=m.sq(r);
r3=r*r2;disc=S*(S+2*r3);u=r;if(disc>=0){T3=S+r3;T3+=T3<0?-Math.sqrt(disc):Math.sqrt(disc);T=m.cbrt(T3);u+=T+(T!==0?r2/T:0)}else{ang=Math.atan2(Math.sqrt(-disc),-(S+r3));u+=2*r*Math.cos(ang/3)}v=Math.sqrt(m.sq(u)+q);uv=u<0?q/(v-u):u+v;w=(uv-q)/(2*v);k=uv/(Math.sqrt(uv+m.sq(w))+w)}else k=0;return k};A1m1f_coeff=[+1,4,64,0,256];g.A1m1f=function(eps){var p=Math.floor(nA1_/2),t=m.polyval(p,A1m1f_coeff,0,m.sq(eps))/A1m1f_coeff[p+1];return(t+eps)/(1-eps)};C1f_coeff=[-1,6,-16,32,-9,64,-128,2048,+9,-16,768,
+3,-5,512,-7,1280,-7,2048];g.C1f=function(eps,c){var eps2=m.sq(eps),d=eps,o=0,l,p;for(l=1;l<=g.nC1_;++l){p=Math.floor((g.nC1_-l)/2);c[l]=d*m.polyval(p,C1f_coeff,o,eps2)/C1f_coeff[o+p+1];o+=p+2;d*=eps}};C1pf_coeff=[+205,-432,768,1536,+4005,-4736,3840,12288,-225,116,384,-7173,2695,7680,+3467,7680,+38081,61440];g.C1pf=function(eps,c){var eps2=m.sq(eps),d=eps,o=0,l,p;for(l=1;l<=g.nC1p_;++l){p=Math.floor((g.nC1p_-l)/2);c[l]=d*m.polyval(p,C1pf_coeff,o,eps2)/C1pf_coeff[o+p+1];o+=p+2;d*=eps}};A2m1f_coeff=
[-11,-28,-192,0,256];g.A2m1f=function(eps){var p=Math.floor(nA2_/2),t=m.polyval(p,A2m1f_coeff,0,m.sq(eps))/A2m1f_coeff[p+1];return(t-eps)/(1+eps)};C2f_coeff=[+1,2,16,32,+35,64,384,2048,+15,80,768,+7,35,512,+63,1280,+77,2048];g.C2f=function(eps,c){var eps2=m.sq(eps),d=eps,o=0,l,p;for(l=1;l<=g.nC2_;++l){p=Math.floor((g.nC2_-l)/2);c[l]=d*m.polyval(p,C2f_coeff,o,eps2)/C2f_coeff[o+p+1];o+=p+2;d*=eps}};g.Geodesic=function(a,f){this.a=a;this.f=f;this._f1=1-this.f;this._e2=this.f*(2-this.f);this._ep2=this._e2/
m.sq(this._f1);this._n=this.f/(2-this.f);this._b=this.a*this._f1;this._c2=(m.sq(this.a)+m.sq(this._b)*(this._e2===0?1:(this._e2>0?m.atanh(Math.sqrt(this._e2)):Math.atan(Math.sqrt(-this._e2)))/Math.sqrt(Math.abs(this._e2))))/2;this._etol2=.1*tol2_/Math.sqrt(Math.max(.001,Math.abs(this.f))*Math.min(1,1-this.f/2)/2);if(!(isFinite(this.a)&&this.a>0))throw new Error("Major radius is not positive");if(!(isFinite(this._b)&&this._b>0))throw new Error("Minor radius is not positive");this._A3x=new Array(nA3x_);
this._C3x=new Array(nC3x_);this._C4x=new Array(nC4x_);this.A3coeff();this.C3coeff();this.C4coeff()};A3_coeff=[-3,128,-2,-3,64,-1,-3,-1,16,+3,-1,-2,8,+1,-1,2,+1,1];g.Geodesic.prototype.A3coeff=function(){var o=0,k=0,j,p;for(j=nA3_-1;j>=0;--j){p=Math.min(nA3_-j-1,j);this._A3x[k++]=m.polyval(p,A3_coeff,o,this._n)/A3_coeff[o+p+1];o+=p+2}};C3_coeff=[+3,128,+2,5,128,-1,3,3,64,-1,0,1,8,-1,1,4,+5,256,+1,3,128,-3,-2,3,64,+1,-3,2,32,+7,512,-10,9,384,+5,-9,5,192,+7,512,-14,7,512,+21,2560];g.Geodesic.prototype.C3coeff=
function(){var o=0,k=0,l,j,p;for(l=1;l<g.nC3_;++l)for(j=g.nC3_-1;j>=l;--j){p=Math.min(g.nC3_-j-1,j);this._C3x[k++]=m.polyval(p,C3_coeff,o,this._n)/C3_coeff[o+p+1];o+=p+2}};C4_coeff=[+97,15015,+1088,156,45045,-224,-4784,1573,45045,-10656,14144,-4576,-858,45045,+64,624,-4576,6864,-3003,15015,+100,208,572,3432,-12012,30030,45045,+1,9009,-2944,468,135135,+5792,1040,-1287,135135,+5952,-11648,9152,-2574,135135,-64,-624,4576,-6864,3003,135135,+8,10725,+1856,-936,225225,-8448,4992,-1144,225225,-1440,4160,
-4576,1716,225225,-136,63063,+1024,-208,105105,+3584,-3328,1144,315315,-128,135135,-2560,832,405405,+128,99099];g.Geodesic.prototype.C4coeff=function(){var o=0,k=0,l,j,p;for(l=0;l<g.nC4_;++l)for(j=g.nC4_-1;j>=l;--j){p=g.nC4_-j-1;this._C4x[k++]=m.polyval(p,C4_coeff,o,this._n)/C4_coeff[o+p+1];o+=p+2}};g.Geodesic.prototype.A3f=function(eps){return m.polyval(nA3x_-1,this._A3x,0,eps)};g.Geodesic.prototype.C3f=function(eps,c){var mult=1,o=0,l,p;for(l=1;l<g.nC3_;++l){p=g.nC3_-l-1;mult*=eps;c[l]=mult*m.polyval(p,
this._C3x,o,eps);o+=p+1}};g.Geodesic.prototype.C4f=function(eps,c){var mult=1,o=0,l,p;for(l=0;l<g.nC4_;++l){p=g.nC4_-l-1;c[l]=mult*m.polyval(p,this._C4x,o,eps);o+=p+1;mult*=eps}};g.Geodesic.prototype.Lengths=function(eps,sig12,ssig1,csig1,dn1,ssig2,csig2,dn2,cbet1,cbet2,outmask,C1a,C2a){outmask&=g.OUT_MASK;var vals={},m0x=0,J12=0,A1=0,A2=0,B1,B2,l,csig12,t;if(outmask&(g.DISTANCE|g.REDUCEDLENGTH|g.GEODESICSCALE)){A1=g.A1m1f(eps);g.C1f(eps,C1a);if(outmask&(g.REDUCEDLENGTH|g.GEODESICSCALE)){A2=g.A2m1f(eps);
g.C2f(eps,C2a);m0x=A1-A2;A2=1+A2}A1=1+A1}if(outmask&g.DISTANCE){B1=g.SinCosSeries(true,ssig2,csig2,C1a)-g.SinCosSeries(true,ssig1,csig1,C1a);vals.s12b=A1*(sig12+B1);if(outmask&(g.REDUCEDLENGTH|g.GEODESICSCALE)){B2=g.SinCosSeries(true,ssig2,csig2,C2a)-g.SinCosSeries(true,ssig1,csig1,C2a);J12=m0x*sig12+(A1*B1-A2*B2)}}else if(outmask&(g.REDUCEDLENGTH|g.GEODESICSCALE)){for(l=1;l<=g.nC2_;++l)C2a[l]=A1*C1a[l]-A2*C2a[l];J12=m0x*sig12+(g.SinCosSeries(true,ssig2,csig2,C2a)-g.SinCosSeries(true,ssig1,csig1,
C2a))}if(outmask&g.REDUCEDLENGTH){vals.m0=m0x;vals.m12b=dn2*(csig1*ssig2)-dn1*(ssig1*csig2)-csig1*csig2*J12}if(outmask&g.GEODESICSCALE){csig12=csig1*csig2+ssig1*ssig2;t=this._ep2*(cbet1-cbet2)*(cbet1+cbet2)/(dn1+dn2);vals.M12=csig12+(t*ssig2-csig2*J12)*ssig1/dn1;vals.M21=csig12-(t*ssig1-csig1*J12)*ssig2/dn2}return vals};g.Geodesic.prototype.InverseStart=function(sbet1,cbet1,dn1,sbet2,cbet2,dn2,lam12,C1a,C2a){var vals={},sbet12=sbet2*cbet1-cbet2*sbet1,cbet12=cbet2*cbet1+sbet2*sbet1,sbet12a,shortline,
omg12,sbetm2,somg12,comg12,t,ssig12,csig12,x,y,lamscale,betscale,k2,eps,cbet12a,bet12a,m12b,m0,nvals,k,omg12a;vals.sig12=-1;sbet12a=sbet2*cbet1;sbet12a+=cbet2*sbet1;shortline=cbet12>=0&&sbet12<.5&&cbet2*lam12<.5;omg12=lam12;if(shortline){sbetm2=m.sq(sbet1+sbet2);sbetm2/=sbetm2+m.sq(cbet1+cbet2);vals.dnm=Math.sqrt(1+this._ep2*sbetm2);omg12/=this._f1*vals.dnm}somg12=Math.sin(omg12);comg12=Math.cos(omg12);vals.salp1=cbet2*somg12;vals.calp1=comg12>=0?sbet12+cbet2*sbet1*m.sq(somg12)/(1+comg12):sbet12a-
cbet2*sbet1*m.sq(somg12)/(1-comg12);ssig12=m.hypot(vals.salp1,vals.calp1);csig12=sbet1*sbet2+cbet1*cbet2*comg12;if(shortline&&ssig12<this._etol2){vals.salp2=cbet1*somg12;vals.calp2=sbet12-cbet1*sbet2*(comg12>=0?m.sq(somg12)/(1+comg12):1-comg12);t=m.hypot(vals.salp2,vals.calp2);vals.salp2/=t;vals.calp2/=t;vals.sig12=Math.atan2(ssig12,csig12)}else if(Math.abs(this._n)>.1||csig12>=0||ssig12>=6*Math.abs(this._n)*Math.PI*m.sq(cbet1));else{if(this.f>=0){k2=m.sq(sbet1)*this._ep2;eps=k2/(2*(1+Math.sqrt(1+
k2))+k2);lamscale=this.f*cbet1*this.A3f(eps)*Math.PI;betscale=lamscale*cbet1;x=(lam12-Math.PI)/lamscale;y=sbet12a/betscale}else{cbet12a=cbet2*cbet1-sbet2*sbet1;bet12a=Math.atan2(sbet12a,cbet12a);nvals=this.Lengths(this._n,Math.PI+bet12a,sbet1,-cbet1,dn1,sbet2,cbet2,dn2,cbet1,cbet2,g.REDUCEDLENGTH,C1a,C2a);m12b=nvals.m12b;m0=nvals.m0;x=-1+m12b/(cbet1*cbet2*m0*Math.PI);betscale=x<-.01?sbet12a/x:-this.f*m.sq(cbet1)*Math.PI;lamscale=betscale/cbet1;y=(lam12-Math.PI)/lamscale}if(y>-tol1_&&x>-1-xthresh_)if(this.f>=
0){vals.salp1=Math.min(1,-x);vals.calp1=-Math.sqrt(1-m.sq(vals.salp1))}else{vals.calp1=Math.max(x>-tol1_?0:-1,x);vals.salp1=Math.sqrt(1-m.sq(vals.calp1))}else{k=Astroid(x,y);omg12a=lamscale*(this.f>=0?-x*k/(1+k):-y*(1+k)/k);somg12=Math.sin(omg12a);comg12=-Math.cos(omg12a);vals.salp1=cbet2*somg12;vals.calp1=sbet12a-cbet2*sbet1*m.sq(somg12)/(1-comg12)}}if(!(vals.salp1<=0)){t=m.hypot(vals.salp1,vals.calp1);vals.salp1/=t;vals.calp1/=t}else{vals.salp1=1;vals.calp1=0}return vals};g.Geodesic.prototype.Lambda12=
function(sbet1,cbet1,dn1,sbet2,cbet2,dn2,salp1,calp1,diffp,C1a,C2a,C3a){var vals={},t,salp0,calp0,somg1,comg1,somg2,comg2,omg12,B312,h0,k2,nvals;if(sbet1===0&&calp1===0)calp1=-g.tiny_;salp0=salp1*cbet1;calp0=m.hypot(calp1,salp1*sbet1);vals.ssig1=sbet1;somg1=salp0*sbet1;vals.csig1=comg1=calp1*cbet1;t=m.hypot(vals.ssig1,vals.csig1);vals.ssig1/=t;vals.csig1/=t;vals.salp2=cbet2!==cbet1?salp0/cbet2:salp1;vals.calp2=cbet2!==cbet1||Math.abs(sbet2)!==-sbet1?Math.sqrt(m.sq(calp1*cbet1)+(cbet1<-sbet1?(cbet2-
cbet1)*(cbet1+cbet2):(sbet1-sbet2)*(sbet1+sbet2)))/cbet2:Math.abs(calp1);vals.ssig2=sbet2;somg2=salp0*sbet2;vals.csig2=comg2=vals.calp2*cbet2;t=m.hypot(vals.ssig2,vals.csig2);vals.ssig2/=t;vals.csig2/=t;vals.sig12=Math.atan2(Math.max(0,vals.csig1*vals.ssig2-vals.ssig1*vals.csig2),vals.csig1*vals.csig2+vals.ssig1*vals.ssig2);omg12=Math.atan2(Math.max(0,comg1*somg2-somg1*comg2),comg1*comg2+somg1*somg2);k2=m.sq(calp0)*this._ep2;vals.eps=k2/(2*(1+Math.sqrt(1+k2))+k2);this.C3f(vals.eps,C3a);B312=g.SinCosSeries(true,
vals.ssig2,vals.csig2,C3a)-g.SinCosSeries(true,vals.ssig1,vals.csig1,C3a);h0=-this.f*this.A3f(vals.eps);vals.domg12=salp0*h0*(vals.sig12+B312);vals.lam12=omg12+vals.domg12;if(diffp)if(vals.calp2===0)vals.dlam12=-2*this._f1*dn1/sbet1;else{nvals=this.Lengths(vals.eps,vals.sig12,vals.ssig1,vals.csig1,dn1,vals.ssig2,vals.csig2,dn2,cbet1,cbet2,g.REDUCEDLENGTH,C1a,C2a);vals.dlam12=nvals.m12b;vals.dlam12*=this._f1/(vals.calp2*cbet2)}return vals};g.Geodesic.prototype.Inverse=function(lat1,lon1,lat2,lon2,
outmask){var vals={},lon12,lonsign,t,swapp,latsign,sbet1,cbet1,sbet2,cbet2,s12x,m12x,dn1,dn2,lam12,slam12,clam12,sig12,calp1,salp1,calp2,salp2,C1a,C2a,C3a,meridian,nvals,ssig1,csig1,ssig2,csig2,eps,omg12,dnm,numit,salp1a,calp1a,salp1b,calp1b,tripn,tripb,v,dv,dalp1,sdalp1,cdalp1,nsalp1,lengthmask,salp0,calp0,alp12,k2,A4,C4a,B41,B42,somg12,domg12,dbet1,dbet2,salp12,calp12;if(!outmask)outmask=g.STANDARD;if(outmask==g.LONG_UNROLL)outmask|=g.STANDARD;outmask&=g.OUT_MASK;vals.lat1=lat1=m.LatFix(lat1);vals.lat2=
lat2=m.LatFix(lat2);lon12=m.AngDiff(lon1,lon2);if(outmask&g.LONG_UNROLL){vals.lon1=lon1;vals.lon2=lon1+lon12}else{vals.lon1=m.AngNormalize(lon1);vals.lon2=m.AngNormalize(lon2)}lon12=m.AngRound(lon12);lonsign=lon12>=0?1:-1;lon12*=lonsign;lat1=m.AngRound(lat1);lat2=m.AngRound(lat2);swapp=Math.abs(lat1)<Math.abs(lat2)?-1:1;if(swapp<0){lonsign*=-1;t=lat1;lat1=lat2;lat2=t}latsign=lat1<0?1:-1;lat1*=latsign;lat2*=latsign;t=m.sincosd(lat1);sbet1=this._f1*t.s;cbet1=t.c;t=m.hypot(sbet1,cbet1);sbet1/=t;cbet1/=
t;cbet1=Math.max(g.tiny_,cbet1);t=m.sincosd(lat2);sbet2=this._f1*t.s;cbet2=t.c;t=m.hypot(sbet2,cbet2);sbet2/=t;cbet2/=t;cbet2=Math.max(g.tiny_,cbet2);if(cbet1<-sbet1){if(cbet2===cbet1)sbet2=sbet2<0?sbet1:-sbet1}else if(Math.abs(sbet2)===-sbet1)cbet2=cbet1;dn1=Math.sqrt(1+this._ep2*m.sq(sbet1));dn2=Math.sqrt(1+this._ep2*m.sq(sbet2));lam12=lon12*m.degree;t=m.sincosd(lon12);slam12=t.s;clam12=t.c;C1a=new Array(g.nC1_+1);C2a=new Array(g.nC2_+1);C3a=new Array(g.nC3_);meridian=lat1===-90||slam12===0;if(meridian){calp1=
clam12;salp1=slam12;calp2=1;salp2=0;ssig1=sbet1;csig1=calp1*cbet1;ssig2=sbet2;csig2=calp2*cbet2;sig12=Math.atan2(Math.max(0,csig1*ssig2-ssig1*csig2),csig1*csig2+ssig1*ssig2);nvals=this.Lengths(this._n,sig12,ssig1,csig1,dn1,ssig2,csig2,dn2,cbet1,cbet2,outmask|g.DISTANCE|g.REDUCEDLENGTH,C1a,C2a);s12x=nvals.s12b;m12x=nvals.m12b;if((outmask&g.GEODESICSCALE)!==0){vals.M12=nvals.M12;vals.M21=nvals.M21}if(sig12<1||m12x>=0){if(sig12<3*g.tiny_)sig12=m12x=s12x=0;m12x*=this._b;s12x*=this._b;vals.a12=sig12/m.degree}else meridian=
false}if(!meridian&&sbet1===0&&(this.f<=0||lam12<=Math.PI-this.f*Math.PI)){calp1=calp2=0;salp1=salp2=1;s12x=this.a*lam12;sig12=omg12=lam12/this._f1;m12x=this._b*Math.sin(sig12);if(outmask&g.GEODESICSCALE)vals.M12=vals.M21=Math.cos(sig12);vals.a12=lon12/this._f1}else if(!meridian){nvals=this.InverseStart(sbet1,cbet1,dn1,sbet2,cbet2,dn2,lam12,C1a,C2a);sig12=nvals.sig12;salp1=nvals.salp1;calp1=nvals.calp1;if(sig12>=0){salp2=nvals.salp2;calp2=nvals.calp2;dnm=nvals.dnm;s12x=sig12*this._b*dnm;m12x=m.sq(dnm)*
this._b*Math.sin(sig12/dnm);if(outmask&g.GEODESICSCALE)vals.M12=vals.M21=Math.cos(sig12/dnm);vals.a12=sig12/m.degree;omg12=lam12/(this._f1*dnm)}else{numit=0;salp1a=g.tiny_;calp1a=1;salp1b=g.tiny_;calp1b=-1;for(tripn=false,tripb=false;numit<maxit2_;++numit){nvals=this.Lambda12(sbet1,cbet1,dn1,sbet2,cbet2,dn2,salp1,calp1,numit<maxit1_,C1a,C2a,C3a);v=nvals.lam12-lam12;salp2=nvals.salp2;calp2=nvals.calp2;sig12=nvals.sig12;ssig1=nvals.ssig1;csig1=nvals.csig1;ssig2=nvals.ssig2;csig2=nvals.csig2;eps=nvals.eps;
omg12=nvals.domg12;dv=nvals.dlam12;if(tripb||!(Math.abs(v)>=(tripn?8:2)*tol0_))break;if(v>0&&(numit<maxit1_||calp1/salp1>calp1b/salp1b)){salp1b=salp1;calp1b=calp1}else if(v<0&&(numit<maxit1_||calp1/salp1<calp1a/salp1a)){salp1a=salp1;calp1a=calp1}if(numit<maxit1_&&dv>0){dalp1=-v/dv;sdalp1=Math.sin(dalp1);cdalp1=Math.cos(dalp1);nsalp1=salp1*cdalp1+calp1*sdalp1;if(nsalp1>0&&Math.abs(dalp1)<Math.PI){calp1=calp1*cdalp1-salp1*sdalp1;salp1=nsalp1;t=m.hypot(salp1,calp1);salp1/=t;calp1/=t;tripn=Math.abs(v)<=
16*tol0_;continue}}salp1=(salp1a+salp1b)/2;calp1=(calp1a+calp1b)/2;t=m.hypot(salp1,calp1);salp1/=t;calp1/=t;tripn=false;tripb=Math.abs(salp1a-salp1)+(calp1a-calp1)<tolb_||Math.abs(salp1-salp1b)+(calp1-calp1b)<tolb_}lengthmask=outmask|(outmask&(g.REDUCEDLENGTH|g.GEODESICSCALE)?g.DISTANCE:g.NONE);nvals=this.Lengths(eps,sig12,ssig1,csig1,dn1,ssig2,csig2,dn2,cbet1,cbet2,lengthmask,C1a,C2a);s12x=nvals.s12b;m12x=nvals.m12b;if((outmask&g.GEODESICSCALE)!==0){vals.M12=nvals.M12;vals.M21=nvals.M21}m12x*=this._b;
s12x*=this._b;vals.a12=sig12/m.degree;omg12=lam12-omg12}}if(outmask&g.DISTANCE)vals.s12=0+s12x;if(outmask&g.REDUCEDLENGTH)vals.m12=0+m12x;if(outmask&g.AREA){salp0=salp1*cbet1;calp0=m.hypot(calp1,salp1*sbet1);if(calp0!==0&&salp0!==0){ssig1=sbet1;csig1=calp1*cbet1;ssig2=sbet2;csig2=calp2*cbet2;k2=m.sq(calp0)*this._ep2;eps=k2/(2*(1+Math.sqrt(1+k2))+k2);A4=m.sq(this.a)*calp0*salp0*this._e2;t=m.hypot(ssig1,csig1);ssig1/=t;csig1/=t;t=m.hypot(ssig2,csig2);ssig2/=t;csig2/=t;C4a=new Array(g.nC4_);this.C4f(eps,
C4a);B41=g.SinCosSeries(false,ssig1,csig1,C4a);B42=g.SinCosSeries(false,ssig2,csig2,C4a);vals.S12=A4*(B42-B41)}else vals.S12=0;if(!meridian&&omg12<.75*Math.PI&&sbet2-sbet1<1.75){somg12=Math.sin(omg12);domg12=1+Math.cos(omg12);dbet1=1+cbet1;dbet2=1+cbet2;alp12=2*Math.atan2(somg12*(sbet1*dbet2+sbet2*dbet1),domg12*(sbet1*sbet2+dbet1*dbet2))}else{salp12=salp2*calp1-calp2*salp1;calp12=calp2*calp1+salp2*salp1;if(salp12===0&&calp12<0){salp12=g.tiny_*calp1;calp12=-1}alp12=Math.atan2(salp12,calp12)}vals.S12+=
this._c2*alp12;vals.S12*=swapp*lonsign*latsign;vals.S12+=0}if(swapp<0){t=salp1;salp1=salp2;salp2=t;t=calp1;calp1=calp2;calp2=t;if(outmask&g.GEODESICSCALE){t=vals.M12;vals.M12=vals.M21;vals.M21=t}}salp1*=swapp*lonsign;calp1*=swapp*latsign;salp2*=swapp*lonsign;calp2*=swapp*latsign;if(outmask&g.AZIMUTH){vals.azi1=m.atan2d(salp1,calp1);vals.azi2=m.atan2d(salp2,calp2)}return vals};g.Geodesic.prototype.GenDirect=function(lat1,lon1,azi1,arcmode,s12_a12,outmask){var line;if(!outmask)outmask=g.STANDARD;else if(outmask==
g.LONG_UNROLL)outmask|=g.STANDARD;line=new l.GeodesicLine(this,lat1,lon1,azi1,outmask|(arcmode?g.NONE:g.DISTANCE_IN));return line.GenPosition(arcmode,s12_a12,outmask)};g.Geodesic.prototype.Direct=function(lat1,lon1,azi1,s12,outmask){return this.GenDirect(lat1,lon1,azi1,false,s12,outmask)};g.Geodesic.prototype.ArcDirect=function(lat1,lon1,azi1,a12,outmask){return this.GenDirect(lat1,lon1,azi1,true,a12,outmask)};g.Geodesic.prototype.Line=function(lat1,lon1,azi1,caps){return new l.GeodesicLine(this,
lat1,lon1,azi1,caps)};g.Geodesic.prototype.Polygon=function(polyline){return new p.PolygonArea(this,polyline)};g.WGS84=new g.Geodesic(c.WGS84.a,c.WGS84.f)})(GeographicLib.Geodesic,GeographicLib.GeodesicLine,GeographicLib.PolygonArea,GeographicLib.Math,GeographicLib.Constants);
(function(g,l,m){l.GeodesicLine=function(geod,lat1,lon1,azi1,caps){var t,cbet1,sbet1,eps,s,c;if(!caps)caps=g.STANDARD|g.DISTANCE_IN;this.a=geod.a;this.f=geod.f;this._b=geod._b;this._c2=geod._c2;this._f1=geod._f1;this._caps=(!caps?g.ALL:caps|g.LATITUDE|g.AZIMUTH)|g.LONG_UNROLL;this.lat1=m.LatFix(lat1);this.lon1=lon1;this.azi1=m.AngNormalize(azi1);t=m.sincosd(m.AngRound(this.azi1));this._salp1=t.s;this._calp1=t.c;t=m.sincosd(m.AngRound(this.lat1));sbet1=this._f1*t.s;cbet1=t.c;t=m.hypot(sbet1,cbet1);
sbet1/=t;cbet1/=t;cbet1=Math.max(g.tiny_,cbet1);this._dn1=Math.sqrt(1+geod._ep2*m.sq(sbet1));this._salp0=this._salp1*cbet1;this._calp0=m.hypot(this._calp1,this._salp1*sbet1);this._ssig1=sbet1;this._somg1=this._salp0*sbet1;this._csig1=this._comg1=sbet1!==0||this._calp1!==0?cbet1*this._calp1:1;t=m.hypot(this._ssig1,this._csig1);this._ssig1/=t;this._csig1/=t;this._k2=m.sq(this._calp0)*geod._ep2;eps=this._k2/(2*(1+Math.sqrt(1+this._k2))+this._k2);if(this._caps&g.CAP_C1){this._A1m1=g.A1m1f(eps);this._C1a=
new Array(g.nC1_+1);g.C1f(eps,this._C1a);this._B11=g.SinCosSeries(true,this._ssig1,this._csig1,this._C1a);s=Math.sin(this._B11);c=Math.cos(this._B11);this._stau1=this._ssig1*c+this._csig1*s;this._ctau1=this._csig1*c-this._ssig1*s}if(this._caps&g.CAP_C1p){this._C1pa=new Array(g.nC1p_+1);g.C1pf(eps,this._C1pa)}if(this._caps&g.CAP_C2){this._A2m1=g.A2m1f(eps);this._C2a=new Array(g.nC2_+1);g.C2f(eps,this._C2a);this._B21=g.SinCosSeries(true,this._ssig1,this._csig1,this._C2a)}if(this._caps&g.CAP_C3){this._C3a=
new Array(g.nC3_);geod.C3f(eps,this._C3a);this._A3c=-this.f*this._salp0*geod.A3f(eps);this._B31=g.SinCosSeries(true,this._ssig1,this._csig1,this._C3a)}if(this._caps&g.CAP_C4){this._C4a=new Array(g.nC4_);geod.C4f(eps,this._C4a);this._A4=m.sq(this.a)*this._calp0*this._salp0*geod._e2;this._B41=g.SinCosSeries(false,this._ssig1,this._csig1,this._C4a)}};l.GeodesicLine.prototype.GenPosition=function(arcmode,s12_a12,outmask){var vals={},sig12,ssig12,csig12,B12,AB1,ssig2,csig2,tau12,s,c,serr,omg12,lam12,lon12,
E,sbet2,cbet2,somg2,comg2,salp2,calp2,dn2,B22,AB2,J12,t,B42,salp12,calp12;if(!outmask)outmask=g.STANDARD;else if(outmask==g.LONG_UNROLL)outmask|=g.STANDARD;outmask&=this._caps&g.OUT_MASK;vals.lat1=this.lat1;vals.azi1=this.azi1;vals.lon1=outmask&g.LONG_UNROLL?this.lon1:m.AngNormalize(this.lon1);if(arcmode)vals.a12=s12_a12;else vals.s12=s12_a12;if(!(arcmode||this._caps&g.DISTANCE_IN&g.OUT_MASK)){vals.a12=Number.NaN;return vals}B12=0;AB1=0;if(arcmode){sig12=s12_a12*m.degree;t=m.sincosd(s12_a12);ssig12=
t.s;csig12=t.c}else{tau12=s12_a12/(this._b*(1+this._A1m1));s=Math.sin(tau12);c=Math.cos(tau12);B12=-g.SinCosSeries(true,this._stau1*c+this._ctau1*s,this._ctau1*c-this._stau1*s,this._C1pa);sig12=tau12-(B12-this._B11);ssig12=Math.sin(sig12);csig12=Math.cos(sig12);if(Math.abs(this.f)>.01){ssig2=this._ssig1*csig12+this._csig1*ssig12;csig2=this._csig1*csig12-this._ssig1*ssig12;B12=g.SinCosSeries(true,ssig2,csig2,this._C1a);serr=(1+this._A1m1)*(sig12+(B12-this._B11))-s12_a12/this._b;sig12=sig12-serr/Math.sqrt(1+
this._k2*m.sq(ssig2));ssig12=Math.sin(sig12);csig12=Math.cos(sig12)}}ssig2=this._ssig1*csig12+this._csig1*ssig12;csig2=this._csig1*csig12-this._ssig1*ssig12;dn2=Math.sqrt(1+this._k2*m.sq(ssig2));if(outmask&(g.DISTANCE|g.REDUCEDLENGTH|g.GEODESICSCALE)){if(arcmode||Math.abs(this.f)>.01)B12=g.SinCosSeries(true,ssig2,csig2,this._C1a);AB1=(1+this._A1m1)*(B12-this._B11)}sbet2=this._calp0*ssig2;cbet2=m.hypot(this._salp0,this._calp0*csig2);if(cbet2===0)cbet2=csig2=g.tiny_;salp2=this._salp0;calp2=this._calp0*
csig2;if(arcmode&&outmask&g.DISTANCE)vals.s12=this._b*((1+this._A1m1)*sig12+AB1);if(outmask&g.LONGITUDE){somg2=this._salp0*ssig2;comg2=csig2;E=this._salp0<0?-1:1;omg12=outmask&g.LONG_UNROLL?E*(sig12-(Math.atan2(ssig2,csig2)-Math.atan2(this._ssig1,this._csig1))+(Math.atan2(E*somg2,comg2)-Math.atan2(E*this._somg1,this._comg1))):Math.atan2(somg2*this._comg1-comg2*this._somg1,comg2*this._comg1+somg2*this._somg1);lam12=omg12+this._A3c*(sig12+(g.SinCosSeries(true,ssig2,csig2,this._C3a)-this._B31));lon12=
lam12/m.degree;vals.lon2=outmask&g.LONG_UNROLL?this.lon1+lon12:m.AngNormalize(m.AngNormalize(this.lon1)+m.AngNormalize(lon12))}if(outmask&g.LATITUDE)vals.lat2=m.atan2d(sbet2,this._f1*cbet2);if(outmask&g.AZIMUTH)vals.azi2=m.atan2d(salp2,calp2);if(outmask&(g.REDUCEDLENGTH|g.GEODESICSCALE)){B22=g.SinCosSeries(true,ssig2,csig2,this._C2a);AB2=(1+this._A2m1)*(B22-this._B21);J12=(this._A1m1-this._A2m1)*sig12+(AB1-AB2);if(outmask&g.REDUCEDLENGTH)vals.m12=this._b*(dn2*(this._csig1*ssig2)-this._dn1*(this._ssig1*
csig2)-this._csig1*csig2*J12);if(outmask&g.GEODESICSCALE){t=this._k2*(ssig2-this._ssig1)*(ssig2+this._ssig1)/(this._dn1+dn2);vals.M12=csig12+(t*ssig2-csig2*J12)*this._ssig1/this._dn1;vals.M21=csig12-(t*this._ssig1-this._csig1*J12)*ssig2/dn2}}if(outmask&g.AREA){B42=g.SinCosSeries(false,ssig2,csig2,this._C4a);if(this._calp0===0||this._salp0===0){salp12=salp2*this._calp1-calp2*this._salp1;calp12=calp2*this._calp1+salp2*this._salp1;if(salp12===0&&calp12<0){salp12=g.tiny_*this._calp1;calp12=-1}}else{salp12=
this._calp0*this._salp0*(csig12<=0?this._csig1*(1-csig12)+ssig12*this._ssig1:ssig12*(this._csig1*ssig12/(1+csig12)+this._ssig1));calp12=m.sq(this._salp0)+m.sq(this._calp0)*this._csig1*csig2}vals.S12=this._c2*Math.atan2(salp12,calp12)+this._A4*(B42-this._B41)}if(!arcmode)vals.a12=sig12/m.degree;return vals};l.GeodesicLine.prototype.Position=function(s12,outmask){return this.GenPosition(false,s12,outmask)};l.GeodesicLine.prototype.ArcPosition=function(a12,outmask){return this.GenPosition(true,a12,outmask)}})(GeographicLib.Geodesic,
GeographicLib.GeodesicLine,GeographicLib.Math);
(function(p,g,m,a){var transit,transitdirect;transit=function(lon1,lon2){var lon12,cross;lon1=m.AngNormalize(lon1);lon2=m.AngNormalize(lon2);lon12=m.AngDiff(lon1,lon2);cross=lon1<0&&lon2>=0&&lon12>0?1:lon2<0&&lon1>=0&&lon12<0?-1:0;return cross};transitdirect=function(lon1,lon2){lon1=lon1%720;lon2=lon2%720;return(lon2>=0&&lon2<360||lon2<-360?0:1)-(lon1>=0&&lon1<360||lon1<-360?0:1)};p.PolygonArea=function(geod,polyline){this._geod=geod;this.a=this._geod.a;this.f=this._geod.f;this._area0=4*Math.PI*geod._c2;
this.polyline=!polyline?false:polyline;this._mask=g.LATITUDE|g.LONGITUDE|g.DISTANCE|(this.polyline?g.NONE:g.AREA|g.LONG_UNROLL);if(!this.polyline)this._areasum=new a.Accumulator(0);this._perimetersum=new a.Accumulator(0);this.Clear()};p.PolygonArea.prototype.Clear=function(){this.num=0;this._crossings=0;if(!this.polyline)this._areasum.Set(0);this._perimetersum.Set(0);this._lat0=this._lon0=this.lat=this.lon=Number.NaN};p.PolygonArea.prototype.AddPoint=function(lat,lon){var t;if(this.num===0){this._lat0=
this.lat=lat;this._lon0=this.lon=lon}else{t=this._geod.Inverse(this.lat,this.lon,lat,lon,this._mask);this._perimetersum.Add(t.s12);if(!this.polyline){this._areasum.Add(t.S12);this._crossings+=transit(this.lon,lon)}this.lat=lat;this.lon=lon}++this.num};p.PolygonArea.prototype.AddEdge=function(azi,s){var t;if(this.num){t=this._geod.Direct(this.lat,this.lon,azi,s,this._mask);this._perimetersum.Add(s);if(!this.polyline){this._areasum.Add(t.S12);this._crossings+=transitdirect(this.lon,t.lon2)}this.lat=
t.lat2;this.lon=t.lon2}++this.num};p.PolygonArea.prototype.Compute=function(reverse,sign){var vals={number:this.num},t,tempsum,crossings;if(this.num<2){vals.perimeter=0;if(!this.polyline)vals.area=0;return vals}if(this.polyline){vals.perimeter=this._perimetersum.Sum();return vals}t=this._geod.Inverse(this.lat,this.lon,this._lat0,this._lon0,this._mask);vals.perimeter=this._perimetersum.Sum(t.s12);tempsum=new a.Accumulator(this._areasum);tempsum.Add(t.S12);crossings=this._crossings+transit(this.lon,
this._lon0);if(crossings&1)tempsum.Add((tempsum.Sum()<0?1:-1)*this._area0/2);if(!reverse)tempsum.Negate();if(sign)if(tempsum.Sum()>this._area0/2)tempsum.Add(-this._area0);else{if(tempsum.Sum()<=-this._area0/2)tempsum.Add(+this._area0)}else if(tempsum.Sum()>=this._area0)tempsum.Add(-this._area0);else if(tempsum<0)tempsum.Add(-this._area0);vals.area=tempsum.Sum();return vals};p.PolygonArea.prototype.TestPoint=function(lat,lon,reverse,sign){var vals={number:this.num+1},t,tempsum,crossings,i;if(this.num===
0){vals.perimeter=0;if(!this.polyline)vals.area=0;return vals}vals.perimeter=this._perimetersum.Sum();tempsum=this.polyline?0:this._areasum.Sum();crossings=this._crossings;for(i=0;i<(this.polyline?1:2);++i){t=this._geod.Inverse(i===0?this.lat:lat,i===0?this.lon:lon,i!==0?this._lat0:lat,i!==0?this._lon0:lon,this._mask);vals.perimeter+=t.s12;if(!this.polyline){tempsum+=t.S12;crossings+=transit(i===0?this.lon:lon,i!==0?this._lon0:lon)}}if(this.polyline)return vals;if(crossings&1)tempsum+=(tempsum<0?
1:-1)*this._area0/2;if(!reverse)tempsum*=-1;if(sign)if(tempsum>this._area0/2)tempsum-=this._area0;else{if(tempsum<=-this._area0/2)tempsum+=this._area0}else if(tempsum>=this._area0)tempsum-=this._area0;else if(tempsum<0)tempsum+=this._area0;vals.area=tempsum;return vals};p.PolygonArea.prototype.TestEdge=function(azi,s,reverse,sign){var vals={number:this.num?this.num+1:0},t,tempsump,crossings;if(this.num===0)return vals;vals.perimeter=this._perimetersum.Sum()+s;if(this.polyline)return vals;tempsum=
this._areasum.Sum();crossings=this._crossings;t=this._geod.Direct(this.lat,this.lon,azi,s,this._mask);tempsum+=t.S12;crossings+=transitdirect(this.lon,t.lon2);t=this._geod(t.lat2,t.lon2,this._lat0,this._lon0,this._mask);perimeter+=t.s12;tempsum+=t.S12;crossings+=transit(t.lon2,this._lon0);if(crossings&1)tempsum+=(tempsum<0?1:-1)*this._area0/2;if(!reverse)tempsum*=-1;if(sign)if(tempsum>this._area0/2)tempsum-=this._area0;else{if(tempsum<=-this._area0/2)tempsum+=this._area0}else if(tempsum>=this._area0)tempsum-=
this._area0;else if(tempsum<0)tempsum+=this._area0;vals.area=tempsum;return vals}})(GeographicLib.PolygonArea,GeographicLib.Geodesic,GeographicLib.Math,GeographicLib.Accumulator);window["GeographicLib"]=GeographicLib;window["GeographicLib"]["Geodesic"]=GeographicLib.Geodesic;window["GeographicLib"]["Geodesic"]["Geodesic"]=GeographicLib.Geodesic.Geodesic;var m,da="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},fa="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global?global:this;
function ka(a,b){if(b){for(var c=fa,d=a.split("."),e=0;e<d.length-1;e++){var f=d[e];f in c||(c[f]={});c=c[f]}d=d[d.length-1];e=c[d];f=b(e);f!=e&&null!=f&&da(c,d,{configurable:!0,writable:!0,value:f})}}ka("Array.prototype.find",function(a){return a?a:function(a,c){var b;a:{b=this;b instanceof String&&(b=String(b));for(var e=b.length,f=0;f<e;f++){var g=b[f];if(a.call(c,g,f,b)){b=g;break a}}b=void 0}return b}});ka("Number.isNaN",function(a){return a?a:function(a){return"number"===typeof a&&isNaN(a)}});
var r={};window.M=r;window.Melown=r;window.ga=null!=window.ga?window.ga:{};window.MelownMap_=null!=window.MelownMap_?window.MelownMap_:null;window.Q=null!=window.Q?window.Q:{};window.$=null!=window.$?window.$:{};r.Ag=Array;r.ev={};r.ev.create=function(a){var b=new r.Ag(2);a&&(b[0]=a[0],b[1]=a[1]);return b};r.jg={};r.jg.create=function(a){var b=new r.Ag(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};r.jg.lf=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};r.jg.Jk=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]};r.jg.ao=function(a,b,c,d,e,f){return a[0]*(b[c]-d)+a[1]*(b[c+1]-e)+a[2]*(b[c+2]-f)+a[3]};r.D={};
r.D.create=function(a){var b=new r.Ag(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b};r.D.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};r.D.add=function(a,b,c){if(!c||a==c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c};r.D.Yv=function(a,b,c){if(!c||a==c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c};r.D.Mv=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};
r.D.scale=function(a,b,c){if(!c||a==c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c};r.D.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(1==f)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b};
r.D.hp=function(a,b,c){var d=a[b],e=a[b+1];a=a[b+2];if(b=Math.sqrt(d*d+e*e+a*a)){if(1==b)return c[0]=d,c[1]=e,c[2]=a,c}else return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b};r.D.Xs=function(a,b,c,d){var e=a[b],f=a[b+1];a=a[b+2];if(b=Math.sqrt(e*e+f*f+a*a)){if(1==b)return c[d]=e,c[d+1]=f,c[d+2]=a,c}else return c[d]=0,c[d+1]=0,c[d+2]=0,c;b=1/b;c[d]=e*b;c[d+1]=f*b;c[d+2]=a*b};
r.D.Ys=function(a){var b;b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(1==f)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;a=f;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return a};r.D.Ck=function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];c[0]=e*b-a*g;c[1]=a*f-d*b;c[2]=d*g-e*f;return c};r.D.length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};r.D.lf=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};
r.D.Jk=function(a,b,c){return a[0]*b[c]+a[1]*b[c+1]+a[2]*b[c+2]};r.D.ao=function(a,b,c,d){return a[b]*c[d]+a[b+1]*c[d+1]+a[b+2]*c[d+2]};r.D.Xv=function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e};r.D.direction=function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c};
r.D.Dv=function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d};r.D.Zm=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};r.md={};r.md.create=function(a){var b=new r.Ag(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9]);return b};r.md.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};
r.md.qa=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};r.md.Sd=function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b};r.md.Xu=function(a,b){b||(b=r.i.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
r.md.Zm=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};r.i={};r.i.create=function(a){var b=new r.Ag(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};
r.i.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};r.i.qa=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
r.i.Sd=function(a,b){if(!b||a==b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=f;a[11]=a[14];a[12]=e;a[13]=g;a[14]=h;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};
r.i.xv=function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],l=a[8],n=a[9],p=a[10],v=a[11],u=a[12],q=a[13],z=a[14];a=a[15];return u*n*h*e-l*q*h*e-u*g*p*e+f*q*p*e+l*g*z*e-f*n*z*e-u*n*d*k+l*q*d*k+u*c*p*k-b*q*p*k-l*c*z*k+b*n*z*k+u*g*d*v-f*q*d*v-u*c*h*v+b*q*h*v+f*c*z*v-b*g*z*v-l*g*d*a+f*n*d*a+l*c*h*a-b*n*h*a-f*c*p*a+b*g*p*a};
r.i.inverse=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],l=a[7],n=a[8],p=a[9],v=a[10],u=a[11],q=a[12],z=a[13],x=a[14],w=a[15],C=c*h-d*g,B=c*k-e*g,t=c*l-f*g,J=d*k-e*h,y=d*l-f*h,A=e*l-f*k,K=n*z-p*q,V=n*x-v*q,H=n*w-u*q,aa=p*x-v*z,ia=p*w-u*z,W=v*w-u*x,U=1/(C*W-B*ia+t*aa+J*H-y*V+A*K);b[0]=(h*W-k*ia+l*aa)*U;b[1]=(-d*W+e*ia-f*aa)*U;b[2]=(z*A-x*y+w*J)*U;b[3]=(-p*A+v*y-u*J)*U;b[4]=(-g*W+k*H-l*V)*U;b[5]=(c*W-e*H+f*V)*U;b[6]=(-q*A+x*t-w*B)*U;b[7]=(n*A-v*t+u*B)*U;b[8]=(g*ia-h*H+
l*K)*U;b[9]=(-c*ia+d*H-f*K)*U;b[10]=(q*y-z*t+w*C)*U;b[11]=(-n*y+p*t-u*C)*U;b[12]=(-g*aa+h*V-k*K)*U;b[13]=(c*aa-d*V+e*K)*U;b[14]=(-q*J+z*B-x*C)*U;b[15]=(n*J-p*B+v*C)*U;return b};r.i.aw=function(a,b){b||(b=r.i.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};
r.i.nq=function(a,b){b||(b=r.md.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};r.i.gn=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],k=a[8],l=a[9],n=a[10],p=n*g-h*l,v=-n*f+h*k,u=l*f-g*k,q=c*p+d*v+e*u;if(!q)return null;q=1/q;b||(b=r.md.create());b[0]=p*q;b[1]=(-n*d+e*l)*q;b[2]=(h*d-e*g)*q;b[3]=v*q;b[4]=(n*c-e*k)*q;b[5]=(-h*c+e*f)*q;b[6]=u*q;b[7]=(-l*c+d*k)*q;b[8]=(g*c-d*f)*q;return b};
r.i.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],k=a[5],l=a[6],n=a[7],p=a[8],v=a[9],u=a[10],q=a[11],z=a[12],x=a[13],w=a[14];a=a[15];var C=b[0],B=b[1],t=b[2],J=b[3],y=b[4],A=b[5],K=b[6],V=b[7],H=b[8],aa=b[9],ia=b[10],W=b[11],U=b[12],ba=b[13],wa=b[14];b=b[15];c[0]=C*d+B*h+t*p+J*z;c[1]=C*e+B*k+t*v+J*x;c[2]=C*f+B*l+t*u+J*w;c[3]=C*g+B*n+t*q+J*a;c[4]=y*d+A*h+K*p+V*z;c[5]=y*e+A*k+K*v+V*x;c[6]=y*f+A*l+K*u+V*w;c[7]=y*g+A*n+K*q+V*a;c[8]=H*d+aa*h+ia*p+W*z;c[9]=H*e+aa*k+ia*v+W*x;c[10]=
H*f+aa*l+ia*u+W*w;c[11]=H*g+aa*n+ia*q+W*a;c[12]=U*d+ba*h+wa*p+b*z;c[13]=U*e+ba*k+wa*v+b*x;c[14]=U*f+ba*l+wa*u+b*w;c[15]=U*g+ba*n+wa*q+b*a;return c};r.i.Fa=function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c};
r.i.Rj=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b;return c};
r.i.translate=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;var f=a[0],g=a[1],h=a[2],k=a[3],l=a[4],n=a[5],p=a[6],v=a[7],u=a[8],q=a[9],z=a[10],x=a[11];c[0]=f;c[1]=g;c[2]=h;c[3]=k;c[4]=l;c[5]=n;c[6]=p;c[7]=v;c[8]=u;c[9]=q;c[10]=z;c[11]=x;c[12]=f*d+l*e+u*b+a[12];c[13]=g*d+n*e+q*b+a[13];c[14]=h*d+p*e+z*b+a[14];c[15]=k*d+v*e+x*b+a[15];return c};
r.i.scale=function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a==c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c};
r.i.rotate=function(a,b,c,d){var e=c[0],f=c[1];c=c[2];var g=Math.sqrt(e*e+f*f+c*c);if(!g)return null;1!=g&&(g=1/g,e*=g,f*=g,c*=g);var h=Math.sin(b),k=Math.cos(b),l=1-k;b=a[0];var g=a[1],n=a[2],p=a[3],v=a[4],u=a[5],q=a[6],z=a[7],x=a[8],w=a[9],C=a[10],B=a[11],t=e*e*l+k,J=f*e*l+c*h,y=c*e*l-f*h,A=e*f*l-c*h,K=f*f*l+k,V=c*f*l+e*h,H=e*c*l+f*h,e=f*c*l-e*h,f=c*c*l+k;d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*t+v*J+x*y;d[1]=g*t+u*J+w*y;d[2]=n*t+q*J+C*y;d[3]=p*t+z*J+B*y;d[4]=b*A+v*
K+x*V;d[5]=g*A+u*K+w*V;d[6]=n*A+q*K+C*V;d[7]=p*A+z*K+B*V;d[8]=b*H+v*e+x*f;d[9]=g*H+u*e+w*f;d[10]=n*H+q*e+C*f;d[11]=p*H+z*e+B*f;return d};r.i.Tv=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],g=a[6],h=a[7],k=a[8],l=a[9],n=a[10],p=a[11];c?a!=c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+k*d;c[5]=f*b+l*d;c[6]=g*b+n*d;c[7]=h*b+p*d;c[8]=e*-d+k*b;c[9]=f*-d+l*b;c[10]=g*-d+n*b;c[11]=h*-d+p*b;return c};
r.i.Uv=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[8],l=a[9],n=a[10],p=a[11];c?a!=c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+k*-d;c[1]=f*b+l*-d;c[2]=g*b+n*-d;c[3]=h*b+p*-d;c[8]=e*d+k*b;c[9]=f*d+l*b;c[10]=g*d+n*b;c[11]=h*d+p*b;return c};
r.i.Vv=function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],k=a[4],l=a[5],n=a[6],p=a[7];c?a!=c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+k*d;c[1]=f*b+l*d;c[2]=g*b+n*d;c[3]=h*b+p*d;c[4]=e*-d+k*b;c[5]=f*-d+l*b;c[6]=g*-d+n*b;c[7]=h*-d+p*b;return c};
r.i.yr=function(a,b,c,d,e,f,g){g||(g=r.i.create());var h=b-a,k=d-c,l=f-e;g[0]=2*e/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2*e/k;g[6]=0;g[7]=0;g[8]=(b+a)/h;g[9]=(d+c)/k;g[10]=-(f+e)/l;g[11]=-1;g[12]=0;g[13]=0;g[14]=-(f*e*2)/l;g[15]=0;return g};r.i.perspective=function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return r.i.yr(-b,b,-a,a,c,d,e)};
r.i.Pv=function(a,b,c,d,e,f,g){g||(g=r.i.create());var h=b-a,k=d-c,l=f-e;g[0]=2/h;g[1]=0;g[2]=0;g[3]=0;g[4]=0;g[5]=2/k;g[6]=0;g[7]=0;g[8]=0;g[9]=0;g[10]=-2/l;g[11]=0;g[12]=-(a+b)/h;g[13]=-(d+c)/k;g[14]=-(f+e)/l;g[15]=1;return g};
r.i.Gv=function(a,b,c,d){d||(d=r.i.create());var e=a[0],f=a[1];a=a[2];var g=c[0],h=c[1],k=c[2];c=b[1];var l=b[2];if(e==b[0]&&f==c&&a==l)return r.i.qa(d);var n,p,v,u;c=e-b[0];l=f-b[1];b=a-b[2];u=1/Math.sqrt(c*c+l*l+b*b);c*=u;l*=u;b*=u;n=h*b-k*l;k=k*c-g*b;g=g*l-h*c;(u=Math.sqrt(n*n+k*k+g*g))?(u=1/u,n*=u,k*=u,g*=u):g=k=n=0;h=l*g-b*k;p=b*n-c*g;v=c*k-l*n;(u=Math.sqrt(h*h+p*p+v*v))?(u=1/u,h*=u,p*=u,v*=u):v=p=h=0;d[0]=n;d[1]=h;d[2]=c;d[3]=0;d[4]=k;d[5]=p;d[6]=l;d[7]=0;d[8]=g;d[9]=v;d[10]=b;d[11]=0;d[12]=
-(n*e+k*f+g*a);d[13]=-(h*e+p*f+v*a);d[14]=-(c*e+l*f+b*a);d[15]=1;return d};r.i.Zm=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"};r.Sc={};r.Sc.create=function(a){var b=new r.Ag(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};r.Sc.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};
r.Sc.tv=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};r.Sc.inverse=function(a,b){if(!b||a==b)return a[0]*=1,a[1]*=1,a[2]*=1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};r.Sc.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};
r.Sc.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);if(0==g)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;b[3]=f*g;return b};r.Sc.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],k=b[2];b=b[3];c[0]=d*b+a*g+e*k-f*h;c[1]=e*b+a*h+f*g-d*k;c[2]=f*b+a*k+d*h-e*g;c[3]=a*b-d*g-e*h-f*k;return c};
r.Sc.Fa=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=a[0];var g=a[1],h=a[2];a=a[3];var k=a*d+g*f-h*e,l=a*e+h*d-b*f,n=a*f+b*e-g*d,d=-b*d-g*e-h*f;c[0]=k*a+d*-b+l*-h-n*-g;c[1]=l*a+d*-g+n*-b-k*-h;c[2]=n*a+d*-h+k*-g-l*-b;return c};r.Sc.nq=function(a,b){b||(b=r.md.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,k=e+e,l=c*g,n=c*h,c=c*k,p=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(p+e);b[1]=n-f;b[2]=c+h;b[3]=n+f;b[4]=1-(l+e);b[5]=d-g;b[6]=c-h;b[7]=d+g;b[8]=1-(l+p);return b};
r.Sc.Xu=function(a,b){b||(b=r.i.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,k=e+e,l=c*g,n=c*h,c=c*k,p=d*h,d=d*k,e=e*k,g=f*g,h=f*h,f=f*k;b[0]=1-(p+e);b[1]=n-f;b[2]=c+h;b[3]=0;b[4]=n+f;b[5]=1-(l+e);b[6]=d-g;b[7]=0;b[8]=c-h;b[9]=d+g;b[10]=1-(l+p);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};r.Sc.Wv=function(a,b,c,d){d||(d=a);var e=c;0>a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]&&(e=-1*c);d[0]=1-c*a[0]+e*b[0];d[1]=1-c*a[1]+e*b[1];d[2]=1-c*a[2]+e*b[2];d[3]=1-c*a[3]+e*b[3];return d};
r.Sc.Zm=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};r.Math={};r.Math.mat4Multiply=r.i.multiply;r.Math.mat4Inverse=r.i.inverse;r.Math.mat4ToMat3=r.i.nq;r.Math.mat4ToInverseMat3=r.i.gn;r.Math.mat4Transpose=r.i.Sd;r.Math.mat3Transpose=r.md.Sd;r.Math.vec3Normalize=r.D.normalize;r.Math.vec3Dot=r.D.lf;r.Math.vec3Cross=r.D.Ck;r.Math.vec3Length=r.D.length;
r.zr=function(a,b,c,d,e,f){var g=b-a,h=d-c,k=f-e;a=r.i.create([2*e/g,0,(b+a)/g,0,0,2*e/h,(d+c)/h,0,0,0,-(f+e)/k,-2*f*e/k,0,0,-1,0]);r.i.Sd(a);return a};r.ot=function(a,b,c,d){a=c*Math.tan(a*Math.PI/180);b*=a;return r.zr(-b,b,-a,a,c,d)};r.mt=function(a,b,c,d){var e=d-c;a=r.i.create([1/(.5*a*b),0,0,0,0,1/(.5*a),0,0,0,0,-2/e,-((d+c)/e),0,0,0,1]);r.i.Sd(a);return a};
r.Dc=function(a,b){var c=Math.cos(b),d=Math.sin(b);switch(a){case 0:c=[1,0,0,0,0,c,-d,0,0,d,c,0,0,0,0,1];break;case 1:c=[c,0,-d,0,0,1,0,0,d,0,c,0,0,0,0,1];break;default:c=[c,-d,0,0,d,c,0,0,0,0,1,0,0,0,0,1]}r.i.Sd(c);return c};r.af=function(a,b,c){a=[a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1];r.i.Sd(a);return a};r.Ip=function(a){return r.af(a,a,a)};r.qc=function(a,b,c){a=[1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1];r.i.Sd(a);return a};r.bw=function(a){return r.qc(a[0],a[1],0)};r.cw=function(a){return r.qc(a[0],a[1],a[2])};
r.isEqual=function(a,b,c){return Math.abs(a-b)<c};r.Ee=function(a,b,c){a<b?a=b:a>c&&(a=c);return a};r.La=function(a){return a*Math.PI/180};r.Fk=function(a){return a/Math.PI*180};r.Ss=function(a,b,c){return a+(b-a)*c};r.Ja=function(a,b){return"boolean"===typeof a?a:b};r.Be=function(a,b,c){var d=Number.kv;return"number"===typeof a?r.Ee(a,b,d):c};
r.cv=function(a){var b=[0,1,1,1],c=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE];if(Array.isArray(a)&&4==a.length){for(var d=0;4>d;d++)a[d]=r.Ee(a[d],b[d],c[d]);return a}return[1,3E3,15E3,7E3]};r.mk=function(a,b){return"string"===typeof a?a:b};r.Qv=function(a,b){if(0>a)return a=-a+"",b--,a.length>=b?"-"+a:"-"+(Array(b-a.length+1).join("0")+a);a+="";return a.length>=b?a:Array(b-a.length+1).join("0")+a};
r.gr=function(a){var b=(a&31744)>>10;fraction=a&1023;return(a>>15?-1:1)*(b?31===b?fraction?NaN:Infinity:Math.pow(2,b-15)*(1+fraction/1024):fraction/1024*6.103515625E-5)};r.tu=function(a){var b={copy:"&copy;",Y:(new Date).getFullYear()};return a&&""!=a?a.replace(/\{([_$a-zA-Z0-9][_$a-zA-Z0-9]*)\}/g,function(a,d){return d in b?b[d]:a}):""};
r.Mp=function(a){return a&&""!=a?r.tu(a).replace(/\[([^\]]*)\]/g,function(a,c){c=c.trim();urls_=c.split(" ");return-1!=urls_[0].indexOf("//")?1<urls_.length?"<a href="+urls_[0]+" target='_blank'>"+c.substring(urls_[0].length)+"</a>":"<a href="+urls_[0]+" target='_blank'>"+urls_[0]+"</a>":c}):""};r.uu=function(a,b,c){return a&&""!=a?a.replace(/\{([_$a-zA-Z(-9][_$a-zA-Z(-9]*)\}/g,function(a,e){return e in b?b[e]:c(e)}):""};
r.yv=function(a){return(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?[parseInt(a[4],16),parseInt(a[3],16),parseInt(a[2],16),parseInt(a[1],16)]:[0,0,0,255]};r.Au=function(){return"("+r.Bq+").call(self);"};
r.Id=function(a,b,c,d,e,f){var g=new XMLHttpRequest;g.onreadystatechange=function(){switch(g.readyState){case 4:if(400<=g.status||0==g.status)c&&c(g.status);else{var e=g.response,f=e;if(!d)try{f=JSON.parse(e)}catch(l){console.log("JSON Parse Error ("+a+"): "+(l.message?l.message:""));c&&c(g.status);break}b&&b(f)}}}.bind(this);g.open("GET",a,!0);g.withCredentials=e;f&&f.token&&g.setRequestHeader("Accept","token/"+f.token+", */*");g.send("")};
r.hd=function(a,b,c,d,e,f){var g=new XMLHttpRequest;g.onreadystatechange=function(){switch(g.readyState){case 0:case 1:case 2:case 3:break;case 4:if(400<=g.status||0==g.status){c&&c(g.status);break}var a=g.response;if(!a){c&&c();break}b&&b(a);break;default:c&&c()}}.bind(this);g.open("GET",a,!0);g.responseType=f?f:"arraybuffer";g.withCredentials=d;e&&e.token&&g.setRequestHeader("Accept","token/"+e.token+", */*");g.send("")};window.performance=window.performance||{};
performance.now=performance.now||performance.Jv||performance.Kv||performance.Nv||performance.webkitNow||function(){return(new Date).getTime()};window.Ep=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)};"undefined"===typeof Array.isArray&&(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});r.isEqual=r.isEqual;
r.clamp=r.Ee;r.mix=r.Ss;r.radians=r.La;r.degrees=r.Fk;r.loadJSON=r.Id;r.loadBinary=r.hd;
r.Ga={Ke:!1,Oc:function(){var a=r.Ga;a.tk=a.Kp(a.er)||"An unknown browser";a.version=a.Lp(navigator.userAgent.toLowerCase())||a.Lp(navigator.appVersion)||"an unknown version";a.gf=a.Kp(a.fr)||"an unknown os: ua: "+navigator.userAgent+" pl: "+navigator.platform;a.Se="iphone/ipod"==a.gf||"android"==a.gf||"ipad"==a.gf||"windows ce"==a.gf||"windows phone"==a.gf||"kindle"==a.gf;a.Ts="android"==a.gf;a.Ke=!0},Br:function(){r.Ga.Ke||r.Ga.Oc();return r.Ga.tk},Cr:function(){r.Ga.Ke||r.Ga.Oc();return r.Ga.tk},
Kr:function(){r.Ga.Ke||r.Ga.Oc();return r.Ga.tk},Go:function(){r.Ga.Ke||r.Ga.Oc();return r.Ga.Se},qs:function(){r.Ga.Ke||r.Ga.Oc();return r.Ga.Ts},Kp:function(a){for(var b=r.Ga,c=0;c<a.length;c++){var d=a[c].Na,e=a[c].Vt;b.yq=a[c].kg||a[c].qa;if(d){if(-1!=d.toLowerCase().indexOf(a[c].Oa))return null!=a[c].version&&(b.version=a[c].version),a[c].qa}else if(e)return a[c].qa}},Lp:function(a){var b=r.Ga;if(null!=b.version)return b.version;var c=a.indexOf(b.yq);if(-1!=c)return parseFloat(a.substring(c+
b.yq.length+1))},er:[{Na:navigator.userAgent,Oa:"chrome",qa:"chrome"},{Na:navigator.userAgent,Oa:"firefox",qa:"firefox"},{Na:navigator.vendor,Oa:"apple",qa:"safari",kg:"version"},{Vt:window.opera,qa:"opera",kg:"version"},{Na:navigator.vendor,Oa:"icab",qa:"icab"},{Na:navigator.vendor,Oa:"kde",qa:"konqueror"},{Na:navigator.vendor,Oa:"camino",qa:"camino"},{Na:navigator.userAgent,Oa:"netscape",qa:"netscape"},{Na:navigator.userAgent,Oa:"msie",qa:"explorer",kg:"msie"},{Na:navigator.userAgent,Oa:"trident/",
qa:"explorer",version:"11"},{Na:navigator.userAgent,Oa:"edge/",qa:"explorer",version:"12"},{Na:navigator.userAgent,Oa:"omniweb",kg:"omniweb/",qa:"omniweb"},{Na:navigator.userAgent,Oa:"silk",kg:"silk/",qa:"silk"},{Na:navigator.userAgent,Oa:"gecko",qa:"mozilla",kg:"rv"},{Na:navigator.userAgent,Oa:"mozilla",qa:"netscape",kg:"mozilla"}],fr:[{Na:navigator.userAgent,Oa:"windows ce",qa:"windows ce"},{Na:navigator.userAgent,Oa:"windows phone",qa:"windows phone"},{Na:navigator.platform,Oa:"win",qa:"windows"},
{Na:navigator.platform,Oa:"mac",qa:"mac"},{Na:navigator.userAgent,Oa:"iphone",qa:"iphone/ipod"},{Na:navigator.userAgent,Oa:"ipod",qa:"iphone/ipod"},{Na:navigator.userAgent,Oa:"ipad",qa:"ipad"},{Na:navigator.userAgent,Oa:"android",qa:"android"},{Na:navigator.userAgent,Oa:"silk",qa:"kindle"},{Na:navigator.userAgent,Oa:"blackberry",qa:"blackberry"},{Na:navigator.platform,Oa:"linux",qa:"linux"}]};r.getBrowser=r.Ga.Br;r.getBrowserVersion=r.Ga.Cr;r.getOS=r.Ga.Kr;r.isPlatformMobileDevice=r.Ga.Go;
r.isPlatformAndroid=r.Ga.qs;r.za={};r.za.Av=function(a){if("string"!==typeof a)return!1;var b=document.location.hostname;return r.za.parse(a).hostname===b};r.za.parse=function(a){if("string"!==typeof a)return null;var b=document.createElement("a");b.href=a;return b};
r.za.Lr=function(a){var b={};a=r.za.parse(a).search.substring(1).split("&");if(1!=a.length||""!=a[0])for(var c=0;c<a.length;c++){var d=a[c].split("=");"undefined"===typeof b[d[0]]?b[d[0]]=d[1]:"string"===typeof b[d[0]]?b[d[0]]=[b[d[0]],d[1]]:b[d[0]].push(d[1])}return b};r.za.Ir=function(a){var b=document.createElement("a");b.href=a;return b.hostname};
r.za.dj=function(a){if(-1!=a.indexOf("http://"))return"http:";if(-1!=a.indexOf("https://"))return"https:";var b=document.createElement("a");b.href=a;return b.protocol};r.za.bj=function(a){var b=document.createElement("a");b.href=a;return b.origin};r.za.Zi=function(a){return a.split("?")[0].split("/").slice(0,-1).join("/")+"/"};
r.za.wo=function(a,b){if(!a||!b)return a;a=a.trim();b=b.trim();var c=r.za.Zi(b),d=r.za.dj(b),e=r.za.bj(b);return-1!=a.indexOf("://")?a:0==a.indexOf("//")?d+a:0==a.indexOf("/")?e+a:c+a};r.Url=r.za;r.za.getParamsFromUrl=r.za.Lr;r.kb={};r.kb.Hs=function(a,b,c,d){!a instanceof Image||"string"!==typeof b||(d||(a.crossOrigin=c?"use-credentials":"anonymous"),a.src=b)};r.kb.nj=function(a,b,c,d,e){var f=new Image;f.onerror=c;f.onload=b;r.kb.Hs(f,a,d,e);return f};r.kb.Id=function(a,b,c){r.hd(a,b,c)};
r.kb.hd=function(a,b,c){r.hd(a,b,c)};r.kb.Ao=function(a,b,c,d,e){var f=new XMLHttpRequest;f.onreadystatechange=function(){switch(f.readyState){case 0:case 1:case 2:case 3:break;case 4:null!=b&&b(f.getAllResponseHeaders(),f.status);break;default:null!=c&&c()}}.bind(this);f.onerror=function(){null!=c&&c()}.bind(this);f.open("HEAD",a,!0);f.withCredentials=d;e&&e.token&&f.setRequestHeader("Accept","token/"+e.token+", */*");f.send("")};r.Http=r.kb;r.kb.imageFactory=r.kb.nj;r.kb.loadJSON=r.kb.Id;
r.kb.loadBinary=r.kb.hd;r.kb.headRequest=r.kb.Ao;function ma(a){this.u=a;this.Ba=!1;this.u.h.ge&&(document.addEventListener("keyup",this.sm.bind(this),!1),document.addEventListener("keypress",this.bt.bind(this),!1),document.addEventListener("keydown",this.at.bind(this),!1));this.Si=this.ho=this.Vm=!1;this.Md=null}function na(a){var b=document.createElement("style");b.type="text/css";b.innerHTML=a;document.getElementsByTagName("head")[0].appendChild(b)}m=ma.prototype;
m.gb=function(a){a.stopPropagation();return!1};
m.et=function(){var a=this.u.Zh;if(a){this.Vm&&a.zp();if(this.io){var b=this.u.cj(),c=b,d=a.yk([0,0,0]),b=b.Em,e=this.Dp,f=6371E3,g=c.j.s;g.disable(g.CULL_FACE);var h=r.i.create();r.i.multiply(r.af(2,2,2),r.qc(-.5,-.5,-.5),h);var k=[d[0],d[1],d[2]],f=null!=f?f:1.5,d=r.i.create();r.i.multiply(r.qc(k[0],k[1],k[2]),r.af(f,f,6371E3),d);f=r.i.create();r.i.multiply(pa(c.G),d,f);r.i.multiply(f,h,f);c.j.useProgram(b,["aPosition","aTexCoord"]);c.j.bindTexture(e||c.Yg);ra(b,"uSampler",0);ya(b,"uMVP",f);c.ni.Xa(b,
"aPosition","aTexCoord");g.enable(g.CULL_FACE)}if(this.ho){b=this.u.ae();g=[];c=0;for(h=this.Yj.length;c<h;c++)g.push(a.Mi(this.Yj[c]));b.Fd({points:g,size:2,color:[0,128,255,255],"depth-test":!1,blend:!1});c=0;for(h=this.Ze.length;c<h;c++){g=[];e=0;for(f=this.Ze[c].length;e<f;e++)g.push(a.Mi(this.Ze[c][e]));b.Fd({points:g,size:2,color:[0,255,128,255],"depth-test":!1,blend:!1})}c=0;for(h=this.Ye.length;c<h;c++){g=[];e=0;for(f=this.Ye[c].length;e<f;e++)g.push(a.Mi(this.Ye[c][e]));b.Fd({points:g,size:2,
color:[0,255,255,255],"depth-test":!1,blend:!1})}e=a.Fh();g=a.yk(this.Yj[0]);c=r.i.create(this.au);c[12]=g[0];c[13]=g[1];c[14]=g[2];r.Math.Hv(e["view-matrix"],c,c);e=[0,0,0,0,0,0,0,0,0];r.i.gn(c,e);b.eb(this.cu);b.fo({mesh:this.bu,texture:null,shader:"shaded","shader-variables":{uMV:["mat4",c],uNorm:["mat3",e],uMaterial:["mat4",[255,128,128,0,0,0,0,0,0,0,0,0,0,.5,0,0]]}})}if(this.Si&&this.On){b=this.u.ae();h=a.uc();f=a.vo(h)/64;g=Array(256);for(e=0;16>e;e++)for(c=0;16>c;c++)d=c*f-8*f,k=e*f-8*f,d=
a.bp(h,r.Fk(Math.atan2(k,d)),Math.sqrt(d*d+k*k)),d=a.uo(d),d=a.Pn([d[0],d[1],0],"float",this.Md),g[16*e+c]=d;a=Array(16);for(e=0;16>e;e++){for(c=0;16>c;c++)a[c]=g[16*e+c];b.Fd({points:a,size:2,color:[0,255,255,255],"depth-test":!1,blend:!1})}for(c=0;16>c;c++){for(e=0;16>e;e++)a[e]=g[16*e+c];b.Fd({points:a,size:2,color:[0,255,255,255],"depth-test":!1,blend:!1})}c=0;for(h=g.length;c<h;c++)a=g[c],b.drawImage({rect:[a[0]-10,a[1]-10,20,20],texture:this.On,color:[255,0,255,255],depth:a[2],"depth-test":!1,
blend:!0})}}};m.at=function(a){"undefined"==typeof a&&(a=window.event);this.Dk=a.ctrlKey;this.li=a.shiftKey;this.sm(a,!0)};m.bt=function(a){this.sm(a,!0)};m.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1};
m.sm=function(a,b){"undefined"==typeof a&&(a=window.event);var c=this.u.ma();if(null!=c){this.Dk=a.ctrlKey;this.li=a.shiftKey;var d=!1;if(a){var e;e=window.event?window.event.keyCode:a.which?a.which:a.charCode;if(1==this.li&&1==this.Dk)switch(e){case 68:case 100:this.preventDefault(a)}if(1==this.li&&1!=b){if(1==this.Dk)switch(e){case 68:case 100:this.Ba||(na("#melown-stats-panel {font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;display: none;padding:15px;width: 305px;font-size: 14px;position: absolute;right: 10px;top: 10px;cursor: default;background-color: rgba(255,255,255,0.95);border-radius: 5px;border: solid 1px #ccc;text-align: left;z-index: 7;padding: 10px;}#melown-stats-panel-info {margin-top: 5px;margin-bottom: 3px;overflow: hidden;}#melown-stats-panel-info table {color:#000000;text-align: left;font-size: 12px;}#melown-stats-panel-info table td {vertical-align: top;}#melown-stats-panel-pos {width: 100%;}"),
this.xe=document.createElement("div"),this.xe.id="melown-stats-panel",this.xe.innerHTML='<span id="melown-stats-panel-title">Render statistics &nbsp;&nbsp;&nbsp;v'+r.to()+'</h3><p id="melown-stats-panel-info"></p><input id="melown-stats-panel-pos" type="text">',this.u.nf.appendChild(this.xe),this.Xp=document.getElementById("melown-stats-panel-info"),this.Yp=document.getElementById("melown-stats-panel-pos"),this.xe.addEventListener("mouseup",this.gb.bind(this),!0),this.xe.addEventListener("mousedown",
this.gb.bind(this),!0),this.xe.addEventListener("mousewheel",this.gb.bind(this),!1),this.xe.addEventListener("dblclick",this.gb.bind(this),!1),this.Ym=!1,na("#melown-graphs-panel {position:absolute;left:10px;top:10px;z-index: 7;background-color: #FFFFFF;padding: 5px;border-radius: 4px;font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;color:#000000;text-align: left;font-size: 12px;display:none;}.melown-graphs-canvas {border: solid 1px #bbb;image-rendering : pixelated;}.melown-graphs-info {padding: 5px 2px;font-size: 10px;}.melown-graphs-button {padding: 2px 5px;display:inline-block;margin-right: 4px;border-radius: 4px;cursor:pointer;}.melown-graphs-button:hover {box-shadow: 0 0 1px #0066ff;}"),
this.ce=document.createElement("div"),this.ce.id="melown-graphs-panel",this.ce.innerHTML='<canvas id="melown-graphs-render" class="melown-graphs-canvas" width="900" height="100" ></canvas><div id="melown-graphs-info" class="melown-graphs-info" >&FilledSmallSquare; Frame: 1234 &nbsp <span style="color:#ff0000">&FilledSmallSquare;</span> Render: 1234 &nbsp <span style="color:#0000ff">&FilledSmallSquare;</span> Textures: 1234 &nbsp <span style="color:#005500">&FilledSmallSquare;</span> Mesh: 1234 &nbsp <span style="color:#00bb00">&FilledSmallSquare;</span> GpuMesh: 1234</div><canvas id="melown-graphs-cache" class="melown-graphs-canvas" width="900" height="100" ></canvas><div id="melown-graphs-info2" class="melown-graphs-info" >&FilledSmallSquare; Cache: 1234 &nbsp <span style="color:#ff0000">&FilledSmallSquare;</span> Used: 123 &nbsp <span style="color:#0000ff">&FilledSmallSquare;</span> Textures: 1234 &nbsp <span style="color:#00bb00">&FilledSmallSquare;</span> Mesh: &nbsp 1234</div><div id="melown-graphs-rec" class="melown-graphs-button" >Recording On</div><div id="melown-graphs-ref" class="melown-graphs-button" >Refresh On</div><div id="melown-graphs-res" class="melown-graphs-button" >Reset</div><div id="melown-graphs-zoom" class="melown-graphs-button" >Scale: Max value</div><div id="melown-graphs-magnify" class="melown-graphs-button" >Magnify Off</div><div id="melown-graphs-graph" class="melown-graphs-button" >Graph: Cache</div>',
this.u.nf.appendChild(this.ce),this.Je=document.getElementById("melown-graphs-render"),this.xf=document.getElementById("melown-graphs-cache"),this.Yr=this.Je.getContext("2d"),this.Xr=this.xf.getContext("2d"),document.getElementById("melown-graphs-rec").onclick=this.Gl.bind(this),document.getElementById("melown-graphs-rec").onclick=this.Gl.bind(this),document.getElementById("melown-graphs-ref").onclick=this.as.bind(this),document.getElementById("melown-graphs-res").onclick=this.bs.bind(this),document.getElementById("melown-graphs-zoom").onclick=
this.cs.bind(this),document.getElementById("melown-graphs-magnify").onclick=this.$r.bind(this),document.getElementById("melown-graphs-graph").onclick=this.Zr.bind(this),document.getElementById("melown-graphs-render").onmousemove=this.kp.bind(this),document.getElementById("melown-graphs-render").onmouseout=this.lp.bind(this),document.getElementById("melown-graphs-cache").onmousemove=this.kp.bind(this),document.getElementById("melown-graphs-cache").onmouseout=this.lp.bind(this),this.ce.addEventListener("mouseup",
this.gb.bind(this),!0),this.ce.addEventListener("mousedown",this.gb.bind(this),!0),this.ce.addEventListener("mousewheel",this.gb.bind(this),!1),this.ce.addEventListener("dblclick",this.gb.bind(this),!1),this.Af="max",this.gd="Cache",this.hj=!0,this.gj=!1,na("#melown-layers-panel {font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;display: none;padding:15px;font-size: 14px;position: absolute;right: 10px;bottom: 10px;cursor: default;background-color: rgba(255,255,255,0.95);border-radius: 5px;border: solid 1px #ccc;text-align: left;z-index: 7;padding: 10px;}#melown-layers-panel button {max-width: 23px;max-height: 21px;}#melown-layers-panel-title {margin-bottom: 3px;}#melown-layers-views-panel {margin-top: 5px;float: left;}#melown-layers-views-items {width: 191px;overflow-y: scroll;overflow-x: hidden;height: 200px;border: 1px solid #ddd;}#melown-layers-surfaces-panel {margin-top: 5px;float: left;}#melown-layers-surfaces-items {width: 150px;overflow-y: scroll;overflow-x: hidden;height: 200px;border-top: 1px solid #ddd;border-bottom: 1px solid #ddd;}#melown-layers-boundlayers-panel {margin-top: 5px;float: left;}#melown-layers-boundlayers-items {width: 250px;overflow-y: scroll;overflow-x: hidden;height: 200px;border: 1px solid #ddd;border-right: none;}#melown-layers-freelayers-panel {margin-top: 5px;float: left;}#melown-layers-freelayers-items {width: 150px;overflow-y: scroll;overflow-x: hidden;height: 200px;border: 1px solid #ddd;}#melown-layers-fl-properties-panel {margin-top: 5px;float: left;}#melown-layers-fl-properties-items {width: 250px;overflow-y: scroll;overflow-x: hidden;height: 200px;border: 1px solid #ddd;border-right: none;}#melown-layers-json-panel {margin-top: 5px;float: right;}#melown-layers-json-text {width: 200px;resize: none;height: 180px;border: 1px solid #ddd;white-space: nowrap;padding: 0px;}#melown-layers-json-text2 {width: 200px;height: 21px;border: 1px solid #ddd;}.melown-layers-panel-title {margin: 0px;margin-bottom: 5px;}.melown-layers-item {width: 100%;}.melown-layers-item input[type=number]{width: 43px;}.melown-layers-name {width: 120px;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}.melown-layers-name2 {width: 126px;display: inline-block;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}#melown-layers-fl-properties-style {width: 175px;height: 21px;}.melown-surface-item {width: 100%;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}"),
this.ne=document.createElement("div"),this.ne.id="melown-layers-panel",this.ne.innerHTML='<div id="melown-layers-views-panel"><p class="melown-layers-panel-title">Named Views:</p><div id="melown-layers-views-items"></div></div><div id="melown-layers-surfaces-panel"><p class="melown-layers-panel-title">Surfaces:</p><div id="melown-layers-surfaces-items"></div></div><div id="melown-layers-boundlayers-panel"><p class="melown-layers-panel-title">Surface Bound Layers:</p><div id="melown-layers-boundlayers-items"></div></div><div id="melown-layers-freelayers-panel"><p class="melown-layers-panel-title">Free Layers:</p><div id="melown-layers-freelayers-items"></div></div><div id="melown-layers-fl-properties-panel"><p class="melown-layers-panel-title">Free Layer Properties:</p><div id="melown-layers-fl-properties-items"></div></div><div id="melown-layers-json-panel"><p class="melown-layers-panel-title">Definition:</p><textarea id="melown-layers-json-text" cols="48"></textarea><br/><input id="melown-layers-json-text2" type="text"></div>',
this.u.nf.appendChild(this.ne),this.As=document.getElementById("melown-layers-views-items"),this.zs=document.getElementById("melown-layers-surfaces-items"),this.vs=document.getElementById("melown-layers-boundlayers-items"),this.ws=document.getElementById("melown-layers-freelayers-items"),this.Mo=document.getElementById("melown-layers-fl-properties-items"),this.ys=document.getElementById("melown-layers-json-text"),this.xs=document.getElementById("melown-layers-json-text2"),this.ne.addEventListener("mouseup",
this.gb.bind(this),!0),this.ne.addEventListener("mousedown",this.gb.bind(this),!0),this.ne.addEventListener("mousewheel",this.gb.bind(this),!1),this.ne.addEventListener("dblclick",this.gb.bind(this),!1),this.yb=[],this.No=this.Sl=!1,this.Me=this.me=this.xb="",na("#melown-replay-panel {font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;display: none;padding:15px;width: 615px;font-size: 14px;position: absolute;right: 10px;top: 10px;cursor: default;background-color: rgba(255,255,255,0.95);border-radius: 5px;border: solid 1px #ccc;text-align: left;z-index: 7;padding: 10px;}#melown-replay-panel-left {width: 253px;height: 100%;float: left;}#melown-replay-panel-right {width: 340px;height: 100%;float: right;}#melown-replay-items {width: 240px;overflow-x: hidden;border: 1px solid #ddd;padding-right: 5px;}.melown-replay-item {width: 100%;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;}#melown-replay-lod-slider {width: 240px;}#melown-replay-lod-text {width: 60px;margin-left: 10px;margin-right: 10px;}#melown-replay-lod-single {margin-left: 10px;}#melown-replay-time-slider {width: 330px;}#melown-replay-time-text {width: 60px;margin-left: 10px;margin-right: 10px;}#melown-replay-time-single {margin-left: 10px;}#melown-replay-panel-gtime canvas{border: 1px solid #555;}#melown-replay-panel-gtime span{font-size: 10px;}#melown-replay-info {width: 240px;height: 140px;overflow-x: hidden;border: 1px solid #ddd;padding-right: 5px;margin-top: 10px;font-size: 12px;word-wrap: break-word;}"),
this.te=document.createElement("div"),this.te.id="melown-replay-panel",this.te.innerHTML='<div id="melown-replay-panel-left"><div id="melown-replay-items"></div><div id="melown-replay-panel-lod"><input id="melown-replay-lod-slider" type="range" min="0" max="30" step="1" value="30" /><br/><span>LOD:</span><input id="melown-replay-lod-text" type="text" value="30"/><input id="melown-replay-lod-up" type="button" value="<"/><input id="melown-replay-lod-down" type="button" value=">"/><input id="melown-replay-lod-single" type="checkbox"/><span>Single</span></div><div id="melown-replay-info"></div></div><div id="melown-replay-panel-right"><div id="melown-replay-panel-gtime"><span id="melown-replay-info-meshes">Meshes Count: 0 Min/Max: 0/0 Avg. 0</span><br/><canvas id="melown-replay-canvas-meshes" width=340 height=30></canvas><br/><span id="melown-replay-info-textures">Internal Textures Count: 0 Min/Max: 0/0 Avg. 0</span><br/><canvas id="melown-replay-canvas-textures" width=340 height=30></canvas><br/><span id="melown-replay-info-textures2">External Textures Count: 0 Min/Max: 0/0 Avg. 0</span><br/><canvas id="melown-replay-canvas-textures2" width=340 height=30></canvas><br/><span id="melown-replay-info-geodata">Geodata Count: 0 Min/Max: 0/0 Avg. 0</span><br/><canvas id="melown-replay-canvas-geodata" width=340 height=30></canvas><br/><span id="melown-replay-info-metatiles">Metatiles Count: 0 Min/Max: 0/0 Avg. 0</span><br/><canvas id="melown-replay-canvas-metatiles" width=340 height=30></canvas><br/><span id="melown-replay-info-intervals">Interval Count: 0 Min/Max: 0/0 Avg. 0</span><br/><canvas id="melown-replay-canvas-intervals" width=340 height=30></canvas><br/><span id="melown-replay-info-threads">Threads Min/Max: 0/0 Avg. 0 </span><br/><canvas id="melown-replay-canvas-threads" width=340 height=30></canvas><br/></div><div id="melown-replay-panel-time"><input id="melown-replay-time-slider" type="range" min="0" max="2000" value="0" /><br/><span>File:</span><input id="melown-replay-time-text" type="text" value="0"/><input id="melown-replay-time-up" type="button" value="<"/><input id="melown-replay-time-down" type="button" value=">"/><input id="melown-replay-time-single" type="checkbox"/><span>Single</span></div></div>',
this.u.nf.appendChild(this.te),this.ku=document.getElementById("melown-replay-items"),this.$e=document.getElementById("melown-replay-lod-slider"),this.$e.onchange=this.Kd.bind(this,"lod"),this.$e.oninput=this.Kd.bind(this,"lod"),this.Wf=document.getElementById("melown-replay-lod-text"),this.Wf.onchange=this.np.bind(this,"lod"),document.getElementById("melown-replay-lod-up").onclick=this.Kd.bind(this,"lod","down"),document.getElementById("melown-replay-lod-down").onclick=this.Kd.bind(this,"lod","up"),
document.getElementById("melown-replay-lod-single").onclick=this.Kd.bind(this,"lod","single"),this.ue=document.getElementById("melown-replay-time-slider"),this.ue.onchange=this.Kd.bind(this,"time"),this.ue.oninput=this.Kd.bind(this,"time"),this.Xf=document.getElementById("melown-replay-time-text"),this.Xf.onchange=this.np.bind(this,"time"),this.lu=document.getElementById("melown-replay-info"),document.getElementById("melown-replay-time-up").onclick=this.Kd.bind(this,"time","down"),document.getElementById("melown-replay-time-down").onclick=
this.Kd.bind(this,"time","up"),document.getElementById("melown-replay-time-single").onclick=this.Kd.bind(this,"time","single"),this.te.addEventListener("mouseup",this.gb.bind(this),!0),this.te.addEventListener("mousedown",this.gb.bind(this),!0),this.te.addEventListener("mousewheel",this.gb.bind(this),!1),this.te.addEventListener("dblclick",this.gb.bind(this),!1),this.fu=document.getElementById("melown-replay-info-meshes"),this.ah=document.getElementById("melown-replay-canvas-meshes").getContext("2d"),
this.iu=document.getElementById("melown-replay-info-textures"),this.eh=document.getElementById("melown-replay-canvas-textures").getContext("2d"),this.hu=document.getElementById("melown-replay-info-textures2"),this.dh=document.getElementById("melown-replay-canvas-textures2").getContext("2d"),this.du=document.getElementById("melown-replay-info-geodata"),this.$g=document.getElementById("melown-replay-canvas-geodata").getContext("2d"),this.gu=document.getElementById("melown-replay-info-metatiles"),this.bh=
document.getElementById("melown-replay-canvas-metatiles").getContext("2d"),this.eu=document.getElementById("melown-replay-info-intervals"),this.Uf=document.getElementById("melown-replay-canvas-intervals").getContext("2d"),this.ju=document.getElementById("melown-replay-info-threads"),this.Vf=document.getElementById("melown-replay-canvas-threads").getContext("2d"),this.Yj=[],this.Ye=[],this.Ze=[],this.Qm=this.Cp=!1,na("#melown-stylesheets-panel {font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;display: none;padding:15px;width: 1200px;height: 350px;font-size: 14px;position: absolute;right: 10px;bottom: 10px;cursor: default;background-color: rgba(255,255,255,0.95);border-radius: 5px;border: solid 1px #ccc;text-align: left;z-index: 7;padding: 10px;}#melown-stylesheets-panel-header {width: 100%;height: 28px;}#melown-stylesheets-panel-combo {width: 1115px;height: 21px;}#melown-stylesheets-panel-button {float: right;}#melown-stylesheets-panel-text {width: 100%;height: 300px;resize: none;white-space: nowrap;}"),
this.ye=document.createElement("div"),this.ye.id="melown-stylesheets-panel",this.ye.innerHTML='<div id="melown-stylesheets-panel-header"><select id="melown-stylesheets-panel-combo"></select><button id="melown-stylesheets-panel-button" type="button" title="Update">Update</button></div><textarea id="melown-stylesheets-panel-text" cols="50"></textarea>',this.u.nf.appendChild(this.ye),this.ek=document.getElementById("melown-stylesheets-panel-combo"),this.ek.onchange=this.ht.bind(this),this.bn=document.getElementById("melown-stylesheets-panel-text"),
document.getElementById("melown-stylesheets-panel-button").onclick=this.it.bind(this),this.ye.addEventListener("mouseup",this.gb.bind(this),!0),this.ye.addEventListener("mousedown",this.gb.bind(this),!0),this.ye.addEventListener("mousewheel",this.gb.bind(this),!1),this.ye.addEventListener("dblclick",this.gb.bind(this),!1),this.an=!1,this.u.Uj("map-update",this.et.bind(this)),this.Ba=!0),this.Nn||(this.Nn=r.kb.nj("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABmJLR0QAAAAAAAD5Q7t/AAAACW9GRnMAAAAgAAAA4ACD+EAUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA/UlEQVRYw+2VPwqDMBTG3dz1Am56EnH2XLroETxGuwc3Z7cOdhY8QJpfSUBspUvStJAPPggvD973/uQligICAgL+DKViqygUV02hbaXLwJlio7gpyhNu2idzEXwwgfI8H+u6vnZdN/V9P3EuimLcCRlsiyArGcfxjWDLsmzyAGzc4aNFNDZ7/iw7AeQH4LNrh5WZYLgkJTaZCyHuVVVdkiSZ0zSdOWMzlaBFWkRrQ4A4Zk/A4wBie1MFYUMAz0wybCYAmR8FUAlzj6+2r18TgM2VAO8tOB1Cyk7mrofQ+zP0voheVjHtIBjDxjrmvCu7k1Xs/TP6ie84ICDAGR5uCYdPo0MWiAAAAABJRU5ErkJggg==",
function(){this.On=this.u.ae().createTexture({source:this.Nn})}.bind(this))),d=this.Hk=!0}if(1==this.Hk){var f=!0;switch(e){case 67:case 99:c.h.Xh=!c.h.Xh;break;case 49:break;case 50:break;case 51:break;case 48:break;case 72:case 104:c.Jl=!c.Jl;break;case 81:case 113:var g=c.uc();console.log("pos-before: "+JSON.stringify(g.o));Aa(g,"obj"==g.o[0]?"subj":"obj");console.log("new mode: "+g.o[0]);console.log("pos-after: "+JSON.stringify(g.o));c.setPosition(g);break;case 80:case 112:c.l.$j("file","MelownScreenshot.png",
"png");break;case 83:case 115:this.Ym?(this.xe.style.display="none",this.Ym=!1):(this.xe.style.display="block",this.Ym=!0);break;case 86:case 118:this.Sl?(this.ne.style.display="none",this.Sl=!1):(this.ne.style.display="block",this.Sl=!0,this.uq());break;case 69:case 101:this.an?(this.ye.style.display="none",this.an=!1):(Ca(this),this.ye.style.display="block",this.an=!0);break;case 84:case 116:this.Qm?(this.te.style.display="none",this.Qm=!1):Da(this);break;case 66:case 98:c.ec=!c.ec;break;case 87:case 119:g=
c.vg+1;c.vg=2<g?0:g;break;case 70:case 102:c.vg=3!=c.vg?3:0;break;case 77:case 109:c.Ig=!c.Ig;console.log("loader state "+c.Ig);break;case 74:case 106:c.Pi=!c.Pi;d=!0;break;case 88:case 120:c.h.Jg=!c.h.Jg;d=!0;break;case 82:case 114:1==this.gj?(this.ce.style.display="none",this.gj=!1):(this.ce.style.display="block",this.gj=!0);this.Gl(!0);break;case 79:case 111:Ea(c.G,!c.G.vm);break;case 76:case 108:this.Si=!this.Si;break;case 90:case 122:c.Eo=!c.Eo;break;case 78:case 110:this.Vm=!this.Vm;break;default:f=
!1}f&&(d=!0)}}if(this.Hk&&this.Si&&!this.li&&!b){f=!0;switch(e){case 43:case 107:null==this.Md&&(this.Md=8);this.Md++;break;case 45:case 109:null==this.Md&&(this.Md=8);this.Md=Math.max(0,this.Md-1);break;case 42:case 106:this.Md=null;break;default:f=!1}f&&(d=!0)}if(this.Hk&&c.ec&&!this.li&&!b){f=!0;switch(e){case 76:case 108:c.Rk=!c.Rk;break;case 80:case 112:c.Vk=!c.Vk;break;case 84:case 116:c.Xk=!c.Xk;break;case 70:case 102:c.Pk=!c.Pk;break;case 68:case 100:c.Ok=!c.Ok;break;case 78:case 110:c.Sk=
!c.Sk;break;case 77:case 109:c.zh=!c.zh;break;case 73:case 105:c.eo=!c.eo;break;case 66:case 98:c.Lk=!c.Lk;break;case 83:case 115:c.Wk=!c.Wk;break;case 67:case 99:c.Nk=!c.Nk;break;case 79:case 111:c.Uk=!c.Uk;break;case 69:case 101:c.Ek=2==c.Ek?3:2;break;case 88:case 120:c.h.Mg=!c.h.Mg;break;case 90:case 122:c.h.bi=!c.h.bi;break;default:f=!1}f&&(d=!0)}}d&&(D(c),this.preventDefault(a))}};function Fa(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].f==b)return c;return-1}
function Ia(a){if(a.u.ma()){var b=a.yb,c="",d;for(d in b)c+='<div class="melown-views-item" id="melown-views-item-'+d+'"><div class="melown-layers-name2">'+d+'</div><button id="melown-views-cbutton-'+d+'" type="button" title="Clone">C</button><button id="melown-views-xbutton-'+d+'" type="button" title="Remove">X</button></div>';a.As.innerHTML=c;for(d in b)b="melown-views-cbutton-"+d,document.getElementById(b).onclick=a.bq.bind(a,d,b,"clone"),b="melown-views-xbutton-"+d,document.getElementById(b).onclick=
a.bq.bind(a,d,b,"remove"),b="melown-views-item-"+d,document.getElementById(b).onclick=a.bk.bind(a,d)}}
m.bk=function(a){if(this.yb[a]){if(this.xb){var b=document.getElementById("melown-views-item-"+this.xb);b&&(b.style.backgroundColor="initial")}b=document.getElementById("melown-views-item-"+a);b.style.backgroundColor="#ddd";this.xb=a;a=this.yb[this.xb].ya;var b="",c=null,d;for(d in a)b+='<div id="melown-surface-item-'+d+'" class="melown-surface-item"><input id="melown-surface-checkbox-'+d+'" type="checkbox"/><span title='+d+">"+d+"</span></div>",null===c&&(c=d);this.zs.innerHTML=b;this.me=c;for(d in a)a[d].Ba&&
(b="melown-surface-checkbox-"+d,document.getElementById(b).checked=!0);for(d in a)b="melown-surface-checkbox-"+d,document.getElementById(b).onchange=this.Eu.bind(this,d,b),b="melown-surface-item-"+d,document.getElementById(b).onclick=this.ak.bind(this,d);this.ak(this.me);d=this.yb[this.xb].X;a="";for(var e in d)a+='<div class="melown-surface-item" id="melown-freelayer-item-'+e+'"><input id="melown-freelayer-checkbox-'+e+'" type="checkbox" '+(d[e].Ba?"checked":"")+"/><span title="+e+">"+e+"</span></div>";
this.ws.innerHTML=a;for(e in d)d="melown-freelayer-checkbox-"+e,document.getElementById(d).onchange=this.Cu.bind(this,e,d),d="melown-freelayer-item-"+e,document.getElementById(d).onclick=this.Tm.bind(this,e);Ja(this)}};m.bq=function(a,b,c){b=this.yb;for(var d in this.yb)if(d==a){switch(c){case "clone":for(d=2;;){if(!b[a+" #"+d]){b[a+" #"+d]=JSON.parse(JSON.stringify(b[a]));break}d++}Ia(this);break;case "remove":c=0;for(d in b)c++;if(1<c)if(delete b[a],Ia(this),this.xb==a)for(d in b){this.bk(d);break}else this.bk(this.xb)}break}};
m.Eu=function(a,b){this.yb[this.xb].ya[a].Ba=document.getElementById(b).checked;Ja(this)};
m.ak=function(a){if(this.me){var b=document.getElementById("melown-surface-item-"+this.me);b.style.backgroundColor="initial"}b=document.getElementById("melown-surface-item-"+a);b.style.backgroundColor="#ddd";this.me=a;a=this.yb[this.xb].ya[this.me].ka;for(var c="",b=0,d=a.length;b<d;b++)var e=a[b],c=c+('<div class="melown-layers-item"><input id="melown-boundlayer-checkbox-'+e.f+'" type="checkbox" '+(e.Ba?"checked":"")+'/><div class="melown-layers-name">'+e.f+'</div><input id="melown-boundlayer-spinner-'+
e.f+'" type="number" title="Alpha" min="0" max="100" step="10" value="'+e.fb+'"><button id="melown-boundlayer-ubutton-'+e.f+'" type="button" title="Move Above">&uarr;</button><button id="melown-boundlayer-dbutton-'+e.f+'" type="button" title="Move Bellow">&darr;</button></div>');this.vs.innerHTML=c;b=0;for(d=a.length;b<d;b++)c="melown-boundlayer-checkbox-"+a[b].f,document.getElementById(c).onchange=this.gk.bind(this,a[b].f,c,"enable"),c="melown-boundlayer-spinner-"+a[b].f,document.getElementById(c).onchange=
this.gk.bind(this,a[b].f,c,"alpha"),c="melown-boundlayer-ubutton-"+a[b].f,document.getElementById(c).onclick=this.gk.bind(this,a[b].f,c,"up"),c="melown-boundlayer-dbutton-"+a[b].f,document.getElementById(c).onclick=this.gk.bind(this,a[b].f,c,"down")};
m.gk=function(a,b,c){b=document.getElementById(b);for(var d=this.yb[this.xb].ya[this.me].ka,e=0,f=d.length;e<f;e++)if(d[e].f==a){switch(c){case "enable":d[e].Ba=b.checked;break;case "alpha":d[e].fb=parseInt(b.value,10);break;case "up":d.splice(Math.max(0,e-1),0,d.splice(e,1)[0]);this.ak(this.me);break;case "down":d.splice(Math.max(0,e+1),0,d.splice(e,1)[0]),this.ak(this.me)}break}Ja(this)};m.Cu=function(a,b){this.yb[this.xb].X[a].Ba=document.getElementById(b).checked;Ja(this)};
m.Tm=function(a){if(this.Me){var b=document.getElementById("melown-freelayer-item-"+this.Me);b.style.backgroundColor="initial"}b=document.getElementById("melown-freelayer-item-"+a);b.style.backgroundColor="#ddd";var c=this.Me=a,d=this.u.ma(),e=this.yb[this.xb],b=e.X[c].ka;a="";if(d&&d.X[c])switch(d.X[c].ub().type){case "mesh":case "mesh-tiles":a+='<div class="melown-layers-item"><div class="melown-layers-name" style="width:185px">DepthShift:</div><input id="melown-fl-properties-depth-shift" type="number" min="-100" max="100" step="1" value="'+
e.X[c].hf+'"></div>';a+='<div class="melown-layers-item"><div class="melown-layers-name">BoundLayers:</div></div>';c=0;for(e=b.length;c<e;c++)d=b[c],a+='<div class="melown-layers-item"><input id="melown-fl-properties-checkbox-'+d.f+'" type="checkbox" '+(d.Ba?"checked":"")+'/><div class="melown-layers-name">'+d.f+'</div><input id="melown-fl-properties-spinner-'+d.f+'" type="number" title="Alpha" min="0" max="100" step="10" value="'+d.fb+'"><button id="melown-fl-properties-ubutton-'+d.f+'" type="button" title="Move Above">&uarr;</button><button id="melown-fl-properties-dbutton-'+
d.f+'" type="button" title="Move Bellow">&darr;</button></div>';this.Mo.innerHTML=a;a="melown-fl-properties-depth-shift";document.getElementById(a).onchange=this.aq.bind(this,a,"depthShift");c=0;for(e=b.length;c<e;c++)a="melown-fl-properties-checkbox-"+b[c].f,document.getElementById(a).onchange=this.hk.bind(this,b[c].f,a,"enable"),a="melown-fl-properties-spinner-"+b[c].f,document.getElementById(a).onchange=this.hk.bind(this,b[c].f,a,"alpha"),a="melown-fl-properties-ubutton-"+b[c].f,document.getElementById(a).onclick=
this.hk.bind(this,b[c].f,a,"up"),a="melown-fl-properties-dbutton-"+b[c].f,document.getElementById(a).onclick=this.hk.bind(this,b[c].f,a,"down");break;case "geodata":case "geodata-tiles":a+='<div class="melown-layers-item"><div class="melown-layers-name" style="width:50px">Style:</div><select id="melown-layers-fl-properties-style">';b=La(d);d=b.indexOf(e.X[c].Qd||e.X[c].Pf);c=0;for(e=b.length;c<e;c++)a+='<option value="'+b[c]+'" '+(c==d?"selected":"")+">"+b[c]+"</option>";this.Mo.innerHTML=a+"</select></div>";
a="melown-layers-fl-properties-style";document.getElementById(a).onchange=this.aq.bind(this,a,"style")}};m.hk=function(a,b,c){b=document.getElementById(b);for(var d=this.yb[this.xb].X[this.Me].ka,e=0,f=d.length;e<f;e++)if(d[e].f==a){switch(c){case "enable":d[e].Ba=b.checked;break;case "alpha":d[e].fb=parseInt(b.value,10);break;case "up":d.splice(Math.max(0,e-1),0,d.splice(e,1)[0]);this.Tm(this.Me);break;case "down":d.splice(Math.max(0,e+1),0,d.splice(e,1)[0]),this.Tm(this.Me)}break}Ja(this)};
m.aq=function(a,b){var c=document.getElementById(a),d=this.yb[this.xb].X[this.Me];switch(b){case "depthShift":d.hf=parseInt(c.value,10);break;case "style":d.Qd=c.value}Ja(this)};
function Ja(a){var b={surfaces:{},freeLayers:{}},c=a.yb[a.xb],d=c.ya,e;for(e in d)if(d[e].Ba){for(var f=[],g=d[e].ka,h=0,k=g.length;h<k;h++)g[h].Ba&&(100>g[h].fb?f.push({id:g[h].f,alpha:(.01*g[h].fb).toFixed(2)}):f.push(g[h].f));b.surfaces[e]=f}c=c.X;for(e in c)if(c[e].Ba){d=[];g=c[e].ka;h=0;for(k=g.length;h<k;h++)g[h].Ba&&(100>g[h].fb?d.push({id:g[h].f,alpha:parseFloat((.01*g[h].fb).toFixed(2))}):d.push(g[h].f));b.freeLayers[e]={};0<d.length&&(b.freeLayers[e].boundLayers=d);c[e].Qd&&c[e].Qd!=c[e].Pf&&
(b.freeLayers[e].style=c[e].Qd);0!=c[e].hf&&(b.freeLayers[e].depthShift=parseFloat((.01*c[e].hf).toFixed(2)))}a.ys.value=JSON.stringify(b,null,"  ");a.xs.value=encodeURIComponent(JSON.stringify(b));(a=a.u.ma())&&a.ve(b)}m.uq=function(){};
m.uq=function(){if(!this.No){this.No=!1;var a=this.u.ma();if(a){var b=Ma(a.Jf),c="--initial--";this.yb[c]={ya:{},X:{},um:JSON.parse(JSON.stringify(a.yg()))};for(var d=0,e=b.length;d<e;d++){var f=b[d];this.yb[f]={ya:{},X:{},um:JSON.parse(JSON.stringify(a.Jf[f].ub()))}}this.xb=c;var b=this.yb,g;for(g in b){for(var f=b[g],h=a.ej(),d=0,e=h.length;d<e;d++){for(var c=h[d],k=a.be(c),l=a.Eh(),n=[],p=0,v=l.length;p<v;p++)n.push({f:l[p],fb:100,Ba:!1});f.ya[c]={Ba:!1,ka:n}}h=a.$i();d=0;for(e=h.length;d<e;d++){c=
h[d];l=a.Eh();n=[];p=0;for(v=l.length;p<v;p++)n.push({f:l[p],fb:100,Ba:!1});p=a.X[c];l=p.ub();f.X[c]={Ba:!1,Qd:null,Pf:l.style,hf:0,ka:n}}var n=f.um.surfaces,u;for(u in n)if(l=n[u],f.ya[u])for(k=f.ya[u],k.Ba=!0,d=0,e=l.length;d<e;d++)"string"===typeof l[d]?(c=Fa(k.ka,l[d]),-1!=c&&k.ka[c]&&(k.ka[c].Ba=!0,k.ka.splice(d,0,k.ka.splice(c,1)[0]))):(c=l[d].id,c=Fa(k.ka,c),-1!=c&&k.ka[c]&&(k.ka[c].Ba=!0,k.ka[c].fb=l[d].alpha?100*parseFloat(l[d].alpha):100,k.ka.splice(d,0,k.ka.splice(c,1)[0])));n=f.um.freeLayers;
for(u in n)if(d=n[u],f.X[u])for(p=f.X[u],p.Ba=!0,p.hf=d.depthShift||0,p.hf*=100,p.Qd=d.style,l=[],p.ka=l,d=0,e=l.length;d<e;d++)"string"===typeof l[d]?(c=Fa(p.ka,l[d]),-1!=c&&p.ka[c]&&(p.ka[c].Ba=!0,p.ka.splice(d,0,p.ka.splice(c,1)[0]))):(c=l[d].id,c=Fa(p.ka,c),-1!=c&&k.ka[c]&&(p.ka[c].Ba=!0,p.ka[c].fb=l[d].alpha?100*parseFloat(l[d].alpha):100,p.ka.splice(d,0,k.ka.splice(c,1)[0])))}}Ia(this);this.bk(this.xb)}};m.ht=function(){var a=this.u.ma();a&&(this.bn.value=Na(a.cf[this.ek.value]))};
m.it=function(){var a=this.u.ma();if(a){var b=JSON.parse(this.bn.value),c=a.cf[this.ek.value];c&&(c.Aa=b);if(c){c.setData(b);for(var d in a.X)(b=a.X[d])&&b.Ka&&b.ud==c&&(b.Qb&&Oa(b.Qb,"setStylesheet",{data:b.ud.Aa,geocent:!Sa(Ta(a))}),b.Zd++)}D(a)}};
function Na(a){if(!a)return"";a=a.Aa;var b;b="{\n";var c=[];a.constants&&c.push("constants");a.bitmaps&&c.push("bitmaps");a.layers&&c.push("layers");for(var d=0,e=c.length;d<e;d++){var f=c[d];b+='  "'+f+'": {\n';var g=a[f],h=[],k;for(k in g)h.push(k);for(var l=0,n=h.length;l<n;l++)if("layers"==f){var p=g[h[l]],v=[],u;for(u in p)v.push(u);b+='    "'+h[l]+'": {\n';for(var q=0,z=v.length;q<z;q++)b+='      "'+v[q]+'": '+JSON.stringify(p[v[q]])+(q==z-1?"":",")+"\n";b+="    }"+(l==n-1?"":",\n")}else b+=
'    "'+h[l]+'": '+JSON.stringify(g[h[l]])+(l==n-1?"":",")+"\n";b+="\n  }"+(d==e-1?"":",\n")}return b+"\n}"}function Ca(a){var b=a.u.ma();if(b){for(var c="",d=La(b),e=0,f=d.length;e<f;e++)c+='<option value="'+d[e]+'">'+d[e]+"</option>";a.ek.innerHTML=c;a.bn.value=Na(b.cf[d[0]])}}m.Gl=function(a){var b=this.u.ma();null!=b&&(b.m.ki=null==a?a:!b.m.ki,Ua(this),Va(this,null,!0))};m.as=function(){this.hj=!this.hj;Ua(this);Va(this)};m.bs=function(){var a=this.u.ma();null!=a&&(Wa(a.m),Va(this,null,!0))};
m.cs=function(){switch(this.Af){case "max":this.Af="120avrg";break;case "120avrg":this.Af="180avrg";break;case "180avrg":this.Af="max"}Ua(this);Va(this)};m.Zr=function(){switch(this.gd){case "Cache":this.gd="Polygons";break;case "Polygons":this.gd="Processing";break;case "Processing":this.gd="LODs";break;case "LODs":this.gd="Flux";break;case "Flux":this.gd="Cache"}Ua(this);Va(this)};
m.$r=function(){this.El=!this.El;1==this.El?(this.Je.style.width="1400px",this.Je.style.height="200px",this.xf.style.width="1400px",this.xf.style.height="200px",document.getElementById("melown-graphs-magnify").innerHTML="Magnify On"):(this.Je.style.width="900px",this.Je.style.height="100px",this.xf.style.width="900px",this.xf.style.height="100px",document.getElementById("melown-graphs-magnify").innerHTML="Magnify Off");Ua(this);Va(this)};
function Ua(a){var b=a.u.ma();if(null!=b){document.getElementById("melown-graphs-rec").innerHTML=1==b.m.ki?"Recording On":"Recording Off";document.getElementById("melown-graphs-ref").innerHTML=1==a.hj?"Refresh On":"Refresh Off";switch(a.Af){case "max":document.getElementById("melown-graphs-zoom").innerHTML="Scale: Max value";break;case "120avrg":document.getElementById("melown-graphs-zoom").innerHTML="Scale: 100% Avrg";break;case "180avrg":document.getElementById("melown-graphs-zoom").innerHTML="Scale: 50% Avrg"}document.getElementById("melown-graphs-graph").innerHTML=
"Graph: "+a.gd}}m.kp=function(a){a=a.clientX-this.Je.getBoundingClientRect().left;this.zf=!0;1==this.El&&(a=Math.floor(900*a/1400));this.yf=a;a=this.u.ma();null!=a&&1!=a.m.ki&&Va(this,null)};m.lp=function(){this.zf=!1;Va(this,null)};
function Va(a,b,c){var d=a.u.ma();if(null!=d&&(0!=a.hj||c)&&0!=a.gj){b=b||d.m;var e=a.Je.width;c=a.Je.height;var f=a.Yr,g=b.jb,h=b.Jh,k=e/g;f.clearRect(0,0,e,c);for(var l=0,n=e=0,p=0,v=0,u=0,q=0,z=b.yl,x=b.Hl,w=b.ul,C=b.tl,B=b.sl,t=0;t<g;t++){var e=e+z[t],n=n+x[t],p=p+w[t],v=v+C[t],u=u+B[t],J=z[t];J>l&&(l=J);0<J&&q++}"120avrg"==a.Af&&(l=e/q*1);"180avrg"==a.Af&&(l=e/q*.5);l=c/l;for(t=0;t<g;t++){var y=h+t,y=y%g;f.fillStyle="#000000";f.fillRect(t*k,c,1,-z[y]*l);f.fillStyle="#ff0000";f.fillRect(t*k,c,
1,-x[y]*l);f.fillStyle="#0000ff";f.fillRect(t*k,c,1,-w[y]*l);q=c-w[y]*l;f.fillStyle="#007700";f.fillRect(t*k,q,1,-C[y]*l);q-=C[y]*l;f.fillStyle="#00ff00";f.fillRect(t*k,q,1,-B[y]*l)}1==a.zf?(f.fillStyle="#aa00aa",y=a.yf%g,f.fillRect(Math.floor(y*k)-1,0,1,c),f.fillRect(Math.floor(y*k)+1,0,1,c),y=(a.yf+h)%g,t="&FilledSmallSquare; Frame: "+z[y].toFixed(2)+' &nbsp <span style="color:#ff0000">&FilledSmallSquare;</span> Render: '+x[y].toFixed(2)+' &nbsp <span style="color:#0000ff">&FilledSmallSquare;</span> Textures: '+
w[y].toFixed(2)+' &nbsp <span style="color:#005500">&FilledSmallSquare;</span> Meshes: '+C[y].toFixed(2)+' &nbsp <span style="color:#00bb00">&FilledSmallSquare;</span> GpuMeshes: '+B[y].toFixed(2)+"</div>"):t="&FilledSmallSquare; Frame: "+Math.round(e)+' &nbsp <span style="color:#ff0000">&FilledSmallSquare;</span> Render: '+Math.round(n)+' &nbsp <span style="color:#0000ff">&FilledSmallSquare;</span> Textures: '+Math.round(p)+' &nbsp <span style="color:#005500">&FilledSmallSquare;</span> Meshes: '+
Math.round(v)+' &nbsp <span style="color:#00bb00">&FilledSmallSquare;</span> GpuMeshes: '+Math.round(u)+"</div>";document.getElementById("melown-graphs-info").innerHTML=t;e=a.xf.width;c=a.xf.height;f=a.Xr;k=e/g;f.clearRect(0,0,e,c);switch(a.gd){case "Cache":l=c/(d.Sb.Oe+d.Jb.Oe+d.zc.Oe);u=v=p=n=d=e=0;z=b.ql;x=b.rl;w=b.Cl;C=b.Al;q=b.zl;B=b.Bl;for(t=0;t<g;t++)e=z[t]>e?z[t]:e,d=x[t]>d?x[t]:d,n=w[t]>n?w[t]:n,p=C[t]>p?C[t]:p,v=q[t]>v?q[t]:v,u=B[t]>u?B[t]:u;for(t=0;t<g;t++)y=h+t,y%=g,b=z[y]+C[y]+w[y]+q[y]+
x[y],f.fillStyle="#000000",f.fillRect(t*k,c,1,-b*l),b-=x[y],f.fillStyle="#0000ff",f.fillRect(t*k,c,1,-b*l),b-=w[y],f.fillStyle="#009999",f.fillRect(t*k,c,1,-b*l),b-=q[y],f.fillStyle="#007700",f.fillRect(t*k,c,1,-b*l),b-=C[y],f.fillStyle="#ff0000",f.fillRect(t*k,c,1,-b*l),b=B[y],f.fillStyle="#ffff00",f.fillRect(t*k,c-b*l,1,1);1==a.zf?(y=(a.yf+h)%g,t='<span style="color:#555">&FilledSmallSquare;</span> Total: '+Math.ceil((z[y]+x[y]+w[y]+C[y])/1048576)+'MB &nbsp <span style="color:#000000">&FilledSmallSquare;</span> CPU: '+
Math.ceil(x[y]/1048576)+'MB &nbsp <span style="color:#000000">&FilledSmallSquare;</span> GPU: '+Math.ceil((w[y]+C[y])/1048576)+'MB &nbsp <span style="color:#0000ff">&FilledSmallSquare;</span> Te: '+Math.ceil(w[y]/1048576)+'MB &nbsp <span style="color:#005500">&FilledSmallSquare;</span> Me: '+Math.ceil(C[y]/1048576)+'MB &nbsp <span style="color:#009999">&FilledSmallSquare;</span> Ge: '+Math.ceil(q[y]/1048576)+'MB &nbsp <span style="color:#ff0000">&FilledSmallSquare;</span> Met: '+Math.ceil(z[y]/1048576)+
'MB &nbsp <span style="color:#ffff00">&FilledSmallSquare;</span> Render: '+Math.ceil(B[y]/1048576)+"MB</div>"):t='<span style="color:#555">&FilledSmallSquare;</span> Total: '+Math.round((e+d+n+p)/1048576)+'MB &nbsp <span style="color:#000000">&FilledSmallSquare;</span> CPU: '+Math.ceil(d/1048576)+'MB &nbsp <span style="color:#000000">&FilledSmallSquare;</span> GPU: '+Math.ceil((n+p)/1048576)+'MB &nbsp <span style="color:#0000ff">&FilledSmallSquare;</span> Te '+Math.ceil(n/1048576)+'MB &nbsp <span style="color:#005500">&FilledSmallSquare;</span> Me: '+
Math.ceil(p/1048576)+'MB &nbsp <span style="color:#009999">&FilledSmallSquare;</span> Ge: '+Math.ceil(v/1048576)+'MB &nbsp <span style="color:#ff0000">&FilledSmallSquare;</span> Met: '+Math.ceil(e/1048576)+'MB &nbsp <span style="color:#ffff00">&FilledSmallSquare;</span> Render: '+Math.ceil(u/1048576)+"MB</div>";break;case "Polygons":case "Processing":C=0;e=99999999999;q=d=0;w="Polygons"==a.gd?b.Fl:b.pl;for(t=0;t<g;t++)C=w[t]>C?w[t]:C,0<w[t]&&(e=w[t]<e?w[t]:e,d+=w[t],q++);l=c/C;for(t=0;t<g;t++)y=h+
t,y%=g,f.fillStyle="#007700",f.fillRect(t*k,c,1,-w[y]*l);1==a.zf?(y=(a.yf+h)%g,t='<span style="color:#007700">&FilledSmallSquare;</span> '+a.gd+" Max: "+Math.round(w[y])+"</div>"):(t='<span style="color:#007700">&FilledSmallSquare;</span> '+a.gd+" Max: "+C+"</div>",t=t+(" &nbsp Min: "+e)+(" &nbsp Avrg: "+Math.round(d/q)+"</div>"));break;case "LODs":C=0;w=b.Dl;for(t=0;t<g;t++)C=w[t][0]>C?w[t][0]:C;l=c/C;f.fillStyle="#000000";f.fillRect(0,0,e,c);for(t=0;t<g;t++)for(y=h+t,y%=g,q=c,C=w[y][1],e=0,d=C.length;e<
d;e++)C[e]&&(f.fillStyle="hsl("+23*e%360+",100%,50%)",b=Math.round(C[e]*l),f.fillRect(t*k,q,1,-b),q-=b);if(1==a.zf)for(y=(a.yf+h)%g,t="LODs:"+w[y][0],C=w[y][1],e=0,d=C.length;e<d;e++)C[e]&&(t+='<span style="color:hsl('+23*e%360+',100%,50%)">&FilledSmallSquare;</span>'+e+":"+C[e]);else t="LODs:"+w[y][0];t+="</div>";break;case "Flux":for(var A=J=y=l=0,K=0,V=0,B=x=z=u=v=p=n=d=0,w=b.xl,C=b.wl,q=b.vl,t=0;t<g;t++)b=w[t][0][0]+C[t][0][0],l=b>l?b:l,b=w[t][1][0]+C[t][1][0],l=b>l?b:l,b=w[t][0][1]+C[t][0][1],
y=b>y?b:y,b=w[t][1][1]+C[t][1][1],y=b>y?b:y,J=w[t][0][0]>J?w[t][0][0]:J,A=w[t][0][1]>A?w[t][0][1]:A,K=w[t][1][0]>K?w[t][1][0]:K,V=w[t][1][1]?w[t][1][1]:V,d=C[t][0][0]>d?C[t][0][0]:d,n=C[t][0][1]>n?C[t][0][1]:n,p=C[t][1][0]>p?C[t][1][0]:p,v=C[t][1][1]>v?C[t][1][1]:v,u=q[t][0][0]>u?q[t][0][0]:u,z=q[t][0][1]>z?q[t][0][1]:z,x=q[t][1][0]>x?q[t][1][0]:x,B=q[t][1][1]>B?q[t][1][1]:B;l=(.25*c-2)/l;b=(.25*c-2)/y;for(var H=Math.floor(.25*c),aa=Math.floor(.75*c),t=0;t<g;t++){var y=h+t,y=y%g,ia=H,W=H+1,U=aa,ba=
aa+1;f.fillStyle="#0000aa";f.fillRect(t*k,ia,1,-w[y][0][0]*l);f.fillRect(t*k,W,1,w[y][1][0]*l);f.fillRect(t*k,U,1,-w[y][0][1]*b);f.fillRect(t*k,ba,1,w[y][1][1]*b);ia-=w[y][0][0]*l;W+=w[y][1][0]*l;U-=w[y][0][1]*b;ba+=w[y][1][1]*b;f.fillStyle="#007700";f.fillRect(t*k,ia,1,-C[y][0][0]*l);f.fillRect(t*k,W,1,C[y][1][0]*l);f.fillRect(t*k,U,1,-C[y][0][1]*b);f.fillRect(t*k,ba,1,C[y][1][1]*b);ia-=C[y][0][0]*l;W+=C[y][1][0]*l;U-=C[y][0][1]*b;ba+=C[y][1][1]*b;f.fillStyle="#009999";f.fillRect(t*k,ia,1,-q[y][0][0]*
l);f.fillRect(t*k,W,1,q[y][1][0]*l);f.fillRect(t*k,U,1,-q[y][0][1]*b);f.fillRect(t*k,ba,1,q[y][1][1]*b);f.fillStyle="#aaaaaa";f.fillRect(0,Math.floor(.5*c),e,1);f.fillStyle="#dddddd";f.fillRect(0,H,e,1);f.fillRect(0,aa,e,1)}1==a.zf?(y=(a.yf+h)%g,t='<span style="color:#007700">&FilledSmallSquare;</span> Textures Count +/-: '+w[y][0][0]+"/"+w[y][1][0],t+=" &nbsp Size +/-: "+(w[y][0][1]/1024/1024).toFixed(2)+"/"+(w[y][1][1]/1024/1024).toFixed(2),t+=' &nbsp <span style="color:#0000aa">&FilledSmallSquare;</span> Meshes Count +/-: '+
C[y][0][0]+"/"+C[y][1][0],t+=" &nbsp Size +/-: "+(C[y][0][1]/1024/1024).toFixed(2)+"/"+(C[y][1][1]/1024/1024).toFixed(2),t+=' &nbsp <span style="color:#009999">&FilledSmallSquare;</span> Geodata Count +/-: '+q[y][0][0]+"/"+q[y][1][0],t+=" &nbsp Size +/-: "+(q[y][0][1]/1024/1024).toFixed(2)+"/"+(q[y][1][1]/1024/1024).toFixed(2)):(t='<span style="color:#007700">&FilledSmallSquare;</span> Textures Count +/-: '+J+"/"+K+(" &nbsp Size +/-: "+(A/1024/1024).toFixed(2)+"/"+(V/1024/1024).toFixed(2)),t=t+(' &nbsp <span style="color:#0000aa">&FilledSmallSquare;</span> Meshes Count +/-: '+
d+"/"+p)+(" &nbsp Size +/-: "+(n/1024/1024).toFixed(2)+"/"+(v/1024/1024).toFixed(2)),t+=' &nbsp <span style="color:#009999">&FilledSmallSquare;</span> Geodata Count +/-: '+u+"/"+x,t+=" &nbsp Size +/-: "+(z/1024/1024).toFixed(2)+"/"+(B/1024/1024).toFixed(2));t+="</div>"}1==a.zf&&(f.fillStyle="#aa00aa",y=a.yf%g,f.fillRect(Math.floor(y*k)-1,0,1,c),f.fillRect(Math.floor(y*k)+1,0,1,c));document.getElementById("melown-graphs-info2").innerHTML=t}}
function Da(a){if(a.u.ma()){for(var b=[["Drawn Tiles",1],["Drawn Tiles - Free Layers",1],["Traced Nodes",1],["Traced Nodes - Free Layers",1],["Load Sequence",2],["Camera",1],["Globe",0]],c="DrawnTiles DrawnTilesFreeLayers TracedNodes TracedNodesFreeLayers LoadSequence Camera Globe".split(" "),d="",e=0,f=b.length;e<f;e++)d+='<div id="melown-replay-item-'+c[e]+'" class="melown-replay-item"><input id="melown-replay-checkbox-'+c[e]+'" type="checkbox"/><span title='+b[e][0]+">"+b[e][0]+"&nbsp;&nbsp;</span>",
0<b[e][1]&&(d+='<input id="melown-replay-sbutton-'+c[e]+'" type="button" value="S"/>'),1<b[e][1]&&(d+='<input id="melown-replay-fbutton-'+c[e]+'" type="button" value="F"/>'),d+="</div>";a.ku.innerHTML=d;e=0;for(f=b.length;e<f;e++)d="melown-replay-checkbox-"+c[e],document.getElementById(d).onchange=a.Du.bind(a,c[e],d),0<b[e][1]&&(d="melown-replay-sbutton-"+c[e],document.getElementById(d).onclick=a.Pm.bind(a,c[e],"S")),1<b[e][1]&&(d="melown-replay-fbutton-"+c[e],document.getElementById(d).onclick=a.Pm.bind(a,
c[e],"F"))}a.te.style.display="block";a.Qm=!0;if(b=a.u.ma())Xa(a,b.w.jd),Za(a)}
m.Kd=function(a,b){if("lod"==a)switch(b){case "up":this.$e.stepUp();this.Wf.value=this.$e.value;break;case "down":this.$e.stepDown();this.Wf.value=this.$e.value;break;default:this.Wf.value=this.$e.value}else switch(b){case "up":this.ue.stepUp();this.Xf.value=this.ue.value;break;case "down":this.ue.stepDown();this.Xf.value=this.ue.value;break;default:this.Xf.value=this.ue.value}var c=this.u.ma();c&&("lod"==a?(c.w.ca=parseFloat(this.Wf.value),c.w.Np=document.getElementById("melown-replay-lod-single").checked):
(c.w.jd=parseFloat(this.Xf.value),c.w.Op=document.getElementById("melown-replay-time-single").checked,Xa(this,c.w.jd),Za(this)),D(c))};m.np=function(a){"lod"==a?this.$e.value=this.Wf.value:this.ue.value=this.Xf.value;var b=this.u.ma();b&&("lod"==a?b.w.ca=parseFloat(this.Wf.value):(b.w.jd=parseFloat(this.Xf.value),Xa(this,b.w.jd),Za(this)),D(b))};
m.Pm=function(a,b){var c=this.u.ma();if(c){switch(a){case "DrawnTiles":c.w.kh=!0;break;case "DrawnTilesFreeLayers":c.w.jh=!0;break;case "TracedNodes":c.w.eg=!0;break;case "TracedNodesFreeLayers":c.w.dg=!0;break;case "LoadSequence":c.w.dk="S"==b;"S"==b?(c.w.jd=0,c.w.kc=[]):(Xa(this,c.w.jd),Za(this));break;case "Camera":var d=c.w.G={Db:c.Db,ba:c.ba.slice(),Bd:c.Bd.slice(),Ji:c.Ji.slice(),Wc:c.Wc},e=this.u.ae();this.u.Zh.uc();var f=d.ba;this.Yj=[f,d.Ji];this.Ye=[[f],[f],[f],[f]];var g=16,h=this.u.ma(),
k,l=h.G;l.ua&&l.update();k=l.Zf;l=r.i.create();r.i.inverse(k,l);this.au=l;k=Math.tan(r.La(h.G.bd()));var n=k*h.G.Vd;k=Math.atan(Math.sqrt(k*k+n*n)/1);for(var n=d.Db/g,p=.5*n*Math.tan(k),v=p*h.G.Vd,u=0;u<g;u++){var q=[-v,-p,-n],z=[v,-p,-n],x=[v,p,-n],w=[-v,p,-n];r.D.scale(q,u+1);r.D.scale(z,u+1);r.D.scale(x,u+1);r.D.scale(w,u+1);r.i.Fa(l,q);r.i.Fa(l,z);r.i.Fa(l,x);r.i.Fa(l,w);r.D.add(q,f);r.D.add(z,f);r.D.add(x,f);r.D.add(w,f);this.Ye[0].push(q);this.Ye[1].push(z);this.Ye[2].push(x);this.Ye[3].push(w)}this.Ze=
[[f],[f],[f],[f]];g=256;n=(d.Db+12742E3*1.1)/g;p=.5*n*Math.tan(k);v=p*h.G.Vd;for(u=0;u<g;u++)q=[-v,-p,-n],z=[v,-p,-n],x=[v,p,-n],w=[-v,p,-n],r.D.scale(q,u+1),r.D.scale(z,u+1),r.D.scale(x,u+1),r.D.scale(w,u+1),r.i.Fa(l,q),r.i.Fa(l,z),r.i.Fa(l,x),r.i.Fa(l,w),r.D.add(q,f),r.D.add(z,f),r.D.add(x,f),r.D.add(w,f),this.Ze[0].push(q),this.Ze[1].push(z),this.Ze[2].push(x),this.Ze[3].push(w);q=[-v,-p,-n];z=[v,-p,-n];x=[v,p,-n];w=[-v,p,-n];r.D.scale(q,g);r.D.scale(z,g);r.D.scale(x,g);r.D.scale(w,g);f=[0,0,0];
d=[f[0],f[1],f[2],q[0],q[1],q[2],z[0],z[1],z[2],f[0],f[1],f[2],z[0],z[1],z[2],x[0],x[1],x[2],f[0],f[1],f[2],x[0],x[1],x[2],w[0],w[1],w[2],f[0],f[1],f[2],w[0],w[1],w[2],q[0],q[1],q[2]];this.cu=e.Ob({blend:!0,zwrite:!1,ztest:!0,culling:!1});this.bu=e.Sn({vertices:d,uvs:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],normals:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]});this.Cp=!0}D(c)}};
m.Du=function(a,b){var c=document.getElementById(b),d=this.u.ma();if(d){switch(a){case "DrawnTiles":d.w.Zk=c.checked;break;case "DrawnTilesFreeLayers":d.w.Qi=c.checked;break;case "TracedNodes":d.w.Tk=c.checked;break;case "TracedNodesFreeLayers":d.w.Qk=c.checked;break;case "LoadSequence":d.w.Ri=c.checked;break;case "Camera":this.Cp||this.Pm("Camera");this.ho=c.checked;break;case "Globe":var e=this.u.cj();this.Dp||(this.Dp=new $a(e.j,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAEACAMAAADyTj5VAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDIxIDc5LjE1NDkxMSwgMjAxMy8xMC8yOS0xMTo0NzoxNiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0Mzk4RkVFMzlGNjUxMUU2OTBDM0I0OEM1NjU0RURBMyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0Mzk4RkVFNDlGNjUxMUU2OTBDM0I0OEM1NjU0RURBMyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQzOThGRUUxOUY2NTExRTY5MEMzQjQ4QzU2NTRFREEzIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQzOThGRUUyOUY2NTExRTY5MEMzQjQ4QzU2NTRFREEzIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5rvbhAAAAAZQTFRFwcHBLS0tMDfv/wAAAiZJREFUeNrs2LENAEEIA0HTf9ME5DTgIZn8ta+TnLjymzuW6kMIwIcQgA8hAAqAAmBdAM4O4E/wBPgQAqAAKAAKgAKgHcDZAegJoAAoAAqAAqAAaAdwdgB6AigACoACoAAoANoBnB2AngAKgAKgACgACoB2AGcHoCeAAqAAKAAKgAKgHcDZAegJoAAoAAqAAqAAaAdwdgB6AigACoACoAAoANoBnB2AngAKgAKgACgACoB2AGcHoCeAAqAAKAAKgAKgHcDZAegJoAAoAAqAAqAAaAdwdgB6AigACoACEIAPIQAfwg7g7AD0BFAAFAAFQAFQALQDODsAPQEUAAVAAVAAFADtAM4OQE8ABUABUAAUAAVAO4CzA9ATQAFQABQABUAB0A7g7AD0BFAAFAAFQAFQALQDODsAPQEUAAVAAVAAFADtAM4OQE8ABUABUAAUAAVAO4CzA9ATQAFQABQABUAB0A7g7AD0BFAAFAAFQAFQALQDODsAPQEUAAVAAVAAFADtAM4OQE8ABSAAH0IAPoQAfAgB0A7g7AD0BFAAFAAFQAFQALQDODsAPQEUAAVAAVAAFADtAM4OQE8ABUABUAAUAAVAO4CzA9ATQAFQABQABUAB0A7g7AD0BFAAFAAFQAFQALQDODsAPQEUAAVAAVAAFADtAM4OQE8ABUABUAAUAAVAO4CzA9ATQAFQABQABUAB0A7g7AD0BFAAFAAFQAFQAPxcAQYAZt2IEFFJhxsAAAAASUVORK5CYII=",
this.u,null,!0));this.io=c.checked;d.w.bo=this.io}D(d)}};
function Za(a){var b,c=a.u.ma();if(c){var d=c.w.kc;b=c.w.jd;a.ue.max=d.length;var e;a.ah.fillStyle="#000000";a.ah.fillRect(0,0,340,30);a.eh.fillStyle="#000000";a.eh.fillRect(0,0,340,30);a.dh.fillStyle="#000000";a.dh.fillRect(0,0,340,30);a.$g.fillStyle="#000000";a.$g.fillRect(0,0,340,30);a.bh.fillStyle="#000000";a.bh.fillRect(0,0,340,30);a.Uf.fillStyle="#000000";a.Uf.fillRect(0,0,340,30);a.Vf.fillStyle="#000000";a.Vf.fillRect(0,0,340,30);for(var f=340*Math.floor(c.w.jd/340),g=f,h=339,f=0;f<h;f++){var k=
d[f+g];if(k){switch(k.Ff){case "mesh":e=a.ah;break;case "texture-in":e=a.eh;break;case "texture-ex":e=a.dh;break;case "geodata":e=a.$g;break;case "metatile":e=a.bh;break;default:continue}var l=Math.round(Math.min(255,60+20*Math.max(1,k.H/300)));e.fillStyle="rgb("+l+","+l+","+l+")";l=k.H/300*30;e.fillRect(f,30,1,-l);l=Math.round(Math.min(255,60+20*Math.max(1,k.pj/300)));a.Uf.fillStyle="rgb("+l+","+l+","+l+")";l=k.pj/300*30;a.Uf.fillRect(f,30,1,-l);a.Vf.fillStyle="rgb(80,80,80)";l=k.Fc/c.h.Yh*30;a.Vf.fillRect(f,
30,1,-l)}}for(var c=Number.MAX_VALUE,n=l=e=0,p=Number.MAX_VALUE,v=0,u=0,q=0,z=Number.MAX_VALUE,x=0,w=0,C=0,B=Number.MAX_VALUE,t=0,J=0,y=0,A=Number.MAX_VALUE,K=0,V=0,H=0,aa=Number.MAX_VALUE,ia=0,W=0,U=0,ba=Number.MAX_VALUE,wa=0,Ka=0,za=0,h=d.length,f=0;f<h;f++)if(k=d[f]){switch(k.Ff){case "mesh":k.H<c&&(c=k.H);k.H>e&&(e=k.H);l+=k.H;n++;break;case "texture-in":k.H<p&&(p=k.H);k.H>v&&(v=k.H);u+=k.H;q++;break;case "texture-ex":k.H<z&&(z=k.H);k.H>x&&(x=k.H);w+=k.H;C++;break;case "geodata":k.H<B&&(B=k.H);
k.H>t&&(t=k.H);J+=k.H;y++;break;case "metatile":k.H<A&&(A=k.H);k.H>K&&(K=k.H);V+=k.H;H++;break;default:continue}k.Fc<aa&&(aa=k.Fc);k.Fc>ia&&(ia=k.Fc);W+=k.Fc;U++;k.Fc<ba&&(ba=k.Fc);k.Fc>wa&&(wa=k.Fc);Ka+=k.Fc;za++}b-=g;a.ah.fillStyle="#ff0000";a.ah.fillRect(b-1,0,1,30);a.ah.fillRect(b+1,0,1,30);a.eh.fillStyle="#ff0000";a.eh.fillRect(b-1,0,1,30);a.eh.fillRect(b+1,0,1,30);a.dh.fillStyle="#ff0000";a.dh.fillRect(b-1,0,1,30);a.dh.fillRect(b+1,0,1,30);a.$g.fillStyle="#ff0000";a.$g.fillRect(b-1,0,1,30);
a.$g.fillRect(b+1,0,1,30);a.bh.fillStyle="#ff0000";a.bh.fillRect(b-1,0,1,30);a.bh.fillRect(b+1,0,1,30);a.Uf.fillStyle="#ff0000";a.Uf.fillRect(b-1,0,1,30);a.Uf.fillRect(b+1,0,1,30);a.Vf.fillStyle="#ff0000";a.Vf.fillRect(b-1,0,1,30);a.Vf.fillRect(b+1,0,1,30);n||(e=c=0);q||(v=p=0);C||(x=z=0);y||(t=B=0);H||(K=A=0);U||(ia=aa=0);za||(wa=ba=0);a.fu.innerHTML="Meshes Min/Max/Avg/Count: "+c.toFixed(0)+"/"+e.toFixed(0)+"/"+(n?l/n:0).toFixed(1)+"/"+n;a.iu.innerHTML="Internal Textures Min/Max/Avg/Count: "+p.toFixed(0)+
"/"+v.toFixed(0)+"/"+(q?u/q:0).toFixed(1)+"/"+q;a.hu.innerHTML="External Textures Min/Max/Avg/Count: "+z.toFixed(0)+"/"+x.toFixed(0)+"/"+(C?w/C:0).toFixed(1)+"/"+C;a.du.innerHTML="Geodata Min/Max/Avg/Count: "+B.toFixed(0)+"/"+t.toFixed(0)+"/"+(y?J/y:0).toFixed(1)+"/"+y;a.gu.innerHTML="Metatiles Min/Max/Avg/Count: "+A.toFixed(0)+"/"+K.toFixed(0)+"/"+(H?V/H:0).toFixed(1)+"/"+H;a.eu.innerHTML="Intervals Min/Max/Avg: "+ba.toFixed(0)+"/"+wa.toFixed(0)+"/"+(za?Ka/za:0).toFixed(1);a.ju.innerHTML="Threads Min/Max/Avg: "+
aa+"/"+ia+"/"+(U?W/U:0).toFixed(1)}}function Xa(a,b){var c=a.u.ma();c&&(c=c.w.kc[b],a.lu.innerHTML=c?"Resource Kind: "+c.Ff+"<br/>Time: "+c.kq.toFixed(2)+"<br/>Duration: "+c.H.toFixed(2)+"<br/>Interval: "+c.pj.toFixed(2)+"<br/>Priority: "+c.Cc.toFixed(2)+"<br/>Threads: "+c.Fc+"<br/>"+c.vd:"")}
function ab(a,b){var c=this.s=a.s;if(null!=c){this.Ch=b;this.R=null;this.R=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,this.R);var d=b?[0,0,0,0,0,1,0,0,1,0,0,2,0,0,2,0,0,3,0,0,3,0,0,0,0,0,4,0,0,5,0,0,5,0,0,6,0,0,6,0,0,7,0,0,7,0,0,4,0,0,0,0,0,4,0,0,1,0,0,5,0,0,2,0,0,6,0,0,3,0,0,7]:[0,0,0,1,0,0,1,0,0,1,1,0,1,1,0,0,1,0,0,1,0,0,0,0,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,1,1,0,0,1,0,0,0,0,0,1,1,0,0,1,0,1,1,1,0,1,1,1,0,1,0,0,1,1];c.bufferData(c.ARRAY_BUFFER,new Float32Array(d),c.STATIC_DRAW);this.R.oa=
3;this.R.ia=d.length/3;this.v=36;this.Ul=this.R.ia/3}}ab.prototype.C=function(){this.s.deleteBuffer(this.R)};ab.prototype.Xa=function(a,b){var c=this.s;if(null!=c){var d=a.getAttribute(b);c.bindBuffer(c.ARRAY_BUFFER,this.R);c.vertexAttribPointer(d,this.R.oa,c.FLOAT,!1,0,0);c.drawArrays(c.LINES,0,this.R.ia)}};
function bb(a,b,c,d){this.Fe=a;this.Wa=null;this.da=b;this.Tn=null;this.Xo=8;this.Vs=new Uint8Array(this.Xo);this.rr=new Uint8Array(this.Xo);this.Un=this.hr=this.Ob({});this.Ho=null==c?!1:c;this.Gq=d?!0:!1}m=bb.prototype;
m.Oc=function(){this.Wa=document.createElement("canvas");if(null!=this.Wa&&(this.Wa.width=this.da[0],this.Wa.height=this.da[1],this.Wa.style.display="block",null!=this.Wa.getContext)){try{this.s=this.Wa.getContext("webgl",{preserveDrawingBuffer:this.Ho,antialias:this.Gq,stencil:!0})||this.Wa.getContext("experimental-webgl",{preserveDrawingBuffer:this.Ho})}catch(a){}this.s&&(this.s.getExtension("OES_standard_derivatives"),this.Fe.appendChild(this.Wa),this.s.xn=this.Wa.width,this.s.wn=this.Wa.height,
this.s.clearColor(0,0,0,1),this.s.enable(this.s.DEPTH_TEST),this.s.viewport(0,0,this.s.xn,this.s.wn),this.s.clear(this.s.COLOR_BUFFER_BIT|this.s.DEPTH_BUFFER_BIT))}};m.C=function(){this.Fe.removeChild(this.Wa);delete this.Wa;this.Wa=null};m.resize=function(a,b){this.da=a;null!=this.Wa&&1!=b&&(this.Wa.width=this.da[0],this.Wa.height=this.da[1]);null!=this.s&&(this.s.xn=this.Wa.width,this.s.wn=this.Wa.height)};function db(a){a.s.viewport(0,0,a.s.xn,a.s.wn)}
m.clear=function(a,b,c){null!=c&&this.s.clearColor(c[0]/255,c[1]/255,c[2]/255,c[3]/255);this.s.clear((b?this.s.COLOR_BUFFER_BIT:0)|(a?this.s.DEPTH_BUFFER_BIT:0))};
m.useProgram=function(a,b,c){if(this.Tn!=a){this.s.useProgram(a.Ya);this.Tn=a;ra(a,"uSampler",0);c&&ra(a,"uSampler2",1);c=this.Vs;for(var d=this.rr,e=0,f=c.length;e<f;e++)c[e]=0;e=0;for(f=b.length;e<f;e++){var g=a.getAttribute(b[e]);-1!=g&&(c[g]=1)}e=0;for(f=c.length;e<f;e++)d[e]!=c[e]&&(c[e]?(this.s.enableVertexAttribArray(e),d[e]=1):(this.s.disableVertexAttribArray(e),d[e]=0))}};
m.bindTexture=function(a,b){0!=a.kc&&(this.s.activeTexture(b?this.s.TEXTURE1:this.s.TEXTURE0),this.s.bindTexture(this.s.TEXTURE_2D,a.N))};r.iv=function(){return!0};function eb(a,b){null!=b?a.s.bindFramebuffer(a.s.FRAMEBUFFER,b.oo):(a.s.bindTexture(a.s.TEXTURE_2D,null),a.s.bindRenderbuffer(a.s.RENDERBUFFER,null),a.s.bindFramebuffer(a.s.FRAMEBUFFER,null))}
bb.prototype.Ob=function(a){null==a.sc&&(a.sc=!1);null==a.bg&&(a.bg=!1);null==a.De&&(a.De=!0);null==a.ff&&(a.ff=!0);null==a.oh&&(a.oh=!1);null==a.Lc&&(a.Lc=!0);return a};
bb.prototype.eb=function(a){var b=this.s,c=this.Un;c.sc!=a.sc&&(1==a.sc?(b.blendEquationSeparate(b.FUNC_ADD,b.FUNC_ADD),b.blendFuncSeparate(b.SRC_ALPHA,b.ONE_MINUS_SRC_ALPHA,b.ONE,b.ONE_MINUS_SRC_ALPHA),b.enable(b.BLEND)):b.disable(b.BLEND));c.bg!=a.bg&&(1==a.bg?b.enable(b.STENCIL_TEST):b.disable(b.STENCIL_TEST));c.De!=a.De&&(1==a.De?b.depthMask(!0):b.depthMask(!1));c.ff!=a.ff&&(0!=a.ff?b.enable(b.DEPTH_TEST):b.disable(b.DEPTH_TEST));c.oh!=a.oh&&(0!=a.oh?b.depthFunc(b.LEQUAL):b.depthFunc(b.LESS));
c.Lc!=a.Lc&&(1==a.Lc?b.enable(b.CULL_FACE):b.disable(b.CULL_FACE));this.Un=a};function fb(a,b,c,d){this.A=null;this.j=a;this.s=a.s;this.u=b;this.Xd=[];this.hh=0;this.Gd=c;this.v=d;this.N=this.Sa=null;this.bl(c,d)}fb.prototype.C=function(){};
fb.prototype.bl=function(a,b){null==a&&(a="Arial, 'Helvetica Neue', Helvetica, sans-serif");null==b&&(b=10);var c=1/512,d=1/512,e=document.createElement("canvas");e.width=512;e.height=512;e=e.getContext("2d");e.beginPath();e.font=b+"pt "+a;e.textAlign="left";e.textBaseline="top";e.fillStyle="#ffffff";e.strokeStyle="#000000";e.lineWidth=5;e.lineCap="round";e.lineJoin="round";var f=Math.round(.5*e.lineWidth),g=e.lineWidth+2,h=g,k=g,l=Math.floor(2.5*e.measureText("e").width);this.Xd=[];this.hh=l;this.v=
b;this.Gd=a;for(var n=[],p=33;191>p;p++)n.push(p);for(p=192;688>p;p++)n.push(p);for(var n=n.concat(32,8230,8216,8217,8218,8219,8220,8221,8222,8242,8243,8252),p=0,v=n.length;p<v;p++){var u=String.fromCharCode(n[p]),q=Math.round(e.measureText(u).width),z=q+e.lineWidth;512<=h+q+g&&(h=g,k+=l+g);e.strokeText(u,h+f,k);e.fillText(u,h+f,k);this.Xd[n[p]]={nn:h*c,sn:k*d,pn:(h+z)*c,tn:(k+l)*d,$l:z,Js:l,cg:z-2};h+=z+g}this.Sa=e.getImageData(0,0,512,512);this.N=new $a(this.j,null);gb(this.N,this.Sa,"linear");
this.N.Ce=512;this.N.Fg=512;this.N.v=1048576};fb.prototype.size=function(){return this.v};function hb(a,b,c,d,e){this.f=a;this.A=null;this.Of=c||[0,0,0];this.j=d;this.s=d.s;this.l=e;this.he=[];this.Xe=0;null!=b&&null!=b[0]&&null!=b[1]&&(this.A=new jb(b[0][0],b[0][1],b[0][2],b[1][0],b[1][1],b[1][2]));this.Yb=this.v=0}
hb.prototype.C=function(){for(var a=0,b=this.he.length;a<b;a++){var c=this.he[a];switch(c.U){case "flat-line":c.R&&this.s.deleteBuffer(c.R);break;case "flat-tline":case "pixel-line":case "pixel-tline":c.R&&this.s.deleteBuffer(c.R);c.lg&&this.s.deleteBuffer(c.lg);break;case "line-label":c.R&&this.s.deleteBuffer(c.R);c.Lb&&this.s.deleteBuffer(c.Lb);break;case "icon":case "label":c.R&&this.s.deleteBuffer(c.R),c.Lb&&this.s.deleteBuffer(c.Lb),c.ef&&this.s.deleteBuffer(c.ef)}}};hb.prototype.size=function(){return this.v};
function kb(a,b){var c=a.s,d=b.vertexBuffer,e=b.normalBuffer,f=b.color,g=1/255,h={};h.U=b.type;h.Ya=b.program;h.Cd=[f[0]*g,f[1]*g,f[2]*g,f[3]*g];h.nh=b["z-index"]+256;h.Kc=b["click-event"];h.Tb=b["hover-event"];h.Gg=b.hitable;h.Ah=b.eventInfo;h.Wi=b["enter-event"];h.vj=b["leave-event"];h.Pd=b.state;h.Wd=b.center;h.ca=b.lod;h.Oo=b["line-width"];h.og=b["zbuffer-offset"];h.Xe=!1;h.ta=!0;if(null!=b.texture){var f=b.texture,k=f[0];h.N=[pb(a.l,k.url,k.filter||"linear",k.tiled||!1),f[1],f[2],f[3],f[4]];
k=b.background;0!=k[3]&&(h.Bn=[k[0]*g,k[1]*g,k[2]*g,k[3]*g])}switch(h.U){case "flat-tline":h.Ya=0!=k[3]?a.l.Nt:a.l.Ot;break;case "pixel-line":h.Ya=a.l.It;break;case "pixel-tline":h.Ya=0!=k[3]?a.l.Pt:a.l.Qt}h.R=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,h.R);c.bufferData(c.ARRAY_BUFFER,d,c.STATIC_DRAW);h.R.oa=4;h.R.ia=d.length/4;h.lg=c.createBuffer();c.bindBuffer(c.ARRAY_BUFFER,h.lg);c.bufferData(c.ARRAY_BUFFER,e,c.STATIC_DRAW);h.lg.oa=4;h.lg.ia=e.length/4;a.he.push(h);a.v+=4*d.length+4*e.length;
a.Yb+=d.length/4}
function qb(a,b,c){var d=a.s,e=b.vertexBuffer,f=b.texcoordsBuffer,g=b.originBuffer,h=b.color,k=b.stick,l=1/255,n={};n.U=c?"label":"icon";n.Ya=b.program;n.Cd=[h[0]*l,h[1]*l,h[2]*l,h[3]*l];n.nh=b["z-index"]+256;n.mh=b.visibility;n.Lc=b.culling;n.Kc=b["click-event"];n.Tb=b["hover-event"];n.Wi=b["enter-event"];n.vj=b["leave-event"];n.Gg=b.hitable;n.Ah=b.eventInfo;n.Pd=b.state;n.Wd=b.center;n.ih=[k[0],k[1],k[2],k[3]*l,k[4]*l,k[5]*l,k[6]*l];n.ca=b.lod;n.og=b["zbuffer-offset"];n.Xe=!1;n.ta=!0;1!=c?(b=b.icon,
n.N=pb(a.l,b.url,b.filter||"linear",b.tiled||!1)):n.N=a.l.Gd.N;n.R=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,n.R);d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW);n.R.oa=4;n.R.ia=e.length/4;n.Lb=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,n.Lb);d.bufferData(d.ARRAY_BUFFER,f,d.STATIC_DRAW);n.Lb.oa=4;n.Lb.ia=f.length/4;n.ef=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,n.ef);d.bufferData(d.ARRAY_BUFFER,g,d.STATIC_DRAW);n.ef.oa=3;n.ef.ia=g.length/3;a.he.push(n);a.v+=4*n.R.ia+4*n.ef.ia+4*n.Lb.ia;a.Yb+=
n.R.ia/4}
hb.prototype.Xa=function(a,b,c){if(null==this.f||!1!==this.l.us[this.f]){if(1==c){c=r.i.create();var d=r.i.create(),e=this.l.sa,f=this.l.Cv[this.f];if(null!=f){var g=f[1],g=[g[0]-e[0],g[1]-e[1],g[2]];r.i.multiply(r.qc(g[0],g[1],g[2]),f[0],d);r.i.multiply(a,d,d)}else g=[this.Of[0]-e[0],this.Of[1]-e[1],this.Of[2]],r.i.multiply(a,r.qc(g[0],g[1],g[2]),d);r.i.multiply(b,d,c);a=d;b=c}c=this.l.ba;for(var d=this.l.Df,e=this.l.Sh,f=this.l.Lf,g=0,h=this.he.length;g<h;g++){var k=this.he[g];if(("icon"==k.U||
"label"==k.U)&&0<k.mh){var l=k.Wd;if(r.D.length([l[0]-c[0],l[1]-c[1],l[2]-c[2]])>k.mh)continue}if(!f||k.Gg)k.Lv=a,k.ei=b,l=k.nh,d[l][e[l]]=k,e[l]++}}};
r.co=function(a,b,c,d,e){var f=d.ei;if(d.ta){if(0!=d.Pd){var g=d.Ah["#id"];if(null!=g&&null!=c.Ub)if(1==d.Pd){if(c.Ub[0]["#id"]==g)return}else{if(c.Ub[0]["#id"]!=g)return}else if(2==d.Pd)return}var h=d.Gg&&c.Lf,g=d.Cd;if(h){var k=c.Oh,g=[(k&255)/255,(k>>8&255)/255,0,0];c.Ph[k]=[d.Ah,d.Wd,d.Kc,d.Tb,d.Wi,d.vj];c.Oh++}switch(d.U){case "flat-line":h?a.eb(r.An):a.eb(r.Ai);a.eb(r.Ai);k=c.Jt;a.useProgram(k,["aPosition"]);rb(k,"uColor",g);ya(k,"uMVP",f,sb(c,d.og));a=k.getAttribute("aPosition");b.bindBuffer(b.ARRAY_BUFFER,
d.R);b.vertexAttribPointer(a,d.R.oa,b.FLOAT,!1,0,0);b.drawArrays(b.TRIANGLES,0,d.R.ia);break;case "flat-tline":case "pixel-line":case "pixel-tline":h?a.eb(r.An):a.eb(r.Ai);var k=d.Ya,l=[0,0,0,0];if("pixel-line"!=d.U){if(h)h=c.mg;else{var n=d.N;if(null==n||null==n[0])break;h=n[0];l=[0,n[1]/n[0].Fg,(n[1]+n[2])/n[0].Fg,0];l[0]="flat-tline"==d.U?1/d.Oo/(h.Ce/n[2]):1/h.Ce/1}if(0==h.kc)break;a.bindTexture(h)}a.useProgram(k,["aPosition","aNormal"]);rb(k,"uColor",g);tb(k,"uScale",e);ya(k,"uMVP",f,sb(c,d.og));
"pixel-line"!=d.U&&(null!=d.Bn&&rb(k,"uColor2",d.Bn),rb(k,"uParams",l),ra(k,"uSampler",0));a=k.getAttribute("aPosition");c=k.getAttribute("aNormal");b.bindBuffer(b.ARRAY_BUFFER,d.R);b.vertexAttribPointer(a,d.R.oa,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,d.lg);b.vertexAttribPointer(c,d.lg.oa,b.FLOAT,!1,0,0);b.drawArrays(b.TRIANGLES,0,d.R.ia);break;case "line-label":h?a.eb(r.yn):a.eb(r.nk);h=h?c.mg:c.Gd.N;k=c.vp;a.bindTexture(h);a.useProgram(k,["aPosition","aTexCoord"]);ra(k,"uSampler",0);ya(k,"uMVP",
f,sb(c,d.og));rb(k,"uVec",c.Pl);rb(k,"uColor",g);a=k.getAttribute("aPosition");c=k.getAttribute("aTexCoord");b.bindBuffer(b.ARRAY_BUFFER,d.R);b.vertexAttribPointer(a,d.R.oa,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,d.Lb);b.vertexAttribPointer(c,d.Lb.oa,b.FLOAT,!1,0,0);b.drawArrays(b.TRIANGLES,0,d.R.ia);break;case "icon":case "label":if(h?a.eb(r.yn):a.eb(r.nk),h=h?c.mg:d.N,0!=h.kc){if(180!=d.Lc){k=d.Wd;l=c.ba;k=[k[0]-l[0],k[1]-l[1],k[2]-l[2]];if(0!=d.mh){l=r.D.length(k);if(l>d.mh)break;l=1/l;k[0]*=
l;k[1]*=l;k[2]*=l}else r.D.normalize(k);d.gp=[0,0,0];r.D.normalize(d.Wd,d.gp);if(-r.D.lf(k,d.gp)<Math.cos(r.La(d.Lc)))break}else if(0!=d.mh&&(k=d.Wd,l=c.ba,k=[k[0]-l[0],k[1]-l[1],k[2]-l[2]],l=r.D.length(k),l>d.mh))break;a.eb(r.nk);l=0;0!=d.ih[0]&&(k=d.ih,l=c.Kn*k[0],l<k[1]?l=0:0!=k[2]&&(n=ub(c,d.Wd,f),n[0]=Math.round(n[0]),c.Fd([[n[0],n[1],n[2]],[n[0],n[1]-l,n[2]]],k[2],[k[3],k[4],k[5],k[6]],null,null,null,!0)));k=c.Ht;a.bindTexture(h);a.useProgram(k,["aPosition","aTexCoord","aOrigin"]);ra(k,"uSampler",
0);ya(k,"uMVP",f,sb(c,d.og));rb(k,"uScale",[e[0],e[1],"label"==d.U?1:1/h.Ce,2*l]);rb(k,"uColor",g);a=k.getAttribute("aPosition");c=k.getAttribute("aTexCoord");e=k.getAttribute("aOrigin");b.bindBuffer(b.ARRAY_BUFFER,d.R);b.vertexAttribPointer(a,d.R.oa,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,d.Lb);b.vertexAttribPointer(c,d.Lb.oa,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,d.ef);b.vertexAttribPointer(e,d.ef.oa,b.FLOAT,!1,0,0);b.drawArrays(b.TRIANGLES,0,d.R.ia)}}}};
function vb(a,b,c,d){this.s=a.s;this.A=b.A;this.gc=c;this.u=d;this.wd=this.xd=this.na=null;performance.now();a=b.V;c=b.wi;d=b.wq;var e=b.gv||3,f=b.bv||2;b=b.av||2;var g=this.s;a&&g&&(this.na=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,this.na),g.bufferData(g.ARRAY_BUFFER,new Float32Array(a),g.STATIC_DRAW),this.na.oa=e,this.na.ia=a.length/e,null!=c&&(this.xd=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,this.xd),g.bufferData(g.ARRAY_BUFFER,new Float32Array(c),g.STATIC_DRAW),this.xd.oa=f,this.xd.ia=
c.length/f),null!=d&&(this.wd=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,this.wd),g.bufferData(g.ARRAY_BUFFER,new Float32Array(d),g.STATIC_DRAW),this.wd.oa=b,this.wd.ia=d.length/b),this.v=this.na.ia*e*4,this.v+=null==c?0:this.xd.ia*f*4,this.v+=null==d?0:this.wd.ia*b*4,this.Yb=this.na.ia/3,this.Ae=!0)}vb.prototype.C=function(){this.s&&this.Ae&&(this.na&&this.s.deleteBuffer(this.na),this.xd&&this.s.deleteBuffer(this.xd),this.wd&&this.s.deleteBuffer(this.wd),this.wd=this.xd=this.na=null)};
vb.prototype.Xa=function(a,b,c,d,e){var f=this.s;null!=f&&this.Ae&&(b=a.getAttribute(b),f.bindBuffer(f.ARRAY_BUFFER,this.na),f.vertexAttribPointer(b,this.na.oa,f.FLOAT,!1,0,0),this.xd&&c&&(c=a.getAttribute(c),f.bindBuffer(f.ARRAY_BUFFER,this.xd),f.vertexAttribPointer(c,this.xd.oa,f.FLOAT,!1,0,0)),this.wd&&d&&(d=a.getAttribute(d),f.bindBuffer(f.ARRAY_BUFFER,this.wd),f.vertexAttribPointer(d,this.wd.oa,f.FLOAT,!1,0,0)),e&&e&&(a=a.getAttribute(e),f.bindBuffer(f.ARRAY_BUFFER,r.pg),f.vertexAttribPointer(a,
r.pg.oa,f.FLOAT,!1,0,0)),f.drawArrays(f.TRIANGLES,0,this.na.ia))};vb.prototype.size=function(){return this.v};function wb(a,b,c,d,e,f){this.A=null;this.j=a;this.s=a.s;this.u=b;performance.now();null!=this.s&&(this.V=[],this.na=null,this.Ul=c,this.sj=e,this.rj=f,this.mm=d,this.Oc())}m=wb.prototype;m.C=function(){this.s.deleteBuffer(this.na)};
m.Oc=function(){if(this.Ul){this.sj&&xb(this,0,this.rj);for(var a=0;a<this.mm;a++){var b=a,c=a+1,d=this.V.length;this.V[d]=b;this.V[d+1]=c;this.V[d+2]=1;this.V[d+3]=b;this.V[d+4]=c;this.V[d+5]=-1;this.V[d+6]=c;this.V[d+7]=b;this.V[d+8]=1;this.V[d+9]=b;this.V[d+10]=c;this.V[d+11]=1;this.V[d+12]=c;this.V[d+13]=b;this.V[d+14]=1;this.V[d+15]=c;this.V[d+16]=b;this.V[d+17]=-1;this.Yb+=2;this.sj&&xb(this,a+1,this.rj)}}else if(this.sj)for(a=0;a<=this.mm;a++)xb(this,a,this.rj);this.compile()};
function xb(a,b,c){var d=a.V.length,e=2*Math.PI/c;for(i=0;i<c;i++)a.V[d]=b,a.V[d+1]=-1,a.V[d+2]=0,a.V[d+3]=b,a.V[d+4]=-2,a.V[d+5]=e*i,a.V[d+6]=b,a.V[d+7]=-2,a.V[d+8]=e*(i+1),d+=9;a.Yb+=c}m.compile=function(){var a=this.s;this.na=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,this.na);a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.V),a.STATIC_DRAW);this.na.oa=3;this.na.ia=this.V.length/3;this.v=24*this.na.ia;this.Yb=this.na.ia/3};
m.Xa=function(a,b,c){var d=this.s;null==d||null==this.na||c>this.mm||(a=a.getAttribute(b),d.bindBuffer(d.ARRAY_BUFFER,this.na),d.vertexAttribPointer(a,this.na.oa,d.FLOAT,!1,0,0),a=0,this.Ul&&(a+=6*(c-1)),this.sj&&(a+=3*c*this.rj),d.drawArrays(d.TRIANGLES,0,a))};m.size=function(){return this.v};function Bb(a,b,c){this.j=a;this.s=a.s;this.Ya=null;this.qn=[];this.sk=[];this.Ms=new Float32Array(16);this.createProgram(b,c)}
Bb.prototype.createShader=function(a,b){var c=this.s;if(!a||!c)return null;var d;d=1!=b?c.createShader(c.FRAGMENT_SHADER):c.createShader(c.VERTEX_SHADER);c.shaderSource(d,a);c.compileShader(d);return c.getShaderParameter(d,c.COMPILE_STATUS)?d:(alert("An error occurred compiling the shaders: "+c.getShaderInfoLog(d)),null)};
Bb.prototype.createProgram=function(a,b){var c=this.s;if(null!=c){var d=this.createShader(a,!0),e=this.createShader(b,!1),f=c.createProgram();c.attachShader(f,d);c.attachShader(f,e);c.linkProgram(f);c.getProgramParameter(f,c.LINK_STATUS)||alert("Unable to initialize the shader program.");c.useProgram(f);this.Ya=f}};function ra(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniform1i(a,c))}
function ya(a,b,c,d){var e=a.s;null!=e&&null!=a.Ya&&(b=a.getUniform(b),null!=b&&(d?(d=1+d,a=a.Ms,a[0]=c[0],a[1]=c[1],a[2]=c[2]*d,a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6]*d,a[7]=c[7],a[8]=c[8]*d,a[9]=c[9]*d,a[10]=c[10]*d,a[11]=c[11]*d,a[12]=c[12],a[13]=c[13],a[14]=c[14]*d,a[15]=c[15],e.uniformMatrix4fv(b,!1,a)):e.uniformMatrix4fv(b,!1,c)))}function Cb(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniformMatrix3fv(a,!1,c))}
function tb(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniform2fv(a,c))}function Db(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniform3fv(a,c))}function rb(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniform4fv(a,c))}function Eb(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniform1f(a,c))}function Fb(a,b,c){var d=a.s;null!=d&&null!=a.Ya&&(a=a.getUniform(b),null!=a&&d.uniform1fv(a,c))}
Bb.prototype.getAttribute=function(a){var b=this.s;if(null!=b&&null!=this.Ya)return null==this.sk[a]?(b=b.getAttribLocation(this.Ya,a),this.sk[a]=b):this.sk[a]};Bb.prototype.getUniform=function(a){var b=this.s;if(null!=b&&null!=this.Ya)return null==this.qn[a]?(b=b.getUniformLocation(this.Ya,a),this.qn[a]=b):this.qn[a]};r.Pq="attribute vec3 aPosition;\nuniform mat4 uMVP;\nvoid main(){ \ngl_Position = uMVP * vec4(aPosition, 1.0);\n}";r.Lq="attribute vec3 aPosition;\nuniform mat4 uMVP;\nuniform float uPoints[8*3];\nvoid main(){ \nint index = int(aPosition.z) * 3; \ngl_Position = uMVP * vec4(uPoints[index], uPoints[index+1], uPoints[index+2], 1.0);\n}";
r.Cn="precision mediump float;\nvoid main() {\ngl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);\n}";r.Gs="attribute vec3 aPosition;\nuniform mat4 uMVP;\nvoid main(){ \ngl_Position = uMVP * vec4(aPosition, 1.0);\n}";r.Fs="precision mediump float;\nuniform vec4 uColor;\nvoid main() {\ngl_FragColor = uColor;\n}";r.Cs="attribute vec4 aPosition;\nattribute vec4 aNormal;\nuniform mat4 uMVP;\nuniform vec2 uScale;\nvoid main(){ \nvec4 pp0 = (uMVP * vec4(aPosition.xyz, 1.0));\nif (aNormal.w == 0.0) {\ngl_Position = pp0 + vec4((vec3(aNormal.x*uScale.x*pp0.w, aNormal.y*uScale.y*pp0.w, 0.0)), 0.0);\n} else {\nvec2 pp1 = pp0.xy / pp0.w;\nvec4 pp3 = (uMVP * vec4(aNormal.xyz, 1.0));\nvec2 pp2 = pp3.xy / pp3.w;\nvec2 n = normalize(pp2 - pp1);\ngl_Position = pp0 + vec4((vec3(-n.y*uScale.x*aNormal.w*pp0.w, n.x*uScale.y*aNormal.w*pp0.w, 0.0)), 0.0);\n}\n}";
r.Bs="precision mediump float;\nuniform vec4 uColor;\nvoid main() {\ngl_FragColor = uColor;\n}";r.Es="attribute vec3 aPosition;\nuniform mat4 uMVP;\nuniform vec3 uScale;\nuniform vec3 uPoints[32];\nvoid main(){ \nvec4 pp0 = (uMVP * vec4(uPoints[int(aPosition.x)], 1.0));\nif (aPosition.y < 0.0) {\nif (aPosition.y == -1.0) {\ngl_Position = pp0;\n} else {\ngl_Position = pp0 + vec4((vec3(-sin(aPosition.z)*uScale.x*uScale.z, cos(aPosition.z)*uScale.y*uScale.z, 0.0)), 0.0);\n}\n} else {\nvec2 pp1 = pp0.xy / pp0.w;\nvec4 pp3 = (uMVP * vec4(uPoints[int(aPosition.y)], 1.0));\nvec2 pp2 = pp3.xy / pp3.w;\nvec2 n = normalize(pp2 - pp1);\ngl_Position = pp0 + vec4((vec3(-n.y*uScale.x*aPosition.z*uScale.z, n.x*uScale.y*aPosition.z*uScale.z, 0.0)), 0.0);\n}\n}";
r.Ds="precision mediump float;\nuniform vec4 uColor;\nvoid main() {\ngl_FragColor = uColor;\n}";r.mq="attribute vec4 aPosition;\nattribute vec4 aNormal;\nuniform mat4 uMVP;\nuniform vec2 uScale;\nuniform vec4 uParams;\nvarying vec2 vTexCoord;\nvoid main(){ \nvec4 p=vec4(aPosition.xyz, 1.0);\np.xy+=aNormal.xy;\nif (aNormal.w == 0.0){\nfloat tcy=(uParams[1]+uParams[2])*0.5;\nfloat tdy=uParams[1]-tcy;\nfloat ty=(aNormal.x == 0.0 && aNormal.y == 0.0)?tcy:tcy+tdy*cos(aNormal.z);\nvTexCoord=vec2(abs(aPosition.w)*uParams[0], ty);\n} else {\nvTexCoord=vec2(abs(aPosition.w)*uParams[0], aPosition.w < 0.0 ? uParams[1] : uParams[2]);\n}\ngl_Position = uMVP * p;\n}";
r.rq="attribute vec4 aPosition;\nattribute vec4 aNormal;\nuniform mat4 uMVP;\nuniform vec2 uScale;\nuniform vec4 uParams;\nvarying vec2 vTexCoord;\nvoid main(){ \nvec4 pp0 = (uMVP * vec4(aPosition.xyz, 1.0));\nvTexCoord=vec2(abs(aPosition.w)*uParams[0], aPosition.w < 0.0 ? uParams[1] : uParams[2]);\nif (aNormal.w == 0.0) {\ngl_Position = pp0 + vec4((vec3(aNormal.x*uScale.x*pp0.w, aNormal.y*uScale.y*pp0.w, 0.0)), 0.0);\n} else {\nvec2 pp1 = pp0.xy / pp0.w;\nvec4 pp3 = (uMVP * vec4(aNormal.xyz, 1.0));\nvec2 pp2 = pp3.xy / pp3.w;\nvec2 n = normalize(pp2 - pp1);\ngl_Position = pp0 + vec4((vec3(-n.y*uScale.x*aNormal.w*pp0.w, n.x*uScale.y*aNormal.w*pp0.w, 0.0)), 0.0);\n}\n}";
r.lq="precision mediump float;\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform vec4 uColor2;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 c=texture2D(uSampler, vTexCoord)*uColor;\ngl_FragColor = c;\n}";r.cq="precision mediump float;\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform vec4 uColor2;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 c=texture2D(uSampler, vTexCoord)*uColor;\nvec4 c2=uColor2;\nc.xyz*=c.w; c2.xyz*=c2.w;\nc=mix(c,c2,1.0-c.w);\nc.xyz/=(c.w+0.00001);\ngl_FragColor = c;\n}";
r.Bt="attribute vec3 aPosition;\nattribute vec3 aNormal;\nuniform mat4 uMVP;\nuniform mat4 uRot;\nuniform vec4 uColor;\nvarying vec4 vColor;\nvoid main(){ \nfloat l = dot((uRot*vec4(aNormal,1.0)).xyz, vec3(0.0,0.0,1.0)) * 0.5;\nvec3 c = uColor.xyz;\nc = (l > 0.0) ? mix(c,vec3(1.0,1.0,1.0),l) : mix(vec3(0.0,0.0,0.0),c,1.0+l);\nvColor = vec4(c, uColor.w);\ngl_Position = uMVP * vec4(aPosition, 1.0);\n}";r.At="precision mediump float;\nvarying vec4 vColor;\nvoid main() {\ngl_FragColor = vColor;\n}";
r.Gu="attribute vec4 aPosition;\nattribute vec4 aTexCoord;\nuniform mat4 uMVP;\nuniform vec4 uVec;\nvarying vec2 vTexCoord;\nvoid main(){ \nvTexCoord = aTexCoord.xy;\nif (dot(uVec.xyz, vec3(aTexCoord.z, aTexCoord.w, aPosition.w)) < 0.0) {\ngl_Position = uMVP * vec4(2.0, 0.0, 0.0, 1.0);\n}else{\ngl_Position = uMVP * vec4(aPosition.xyz, 1.0);\n}\n}";r.Hu="attribute vec3 aPosition;\nattribute vec4 aTexCoord;\nuniform mat4 uMVP;\nuniform vec4 uPosition;\nuniform float uDepth;\nvarying vec2 vTexCoord;\nvoid main(){ \nvTexCoord = aTexCoord.xy;\ngl_Position = uMVP*vec4(aPosition[0]+uPosition[0],-aPosition[1]+uPosition[1],uPosition[2],1.0);\n}";
r.ms="attribute vec4 aPosition;\nattribute vec4 aTexCoord;\nattribute vec3 aOrigin;\nuniform mat4 uMVP;\nuniform vec4 uScale;\nvarying vec2 vTexCoord;\nvoid main(){ \nvTexCoord = aTexCoord.xy * uScale[2];\nvec4 pos = (uMVP * vec4(aOrigin, 1.0));\ngl_Position = pos + vec4(aPosition.x*uScale.x*pos.w, (aPosition.y+uScale.w)*uScale.y*pos.w, 0.0, 0.0);\n}";r.dn="precision mediump float;\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 c=texture2D(uSampler, vTexCoord);\nif(c.w < 0.01){ discard; }\ngl_FragColor = c*uColor;\n}";
r.Qp="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMVP;\nvarying vec2 vTexCoord;\nvoid main(){ \ngl_Position = uMVP * vec4(aPosition, 1.0);\nvTexCoord = aTexCoord;\n}";r.vu="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nconst vec4 gray = vec4(0.125, 0.125, 0.125, 1.0);\nvoid main() {\nfloat fade = smoothstep(0.51, 0.55, vTexCoord.t);\ngl_FragColor = mix(texture2D(uSampler, vTexCoord), gray, fade);\n}";r.yu="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uSampler, vTexCoord);\n}";
r.Jq="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform mat3 uNorm;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nvoid main(){ \nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nvec4 c = uMV * vec4(aPosition, 1.0);\nvNormal = (aPosition.xyz - vec3(0.5));\nvPosition = camSpacePos;\n}";r.Hq="precision mediump float;\nuniform sampler2D uSampler;\nuniform vec4 uParams;\nuniform vec4 uParams2;\nvarying vec4 vPosition;\nvarying vec3 vNormal;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nconst vec4 fogColor2 = vec4(72.0/255.0, 154.0/255.0, 255.0/255.0, 1.0);\nvoid main() {\nfloat l = dot(normalize(vNormal),-uParams2.xyz);\nl = (1.0-pow(abs(l),uParams.x));\nvec4 c = vec4(mix(fogColor2.xyz, fogColor.xyz, l), l);\ngl_FragColor = c;\n}";
r.ov="precision mediump float;\nuniform sampler2D uSampler;\nuniform float uNFactor;\nuniform vec2 uRadius;\nuniform vec3 uPos;\nvarying vec4 vPosition;\nvarying vec3 vNormal;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec3 ldir = normalize(-vPosition.xyz);\nvec3 diff = uPos;\nfloat a = dot(ldir, ldir);\nfloat b = 2 * dot(ldir, diff);\nfloat c = dot(diff, diff) - (uRadius[0] * uRadius[0]);\nfloat i = 0;\nfloat discr = b * b - 4 * a * c;\nif (discr > 0.0) {}\n}\ngl_FragColor = fogColor;\n}";
r.Kq="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform vec4 uParams;\nuniform vec4 uParams2;\nvarying vec2 vTexcoords;\nvoid main(){ \ngl_Position = uProj * (uMV * vec4(aPosition, 1.0));\nvec3 position = (aPosition.xyz - vec3(0.5)) * vec3(uParams.w * 2.0);\nvec4 camPos = uParams2;\nfloat SurfaceRadius = uParams.x;\nfloat AtmosphereRadius = uParams.y;\nfloat StretchAmt = uParams.z;\nfloat camHeight = length(camPos.xyz);\nvec3 camToPos = position - camPos.xyz;\nfloat farDist = length(camToPos);\nfloat altitude = max(0.0,camHeight - SurfaceRadius);\nfloat horizonDist = sqrt((altitude*altitude) + (2.0 * SurfaceRadius * altitude));\nfloat maxDot = horizonDist / camHeight;\naltitude = max(0.0,camHeight - AtmosphereRadius);\nhorizonDist = sqrt((altitude*altitude) + (2.0 * AtmosphereRadius * altitude));\nfloat tweakAmount = 0.1;\nfloat minDot = max(tweakAmount,horizonDist / camHeight);\nfloat minDot2 = ((camHeight - SurfaceRadius) * (1.0 / (AtmosphereRadius  - SurfaceRadius))) - (1.0 - tweakAmount);\nminDot = min(minDot, minDot2);\nfloat posDot = dot(camToPos / farDist,-camPos.xyz / camHeight) - minDot;\nfloat height = posDot * (1.0 / (maxDot - minDot));\nvTexcoords.y = height;\nheight -= min(0.0,minDot2 + ((1.0 + StretchAmt) * minDot2));\nvTexcoords.x = height;\n}";
r.Iq="precision mediump float;\nvarying vec2 vTexcoords;\nuniform vec4 uParams3;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nconst vec4 fogColor2 = vec4(72.0/255.0, 154.0/255.0, 255.0/255.0, 1.0);\nconst vec4 fogColor3 = vec4(0.0/255.0, 0.0/255.0, 0.0/255.0, 1.0);\nvoid main() {\nfloat l = vTexcoords.y;\nif (l > uParams3.z){ discard; } else {\nfloat l2 = clamp((l*l)*0.9+0.1, 0.0, 1.5);\ngl_FragColor = vec4(mix(fogColor2.xyz, fogColor.xyz, l2), l);\nif (l > uParams3.x){ gl_FragColor.xyz = mix(gl_FragColor.xyz, fogColor3.xyz, (l-uParams3.x)*uParams3.y); }\n}}";
r.ks="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nuniform mat4 uGridMat;\nuniform float uGridStep1, uGridStep2;\nconst int HMSize = 5;\nconst float HMSize1 = float(HMSize-1);\nuniform float uHeight[HMSize*HMSize];\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nfloat round(float x) { return floor(x + 0.5); }\nvoid main() {\nvec3 pos = aPosition;\nfloat z = uHeight[int(round(pos.y*HMSize1)*float(HMSize) + round(pos.x*HMSize1))];\nvec4 camSpacePos = uMV * vec4(pos.xy, z, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvec4 gridCoord = uGridMat * vec4(pos, 1.0);\nvTexCoord1 = aTexCoord;\nvTexCoord1 = gridCoord.xy * vec2(uGridStep1);\nvTexCoord2 = gridCoord.xy * vec2(uGridStep2);\n}";
r.js="precision mediump float;\nuniform sampler2D uSampler;\nuniform float uGridBlend;\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec4 gridColor = mix(texture2D(uSampler, vTexCoord1), texture2D(uSampler, vTexCoord2), uGridBlend);\ngl_FragColor = mix(fogColor, gridColor, vFogFactor);\n}";r.hs="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nuniform mat4 uGridMat;\nuniform float uGridStep1, uGridStep2;\nconst int HMSize = 5;\nconst float HMSize1 = float(HMSize-1);\nuniform float uHeight[HMSize*HMSize];\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vDepth;\nfloat round(float x) { return floor(x + 0.5); }\nvoid main() {\nvec3 pos = aPosition;\nfloat z = uHeight[int(round(pos.y*HMSize1)*float(HMSize) + round(pos.x*HMSize1))];\nvec4 camSpacePos = uMV * vec4(pos.xy, z, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvDepth = camDist;\nvec4 gridCoord = uGridMat * vec4(pos, 1.0);\nvTexCoord1 = aTexCoord;\nvTexCoord1 = gridCoord.xy * vec2(uGridStep1);\nvTexCoord2 = gridCoord.xy * vec2(uGridStep2);\n}";
r.gs="precision mediump float;\nuniform sampler2D uSampler;\nuniform float uGridBlend;\nvarying vec2 vTexCoord1;\nvarying vec2 vTexCoord2;\nvarying float vDepth;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\ngl_FragColor = fract(vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0) * vDepth) + (-0.5/255.0);\n}";r.vt="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform vec4 uParams;\nuniform vec4 uParams3;\nuniform float uPoints[9*3];\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nvec3 quadPoint(int i1, int i2, int i3, float t, float t2) {\nfloat p1x = uPoints[i1], p1y = uPoints[i1+1], p1z = uPoints[i1+2];\nfloat p3x = uPoints[i3], p3y = uPoints[i3+1], p3z = uPoints[i3+2];\nfloat p2x = 2.0*uPoints[i2]-p1x*0.5-p3x*0.5;\nfloat p2y = 2.0*uPoints[i2+1]-p1y*0.5-p3y*0.5;\nfloat p2z = 2.0*uPoints[i2+2]-p1z*0.5-p3z*0.5;\nreturn vec3(t2*t2*p1x+2.0*t2*t*p2x+t*t*p3x, t2*t2*p1y+2.0*t2*t*p2y+t*t*p3y, t2*t2*p1z+2.0*t2*t*p2z+t*t*p3z); }\nvoid main() {\nvec3 indices = aPosition;\nfloat t = aPosition.y * uParams[2];\nfloat t2 = (1.0-t);\nvec3 p1 = quadPoint(0, 3, 6, t, t2);\nvec3 p2 = quadPoint(9, 9+3, 9+6, t, t2);\nvec3 p3 = quadPoint(18, 18+3, 18+6, t, t2);\nt = aPosition.x * uParams[2];\nt2 = (1.0-t);\nfloat p2x = 2.0*p2.x-p1.x*0.5-p3.x*0.5;\nfloat p2y = 2.0*p2.y-p1.y*0.5-p3.y*0.5;\nfloat p2z = 2.0*p2.z-p1.z*0.5-p3.z*0.5;\nvec4 p = vec4(t2*t2*p1.x+2.0*t2*t*p2x+t*t*p3.x, t2*t2*p1.y+2.0*t2*t*p2y+t*t*p3.y, t2*t2*p1.z+2.0*t2*t*p2z+t*t*p3.z, 1);\nvec4 camSpacePos = uMV * p;\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uParams[1] * camDist);\nvec2 uv = aTexCoord;\nuv.x = uv.x * uParams3[2] + uParams3[0];\nuv.y = uv.y * uParams3[3] + uParams3[1];\nvTexCoord = uv;\n}";
r.st="precision mediump float;\nuniform sampler2D uSampler;\nuniform vec4 uParams2;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec4 c = mix(texture2D(uSampler, vTexCoord), texture2D(uSampler, vTexCoord*8.0), uParams2[2]);\ngl_FragColor = mix(fogColor, c, vFogFactor);\n}";r.ut="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform vec4 uParams;\nuniform vec4 uParams3;\nuniform float uPoints[9*3];\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nvec3 quadPoint(int i1, int i2, int i3, float t, float t2) {\nfloat p1x = uPoints[i1], p1y = uPoints[i1+1], p1z = uPoints[i1+2];\nfloat p3x = uPoints[i3], p3y = uPoints[i3+1], p3z = uPoints[i3+2];\nfloat p2x = 2.0*uPoints[i2]-p1x*0.5-p3x*0.5;\nfloat p2y = 2.0*uPoints[i2+1]-p1y*0.5-p3y*0.5;\nfloat p2z = 2.0*uPoints[i2+2]-p1z*0.5-p3z*0.5;\nreturn vec3(t2*t2*p1x+2.0*t2*t*p2x+t*t*p3x, t2*t2*p1y+2.0*t2*t*p2y+t*t*p3y, t2*t2*p1z+2.0*t2*t*p2z+t*t*p3z); }\nvoid main() {\nvec3 indices = aPosition;\nfloat t = aPosition.y * uParams[2];\nfloat t2 = (1.0-t);\nvec3 p1 = quadPoint(0, 3, 6, t, t2);\nvec3 p2 = quadPoint(9, 9+3, 9+6, t, t2);\nvec3 p3 = quadPoint(18, 18+3, 18+6, t, t2);\nt = aPosition.x * uParams[2];\nt2 = (1.0-t);\nfloat p2x = 2.0*p2.x-p1.x*0.5-p3.x*0.5;\nfloat p2y = 2.0*p2.y-p1.y*0.5-p3.y*0.5;\nfloat p2z = 2.0*p2.z-p1.z*0.5-p3.z*0.5;\nvec4 p = vec4(t2*t2*p1.x+2.0*t2*t*p2x+t*t*p3.x, t2*t2*p1.y+2.0*t2*t*p2y+t*t*p3.y, t2*t2*p1.z+2.0*t2*t*p2z+t*t*p3.z, 1);\nvec4 camSpacePos = uMV * p;\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uParams[1] * camDist);\nvec2 uv = aTexCoord;\nuv.x = uv.x * uParams3[2] + uParams3[0];\nuv.y = uv.y * uParams3[3] + uParams3[1];\nvTexCoord = uv;\nvTexCoord2 = p.xy;\n}";
r.rt="precision mediump float;\nuniform sampler2D uSampler;\nuniform vec4 uParams2;\nuniform vec4 uParams4;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nif (length(uParams4.xy - vTexCoord2.xy) > uParams4.z){ discard; }vec4 c = mix(texture2D(uSampler, vTexCoord), texture2D(uSampler, vTexCoord*8.0), uParams2[2]);\ngl_FragColor = mix(fogColor, c, vFogFactor);\n}";r.Su="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uMV, uProj;\nuniform vec4 uParams;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uParams[1] * camDist);\nvTexCoord = aTexCoord;\n}";
r.Pu="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\ngl_FragColor = mix(fogColor, texture2D(uSampler, vTexCoord), vFogFactor);\n}";r.eq="attribute vec3 aPosition;\nattribute vec2 aTexCoord2;\nuniform mat4 uMV, uProj;\nuniform vec4 uParams;\nuniform vec4 uTransform;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uParams[1] * camDist);\nvTexCoord = vec2(uTransform[0] * aTexCoord2[0] + uTransform[2], uTransform[1] * aTexCoord2[1] + uTransform[3]);\n}";
r.Ju="precision mediump float;\nuniform sampler2D uSampler;\nuniform float uAlpha;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec4 c = texture2D(uSampler, vTexCoord);\ngl_FragColor = mix(fogColor, c, vFogFactor);\ngl_FragColor[3] = c.w * uAlpha;\n}";r.Ku="precision mediump float;\nuniform sampler2D uSampler;\nuniform sampler2D uSampler2;\nuniform float uAlpha;\nvarying vec2 vTexCoord;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec4 c = texture2D(uSampler, vTexCoord);\nvec4 c2 = texture2D(uSampler2, vTexCoord);\ngl_FragColor = mix(fogColor, c, vFogFactor);\ngl_FragColor[3] = c.w * uAlpha * c2.x;\n}";
r.xr="attribute vec3 aPosition;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\n}";r.wr="precision mediump float;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\ngl_FragColor = vec4(fogColor.xyz, 1.0-vFogFactor);\n}";
r.gq="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nattribute vec3 aNormal;\nuniform mat4 uMV, uProj;\nuniform mat3 uNorm;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvarying vec3 vNormal;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord;\nvPosition = camSpacePos;\nvNormal = aNormal * uNorm;\n}";
r.Ru="precision mediump float;\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvarying vec3 vNormal;\nuniform mat4 uMaterial;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec3 ldir = normalize(-vPosition.xyz);\nvec3 normal = normalize(vNormal);\nvec3 eyeDir = ldir;\nvec3 refDir = reflect(-ldir, normal);\nfloat specW = pow(max(dot(refDir, eyeDir), 0.0), uMaterial[3][0]);\nfloat diffW = max(dot(normal, ldir), 0.0);\nvec4 lcolor = uMaterial[0]+(uMaterial[1]*diffW)+(uMaterial[2]*specW);\nvec4 tcolor = texture2D(uSampler, vTexCoord);\ngl_FragColor = mix(fogColor, vec4(lcolor.xyz*(1.0/255.0), 1.0) * tcolor, vFogFactor);\n}";
r.Qu="precision mediump float;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;\nvarying vec3 vNormal;\nuniform mat4 uMaterial;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nvoid main() {\nvec3 ldir = normalize(-vPosition.xyz);\nvec3 normal = normalize(vNormal);\nvec3 eyeDir = ldir;\nvec3 refDir = reflect(-ldir, normal);\nfloat specW = pow(max(dot(refDir, eyeDir), 0.0), uMaterial[3][0]);\nfloat diffW = max(dot(normal, ldir), 0.0);\nvec4 lcolor = uMaterial[0]+(uMaterial[1]*diffW)+(uMaterial[2]*specW);\ngl_FragColor = mix(fogColor, vec4(lcolor.xyz*(1.0/255.0), 1.0), vFogFactor);\n}";
r.Ou="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nattribute vec3 aBarycentric;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord;\nvBarycentric = camSpacePos.xyz;\n}";r.Nu="precision mediump float;\n#extension GL_OES_standard_derivatives : enable\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\n#ifdef GL_OES_standard_derivatives\nvec3 nx = dFdx(vBarycentric);\nvec3 ny = dFdy(vBarycentric);\nvec3 normal=normalize(cross(nx,ny));\ngl_FragColor = vec4(vec3(max(0.0,normal.z*(204.0/255.0))+(32.0/255.0)),1.0);\n#else\ngl_FragColor = vec4(1.0,1.0,1.0,1.0);\n#endif\n}";
r.iq="attribute vec3 aPosition;\nattribute vec2 aTexCoord;\nattribute vec3 aBarycentric;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord;\nvBarycentric = aBarycentric;\n}";r.hq="precision mediump float;\n#extension GL_OES_standard_derivatives : enable\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nfloat edgeFactor(){\n#ifdef GL_OES_standard_derivatives\nvec3 d = fwidth(vBarycentric);\nvec3 a3 = smoothstep(vec3(0.0), d*1.0, vBarycentric);\nreturn min(min(a3.x, a3.y), a3.z);\n#else\nfloat a = min(min(vBarycentric.x, vBarycentric.y), vBarycentric.z);\nreturn a > 0.1 ? 1.0 : smoothstep(0.0,1.0,a*10.0);\n#endif\n}\nvoid main() {\ngl_FragColor = mix(fogColor, vec4( mix(vec3(0.0), texture2D(uSampler, vTexCoord).rgb, edgeFactor()) , 1.0), vFogFactor);\n}";
r.Tu="precision mediump float;\n#extension GL_OES_standard_derivatives : enable\nuniform sampler2D uSampler;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nconst vec4 fogColor = vec4(216.0/255.0, 232.0/255.0, 243.0/255.0, 1.0);\nfloat edgeFactor(){\n#ifdef GL_OES_standard_derivatives\nvec3 d = fwidth(vBarycentric);\nvec3 a3 = smoothstep(vec3(0.0), d*1.0, vBarycentric);\nreturn min(min(a3.x, a3.y), a3.z);\n#else\nfloat a = min(min(vBarycentric.x, vBarycentric.y), vBarycentric.z);\nreturn a > 0.1 ? 1.0 : smoothstep(0.0,1.0,a*10.0);\n#endif\n}\nvoid main() {\nif (edgeFactor() < 0.5){ gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0); } else { discard; }}";
r.Uu="attribute vec3 aPosition;\nattribute vec2 aTexCoord2;\nattribute vec3 aBarycentric;\nuniform mat4 uMV, uProj;\nuniform float uFogDensity;\nvarying vec2 vTexCoord;\nvarying vec3 vBarycentric;\nvarying float vFogFactor;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvFogFactor = exp(uFogDensity * camDist);\nvTexCoord = aTexCoord2;\nvBarycentric = aBarycentric;\n}";r.Mu="attribute vec3 aPosition;\nuniform mat4 uMV, uProj;\nvarying float vDepth;\nvoid main() {\nvec4 camSpacePos = uMV * vec4(aPosition, 1.0);\ngl_Position = uProj * camSpacePos;\nfloat camDist = length(camSpacePos.xyz);\nvDepth = camDist;\n}";
r.Lu="precision mediump float;\nuniform sampler2D uSampler;\nvarying float vDepth;\nvoid main() {\ngl_FragColor = fract(vec4(1.0, 1.0/255.0, 1.0/65025.0, 1.0/16581375.0) * vDepth) + (-0.5/255.0);\n}";r.os="\nattribute vec4 aPosition;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uData;\nuniform vec4 uColor;\nuniform float uDepth;\nvarying vec4 vColor;\nvarying vec2 vTexcoords;\nvoid main(void){\nint i=int(aPosition.x);\nif(i==0) gl_Position=uProjectionMatrix*vec4(floor(uData[0][0]+0.1),floor(uData[0][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[0][2], uData[0][3]);\nif(i==1) gl_Position=uProjectionMatrix*vec4(floor(uData[1][0]+0.1),floor(uData[1][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[1][2], uData[1][3]);\nif(i==2) gl_Position=uProjectionMatrix*vec4(floor(uData[2][0]+0.1),floor(uData[2][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[2][2], uData[2][3]);\nif(i==3) gl_Position=uProjectionMatrix*vec4(floor(uData[3][0]+0.1),floor(uData[3][1]+0.1),uDepth,1.0), vTexcoords=vec2(uData[3][2], uData[3][3]);\nvec4 c=uColor;\nc.w*=1.0;\nvColor=c;\n}";
r.ns="precision mediump float;\nvarying vec4 vColor;\nvarying vec2 vTexcoords;\nuniform sampler2D uSampler;\nvoid main(void){\nvec4 c=texture2D(uSampler, vec2(vTexcoords.x, vTexcoords.y) );\nc*=vColor;\nif(c.w < 0.01){ discard; }\ngl_FragColor = c;\n}";function $a(a,b,c,d,e,f,g){this.j=a;this.s=a.s;this.oo=this.N=null;this.v=0;this.gc=d;this.Fg=this.Ce=0;this.Om=f||!1;this.lo=g||"linear";this.Sa=null;this.kc=!1;this.u=c;null!=b&&this.load(b,null,null,e)}
$a.prototype.C=function(){this.s.deleteTexture(this.N);this.N=null};$a.prototype.size=function(){return this.v};
function Gb(a,b,c,d,e,f){var g=a.s;a.N=g.createTexture();g.bindTexture(g.TEXTURE_2D,a.N);1==f?(f=g.REPEAT,a.Om=!0):f=g.CLAMP_TO_EDGE;g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,f);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,f);f=!1;switch(e){case "linear":g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);break;case "trilinear":g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_LINEAR);g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_MAG_FILTER,g.LINEAR);f=!0;break;default:g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.NEAREST),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST)}g.pixelStorei(g.UNPACK_ALIGNMENT,1);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,b,c,0,g.RGBA,g.UNSIGNED_BYTE,d);1==f&&g.generateMipmap(g.TEXTURE_2D);g.bindTexture(g.TEXTURE_2D,null);a.Ce=b;a.Fg=c;a.v=b*c*4;a.kc=!0}
function gb(a,b,c,d){var e=a.s;performance.now();a.N=e.createTexture();e.bindTexture(e.TEXTURE_2D,a.N);1==d?(d=e.REPEAT,a.Om=!0):d=e.CLAMP_TO_EDGE;e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,d);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,d);d=!1;a.lo=c;switch(c){case "linear":e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR);break;case "trilinear":e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR);e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_MAG_FILTER,e.LINEAR);d=!0;break;default:e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST)}1!=r.Ws&&(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,b),1==d&&e.generateMipmap(e.TEXTURE_2D));e.bindTexture(e.TEXTURE_2D,null);a.Ce=b.naturalWidth;a.Fg=b.naturalHeight;a.v=b.naturalWidth*b.naturalHeight*4;a.kc=!0}
$a.prototype.load=function(a,b,c,d){this.Sa=r.kb.nj(a,function(){if(null==this.u||1!=this.u.T)gb(this,this.Sa,this.lo,this.Om),this.Sa=null,b&&b()}.bind(this),function(){(null==this.u||1!=this.u.T)&&c&&c()}.bind(this),null,d)};
$a.prototype.createFramebuffer=function(a,b){if(null!=this.N){var c=this.s,d=c.createFramebuffer();c.bindFramebuffer(c.FRAMEBUFFER,d);d.width=a;d.height=b;c.bindTexture(c.TEXTURE_2D,this.N);var e=c.createRenderbuffer();c.bindRenderbuffer(c.RENDERBUFFER,e);c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_COMPONENT16,a,b);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,this.N,0);c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,e);c.bindTexture(c.TEXTURE_2D,
null);c.bindRenderbuffer(c.RENDERBUFFER,null);c.bindFramebuffer(c.FRAMEBUFFER,null);this.oo=d}};function Hb(a,b,c){if(null!=a.N){a.j.bindTexture(a);eb(a.j,a);var d=a.s,e=new Uint8Array(4);d.readPixels(b,c,1,1,d.RGBA,d.UNSIGNED_BYTE,e);eb(a.j,null);return e}}r.Rv=1.1;r.$v=1;r.Ws=!1;r.Ai=null;
function Ib(a,b,c,d,e){this.h=e||{};this.u=a;this.vp=this.wp=this.xp=this.Fm=null;this.Fe=b;this.Lf=this.jt=this.tm=this.T=!1;this.Li=[];this.op=d;this.Oh=0;this.Ph=[];a=this.Fe.getBoundingClientRect();this.da=[a.width,a.height];this.Tj=[a.width,a.height];this.ua=!0;this.Bd=[0,1,0];this.j=new bb(b,this.da,this.h.Mm,this.h.Nm);this.G=new Jb(this,45,2,12E5);r.i.create();r.i.create();r.i.create();r.i.create();this.tf=this.Bf=this.Pp=this.ni=this.Nh=this.Il=null;this.de=1024;this.Gd=this.Hg=this.Rf=this.Sf=
this.Yg=null;this.rf=0;this.Df=Array(512);this.Sh=Array(512);b=0;for(a=this.Df.length;b<a;b++)this.Df[b]=[],this.Sh[b]=0;this.us=[];this.En={};this.ba=[0,0,0];this.qh=[0,0,0];this.jq=this.$n=this.Kn=1;this.Bd=[0,0,0];this.Pl=[0,0,0];r.i.create();this.tj=[0,0,100];window.addEventListener("resize",this.Vj.bind(this),!1);this.j.Oc();this.Fm=new Bb(this.j,r.Su,r.Pu);this.St=new Bb(this.j,r.eq,r.Ju);this.Tt=new Bb(this.j,r.eq,r.Ku);this.Mt=new Bb(this.j,r.gq,r.Qu);this.Rt=new Bb(this.j,r.gq,r.Ru);this.Gt=
new Bb(this.j,r.xr,r.wr);this.xp=new Bb(this.j,r.iq,r.hq);this.wp=new Bb(this.j,r.iq,r.Tu);this.Ut=new Bb(this.j,r.Uu,r.hq);this.up=new Bb(this.j,r.Ou,r.Nu);new Bb(this.j,r.ks,r.js);this.Lt=new Bb(this.j,r.vt,r.st);this.Kt=new Bb(this.j,r.ut,r.rt);new Bb(this.j,r.Qp,r.vu);this.Em=new Bb(this.j,r.Qp,r.yu);this.Dt=new Bb(this.j,r.Jq,r.Hq);this.Et=new Bb(this.j,r.Kq,r.Iq);this.tp=new Bb(this.j,r.Mu,r.Lu);new Bb(this.j,r.hs,r.gs);this.Ug=new Bb(this.j,r.Pq,r.Cn);this.Ft=new Bb(this.j,r.Lq,r.Cn);this.Jt=
new Bb(this.j,r.Gs,r.Fs);this.It=new Bb(this.j,r.Cs,r.Bs);this.Vg=new Bb(this.j,r.Es,r.Ds);this.Ot=new Bb(this.j,r.mq,r.lq);this.Qt=new Bb(this.j,r.rq,r.lq);this.Nt=new Bb(this.j,r.mq,r.cq);this.Pt=new Bb(this.j,r.rq,r.cq);new Bb(this.j,r.Bt,r.At);this.vp=new Bb(this.j,r.Gu,r.dn);new Bb(this.j,r.Hu,r.dn);this.ab=new Bb(this.j,r.os,r.ns);this.Ht=new Bb(this.j,r.ms,r.dn);b=r.Nb.Rq();this.Il=new vb(this.j,b,null,this.u);b=r.Nb.Sq();this.tt=new vb(this.j,b,null,this.u);b=new Uint8Array(16384);for(a=0;64>
a;a++)for(c=0;64>c;c++)d=4*(64*a+c),1>a||63<=a||1>c||63<=c?(b[d]=255,b[d+1]=255,b[d+2]=255):(b[d]=32,b[d+1]=32,b[d+2]=32),b[d+3]=255;this.Nh=new $a(this.j);Gb(this.Nh,64,64,b,"trilinear",!0);b=r.Nb.Gn(32,64);this.ni=new vb(this.j,b,null,this.u);b=r.Nb.Gn(128,256);this.rk=new vb(this.j,b,null,this.u);b=this.de;a=new Uint8Array(b*b*4);this.Bf=new $a(this.j);Gb(this.Bf,b,b,a);this.Bf.createFramebuffer(b,b);this.tf=new $a(this.j);Gb(this.tf,b,b,a);this.tf.createFramebuffer(b,b);this.en=new $a(this.j,
"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAACACAMAAADTa0c4AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFAAAA////pdmf3QAABIFJREFUeNrsnNuyqzAIhsP7v/Se6Yxra0L4OUVNCzetVqP5DAQItrVOiLg95739NnfOaR99RDj6esBw+CKZXiMK4PiuBkAcANoHAP3J5fzzAV2jePQIt6f4Ndb/MIChlVcCEFpAACZPfN4KUAF0/ufboDW3AuBMFgBwHTCfg2ftYgDUKBuA1ABuHKvA2P+5XdONIEt7BO2o2MdlAJoTQOsV6GEAswt0Zq/bsBhdeQQkqEDMwmIAnJHzA8i3ASkWRFKBbADyLGB3mlYD6DyhA4DfBlgsBDtirUPcBgC5woStYMgVtgKATWcB6DskKUEkGFLYrGw3+l3ydR16wKbbPDlWp4Xfo9vZwR1jtOMA6GkABrdvNmt1Vluy6pyvxu4Xt62fquyTggCTsIkCoIuv8gAA08w+ATBXAdSRY56xPDFPx/VPWFZp5v65kFMPgFjP70YASMfRsDn01xLPcwkRq1HLMoK647hR8v+nId74MQBjvIbUQePra42ZVXVcBCR3mIY89mYAlNGLflqA0V1seosCQNMg80B0bsLGAIDNwvFyiqu66ngVGGMGVBwyWwIwpty2DqEr/qf0Bq+DbjYkkcr4VUoOxiRjrYn3YY5SC4BQB/cF0Lq4kD1RCJ+tN4g6Jps5zfWu+QmSz9sUABkA0BIAXocmBwCJ99MDIASATkmtLQAIft4IgE/ZDStZ59yQbOQQAGZWYMbZ3FFCAGRHnwHQznegGAE+zwxNi8kALCOgS9tzAC4jYG1Qo0myRm0Ae/z8eleqewBoZLwfUswCsbT1KgBZD6QAzAEoXUe3K+xxVf2uLf5U3nBeMPRyACW/LtrwVX989id3PRQOG5Io6vh9XwC6stHIdGdJozun03lxNlwvH4u6UgDM8/LmJyx7ak12feEebaXmUwCOYJWk1JcYKsl74HL74wAaH93NqkE1FSKXc4cv0AjaPEEPgE4ru/ieWdvzVq/4psG3AYDFHlEAioQCuEgMgPjK1VDrqlkbTABAiQBGK38B0BlBSf9xtiAJQDM4NtDqMlaeyduTtkDjHgAtEQBj5ZGK2QE0aCcMAIxLSw0WVYlGDgOQXWE+afouAM0S398O4Nej3wIQf4cIHSfz9pbWugyep4MFIAFARvspbm8BcE2DOdvWnCJQAWFhJ/hKzh4AaB2A7NxedKmLPc+6PN4cL2S8GYC1QMIEQJvmFsJfxdvkEQAoLV4AogBS8/kNvdXlWe5GKhABvQUAZASDALJffY1XfsrToFXFbvYD1gBo6wC8LR7/uvj9CwHcfWuoUJItsVl5nwWAnhxxqsXatUq0OYCcaS/fkbK61u5H8jwAuUIEZXHNL1Jmub5oSKZWiDR9FttM4HEAigqRpn8TeB2AuWNiByAXSHCGbB7/3qYCfgCgPgADEEskbjCCaJDB/+kR6wP4P1Obl8jsBwDUB4yAxqKkthaATjX0KmCtDyCxm+yIMLjCbwBgrg94FYC3h8vLPPmfAVBSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlLy9fJPgAEAvWMULbGsSjwAAAAASUVORK5CYII=",
this.u,null,!0);b=new Uint8Array(2048);for(a=0;8>a;a++)for(c=0;64>c;c++)d=4*(64*a+c),b[d]=0,b[d+1]=0,b[d+2]=0,b[d+3]=255;b=this.j.s;this.Sf=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,this.Sf);b.bufferData(b.ARRAY_BUFFER,new Float32Array([0,0,0,1,1,0,0,1,2,0,0,1,3,0,0,1]),b.STATIC_DRAW);this.Sf.oa=4;this.Sf.ia=4;this.Rf=b.createBuffer();b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,this.Rf);b.bufferData(b.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,2,1,0,3,2]),b.STATIC_DRAW);this.Rf.oa=1;this.Rf.ia=6;b=new Uint8Array(1024);
for(a=0;16>a;a++)for(c=0;16>c;c++)d=4*(16*a+c),b[d]=255,b[d+1]=0,b[d+2]=0,b[d+3]=255;this.Yg=new $a(this.j);Gb(this.Yg,16,16,b);b=new Uint8Array(1024);for(a=0;16>a;a++)for(c=0;16>c;c++)d=4*(16*a+c),b[d]=255,b[d+1]=255,b[d+2]=255,b[d+3]=255;this.mg=new $a(this.j);Gb(this.mg,16,16,b);b=new Uint8Array(1024);for(a=0;16>a;a++)for(c=0;16>c;c++)d=4*(16*a+c),b[d]=0,b[d+1]=0,b[d+2]=0,b[d+3]=255;this.Ii=new $a(this.j);Gb(this.Ii,16,16,b);e="............................................................ .....xxxxx.......................xxxxx...................... .....xxxxx.......................xxxxx...................... .....xxxxx.......................xxxxx...................... xxxxxxxxxxxxxxxx............xxxxxxxxxxxxxxxx................ xxxxxxxxxxxxxxxx............xxxxxxxxxxxxxxxx................ ............................................................".split(" ");
b=new Uint8Array(2048);for(a=0;8>a;a++)for(c=0;64>c;c++)d=4*(64*a+c),b[d]=0,b[d+1]=0,b[d+2]=0,b[d+3]=0;a=0;for(var f=e.length;a<f;a++){var g=e[a];c=0;for(var h=g.length;c<h;c++)d=4*(64*a+c),"."!=g.charAt(c)&&(b[d]=255,b[d+1]=255,b[d+2]=255,b[d+3]=255)}this.Tl=new $a(this.j);Gb(this.Tl,64,8,b,"linear",!0);this.Gi=new ab(this.j);this.Nq=new ab(this.j,!0);this.Gd=new fb(this.j,this.u);this.Wj=new Float32Array(96);this.Am=new wb(this.j,this.u,!0,64,!0,8);this.sp=new wb(this.j,this.u,!1,64,!0,8);b=Array(196605);
for(a=0;196605>a;a+=9)b[a]=1,b[a+1]=0,b[a+2]=0,b[a+3]=0,b[a+4]=1,b[a+5]=0,b[a+6]=0,b[a+7]=0,b[a+8]=1;a=this.j.s;r.pg=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,r.pg);a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW);r.pg.oa=3;r.pg.ia=b.length/3;1==window.MelownMobile_&&null!=this.j.Wa&&(this.j.Wa.style.width="100%",this.j.Wa.style.height="100%");b=window.MelownScreenScaleFactor_;Kb(this,Math.floor(this.da[0]*b),Math.floor(this.da[1]*b))}m=Ib.prototype;
m.Vj=function(){if(1!=this.T){var a=this.Fe.getBoundingClientRect();Kb(this,Math.floor(a.width),Math.floor(a.height));this.op&&this.op()}};
m.C=function(){1!=this.T&&(this.T=!0,null!=this.wt&&this.wt.C(),this.Il&&this.Il.C(),this.Nh&&this.Nh.C(),this.ni&&this.ni.C(),this.Pp&&this.Pp.C(),this.Bf&&this.Bf.C(),this.tf&&this.tf.C(),this.Yg&&this.Yg.C(),this.mg&&this.mg.C(),this.Ii&&this.Ii.C(),this.Tl&&this.Tl.C(),this.en&&this.en.C(),this.rk&&this.rk.C(),this.Gi&&this.Gi.C(),this.Gd&&this.Gd.C(),this.Am&&this.Am.C(),this.sp&&this.sp.C(),this.j.C())};
function Kb(a,b,c){var d=a.G;d.Vd=b/c;d.ua=!0;a.da=[b,c];a.Tj=[b,c];a.j.resize(a.da,void 0);a.j.clear(!0,!1);1!=a.jt&&1!=a.tm&&1!=a.Lf&&Lb(a);d=[];d[0]=2/b;d[1]=0;d[2]=0;d[3]=0;d[4]=0;d[5]=-2/c;d[6]=0;d[7]=0;d[8]=0;d[9]=0;d[10]=1;d[11]=0;d[12]=.5*-b*d[0];d[13]=.5*-c*d[5];d[14]=0;d[15]=1;a.Hg=d}function ub(a,b,c){b=r.i.Rj(c,[b[0],b[1],b[2],1]);return 0!=b[3]?(c=[0,0,0],c[0]=.5*(b[0]/b[3]+1)*a.da[0],c[1]=.5*(-(b[1]/b[3])+1)*a.da[1],c[2]=b[2]/b[3],c):[0,0,0]}
m.xg=function(a,b){if(null==this.G)return[0,0,1];var c=[2*a/this.da[0]-1,1-2*b/this.da[1],1],d=[c[0],c[1],-1,1],e;r.i.create();e=r.i.inverse(Mb(this.G));c=[0,0,0,0];r.i.Rj(e,d,c);c[2]=-1;c[3]=0;r.i.create();d=r.i.inverse(Nb(this.G));e=[0,0,0,0];r.i.Rj(d,c,e);return e=r.D.normalize([e[0],e[1],e[2]])};
m.lj=function(a,b){var c=this.j.s;if(c.checkFramebufferStatus(c.FRAMEBUFFER)!=c.FRAMEBUFFER_COMPLETE)return[!1,0,0,0,0];c=!1;if(0<=a&&a<this.da[0]&&0<=b&&b<this.da[1])var d=Hb(this.tf,Math.floor(this.de/this.da[0]*a),this.de-Math.floor(this.de/this.da[1]*b)-1),c=!(255==d[0]&&255==d[1]&&255==d[2]&&255==d[3]);return c?[!0,d[0],d[1],d[2],d[3]]:[!1,0,0,0,0]};
function Ob(a,b){var c=a.j.s;switch(b){case "base":var d=a.Tj[0],e=a.Tj[1];c.clearColor(0,0,0,1);eb(a.j,null);c=a.G;c.Vd=d/e;c.ua=!0;a.da=[d,e];a.j.resize(a.da,!0);a.G.update();a.tm=!1;a.Lf=!1;break;case "depth":eb(a.j,a.Bf);a.Tj=[a.da[0],a.da[1]];c.clearColor(1,1,1,1);c.enable(c.DEPTH_TEST);var f=a.de;c.viewport(0,0,f,f);c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT);a.da=[f,f];a.j.clear();a.G.update();a.tm=!0;a.Lf=!1;break;case "geo":a.Oh=0,f=a.de,eb(a.j,a.tf),e=d=f,c.clearColor(1,1,1,1),c.enable(c.DEPTH_TEST),
c.viewport(0,0,f,f),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),a.da=[d,e],a.Lf=!0,a.j.clear(),a.G.update()}}function sb(a,b){return 1E-4*(b[0]+b[1]*a.$n+b[2]*a.jq)}
m.$j=function(a,b,c){var d=this.j.s,e=this.da[0],f=this.da[1],g=new Uint8Array(e*f*4);d.readPixels(0,0,e,f,d.RGBA,d.UNSIGNED_BYTE,g);for(var d=new Uint8Array(e*f*4),h=0,k=0;k<f;k++){index2_=(f-1-k)*e*4;for(var l=0;l<e;l++)d[h]=g[index2_],d[h+1]=g[index2_+1],d[h+2]=g[index2_+2],d[h+3]=g[index2_+3],h+=4,index2_+=4}g=document.createElement("canvas");g.width=e;g.height=f;h=g.getContext("2d");e=h.createImageData(e,f);e.data.set(d);h.putImageData(e,0,0);c=c||"jpg";if("file"==a){for(var n=document.createElement("a"),
f=g.toDataURL("image/"+c),f=atob(f.split(",")[1]),d=new ArrayBuffer(f.length),h=new Uint8Array(d),k=0;k<f.length;k++)h[k]=f.charCodeAt(k);var p=URL.createObjectURL(new Blob([d],{type:c}));n.href=p;n.download=b;document.body.appendChild(n);n.click();setTimeout(function(){document.body.removeChild(n);window.URL.revokeObjectURL(p)},0)}"tab"==a&&window.open(g.toDataURL("image/"+type_));return e};
function pb(a,b,c,d){var e=b+"*"+c+"*"+d,f=a.En[e];null==f&&(f=new $a(a.j,b,a.u,null,null,d,c),a.En[e]=f);return f}function P(a){this.l=a;this.j=a.j}m=P.prototype;m.clear=function(a){null!=a&&this.j.clear(a.clearDepth||!0,a.clearColor||!1,a.color||[255,255,255,255],null!=a.depth?a.depth:1);return this};
m.Ob=function(a){return null==a||"object"!==typeof a?this:this.j.Ob({sc:null!=a.blend?a.blend:!1,bg:null!=a.stencil?a.stencil:!1,gw:null!=a.zoffset?a.zoffset:0,De:null!=a.zwrite?a.zwrite:!0,ff:null!=a.ztest?a.ztest:!0,oh:null!=a.zequal?a.zequal:!0,Lc:null!=a.culling?a.culling:!0})};m.eb=function(a){null!=a&&this.j.eb(a);return this};
m.createTexture=function(a){if(null==a||"object"!==typeof a)return null;var b=a.source;if(null==b)return null;var c=a.filter||"linear",d=a.repeat||!1;if(b instanceof Uint8Array){var e=a.width;a=a.height;if(e&&a){var f=new $a(this.j);Gb(f,e,a,b,c,d);return f}}return b instanceof Image?(f=new $a(this.j),gb(f,b,c,d),f):null};m.Zt=function(a){a&&a.C();return this};
m.Sn=function(a){return null==a||"object"!==typeof a?null:new vb(this.j,{V:a.vertices,wi:a.uvs,wq:a.normals,gv:a["vertex-size"],bv:a["uv-size"],av:a["normal-size"]||3,fw:a["vertex-attr"],ew:a["uv-attr"],dw:a["normal-attr"],A:a.bbox},0,this.l.u)};m.Xt=function(a){a&&a.C();return this};m.createShader=function(a){if(null==a||"object"!==typeof a)return null;var b=a["vertex-shader"];a=a["fragment-shader"];if(null!=b&&a)return new Bb(this.j,b,a)};m.Yt=function(a){null!=a&&null!=a.C&&resource.C();return this};
m.Eq=function(){return this};m.Wq=function(){return this};
m.fo=function(a){if(null==a||"object"!==typeof a||null==!a.mesh||!a["shader-variables"])return this;var b=a.vertex||"aPosition",c=a.uv||"aTexCoord",d=a.normal||"aNormal",e=a["shader-variables"],f=a.shader||"textured",g=this.l,h=a.mesh;a=a.texture;var k=Nb(g.G),l=Mb(g.G),n=g.rf;if("string"===typeof f)switch(f){case "hit":e.uMV||(e.uMV=["mat4",k]);e.uProj||(e.uProj=["mat4",l]);a=d=c=null;f=g.tp;break;case "shaded":c=null;case "textured":case "textured-and-shaded":e.uMV||(e.uMV=["mat4",k]),e.uProj||
(e.uProj=["mat4",l]),e.uFogDensity||(e.uFogDensity=["float",n]),d="textured"==f?null:"aNormal",f="textured"==f?g.Fm:"shaded"==f?g.Mt:g.Rt}k=[b];c&&k.push(c);d&&k.push(d);g.j.useProgram(f,k);for(var p in e)if(k=e[p],2==k.length)switch(k[0]){case "floatArray":Fb(f,p,k[1]);break;case "float":Eb(f,p,k[1]);break;case "mat3":Cb(f,p,k[1]);break;case "mat4":ya(f,p,k[1]);break;case "vec2":tb(f,p,k[1]);break;case "vec3":Db(f,p,k[1]);break;case "vec4":rb(f,p,k[1]);break;case "sampler":ra(f,p,k[1])}a&&g.j.bindTexture(a);
h.Xa(f,b,c,d,null);return this};m.drawImage=function(a){if(null==a||"object"!==typeof a||null==a.texture||null==a.rect)return this;var b=a.rect,c=a.color||[255,255,255,255],d=null!=a.depth?a.depth:0,e=null!=a["depth-test"]?a["depth-test"]:!1,f=null!=a.blend?a.blend:!1,g=null!=a["write-depth"]?a["write-depth"]:!1,h=null!=a["use-state"]?a["use-state"]:!1;c[0]*=1/255;c[1]*=1/255;c[2]*=1/255;c[3]*=1/255;this.l.drawImage(b[0],b[1],b[2],b[3],a.texture,c,d,e,f,g,h);return this};
m.Kk=function(a){if(null==a||"object"!==typeof a||null==a.texture||null==a.mvp)return this;var b=a.mvp,c=a.color||[255,255,255,255],d=null!=a["depth-test"]?a["depth-test"]:!1,e=null!=a.blend?a.blend:!1,f=null!=a["write-depth"]?a["write-depth"]:!1,g=null!=a["use-state"]?a["use-state"]:!1;c[0]*=1/255;c[1]*=1/255;c[2]*=1/255;c[3]*=1/255;this.l.Kk(b,a.texture,c,d,e,f,g);return this};
m.Fd=function(a){if(null==a||"object"!==typeof a||null==a.points)return this;var b=a.points,c=a.color||[255,255,255,255],d=a.size||2,e=null!=a["depth-test"]?a["depth-test"]:!1,f=null!=a.blend?a.blend:!1,g=null!=a["write-depth"]?a["write-depth"]:!1;a=null!=a["use-state"]?a["use-state"]:!1;c[0]*=1/255;c[1]*=1/255;c[2]*=1/255;c[3]*=1/255;this.l.Fd(b,d,c,e,f,g,a);return this};m.or=function(){return this};m.ug=function(){return this};
m.nr=function(a){if(null==a||"object"!==typeof a)return this;var b=a.text,c=a.coords;if(!b||!c)return this;var d=a.color||[255,255,255,255],e=a.size||16,f=a.depth;a=a["use-state"]||!1;d[0]*=1/255;d[1]*=1/255;d[2]*=1/255;d[3]*=1/255;Pb(this.l,c[0]-.5*Qb(e,b),c[1],e,b,d,f,a);return this};m.$j=function(a,b,c){return this.l.$j(a,b,c)};m.uf=function(a,b){return ub(this.l,a,b)};m.Dr=function(){return this.l.da.slice()};m.Od=function(a){this.l.Od(a);return this};m.Nd=function(a,b){this.l.Nd(a,b);return this};
m.Ie=function(a){return this.l.Ie(a,value_)};P.prototype.clear=P.prototype.clear;P.prototype.createState=P.prototype.Ob;P.prototype.setState=P.prototype.eb;P.prototype.createTexture=P.prototype.createTexture;P.prototype.removeTexture=P.prototype.Zt;P.prototype.createMesh=P.prototype.Sn;P.prototype.removeMesh=P.prototype.Xt;P.prototype.createshader=P.prototype.vv;P.prototype.removeResource=P.prototype.Yt;P.prototype.addJob=P.prototype.Eq;P.prototype.clearJobs=P.prototype.Wq;P.prototype.drawMesh=P.prototype.fo;
P.prototype.drawImage=P.prototype.drawImage;P.prototype.drawBillboard=P.prototype.Kk;P.prototype.drawLineString=P.prototype.Fd;P.prototype.drawJobs=P.prototype.or;P.prototype.drawBBox=P.prototype.ug;P.prototype.drawDebugText=P.prototype.nr;P.prototype.getCanvasCoords=P.prototype.uf;P.prototype.getCanvasSize=P.prototype.Dr;P.prototype.setConfigParams=P.prototype.Od;P.prototype.setConfigParam=P.prototype.Nd;P.prototype.getConfigParam=P.prototype.Ie;P.prototype.saveScreenshot=P.prototype.$j;
function jb(a,b,c,d,e,f){this.P=[];this.pa=[];this.P[0]=null!=a?a:Number.POSITIVE_INFINITY;this.P[1]=null!=b?b:Number.POSITIVE_INFINITY;this.P[2]=null!=c?c:Number.POSITIVE_INFINITY;this.pa[0]=null!=d?d:Number.NEGATIVE_INFINITY;this.pa[1]=null!=e?e:Number.NEGATIVE_INFINITY;this.pa[2]=null!=f?f:Number.NEGATIVE_INFINITY;Rb(this)}jb.prototype.clone=function(){return new jb(this.P[0],this.P[1],this.P[2],this.pa[0],this.pa[1],this.pa[2])};function Sb(a,b){return a.pa[b]-a.P[b]}
function Rb(a){a.Lj=Math.abs(Math.max(a.pa[0]-a.P[0],a.pa[1]-a.P[1],a.pa[2]-a.P[2]))}jb.prototype.xk=function(a){return null!=a?(a[0]=.5*(this.P[0]+this.pa[0]),a[1]=.5*(this.P[1]+this.pa[1]),a):[.5*(this.P[0]+this.pa[0]),.5*(this.P[1]+this.pa[1]),.5*(this.P[2]+this.pa[2])]};
function Jb(a,b,c,d){this.va=a;this.sa=[0,0,0];this.Mf=[0,0,0];this.Vd=1;this.al=b;this.Qg=c;this.pf=d;this.Sm=!1;this.Pg=r.i.create();this.Zf=r.i.create();this.We=r.i.create();this.yp=r.i.create();this.ei=r.i.create();this.cp=r.i.create();this.ad=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];this.Oq=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]];this.Hp=[0,0,0,0];this.ua=!0}m=Jb.prototype;m.setPosition=function(a){this.sa=a;this.ua=!0};
m.setOrientation=function(a){this.Sm=!1;this.Mf=a;this.ua=!0};function Ea(a,b){a.vm=b;a.ua=!0}m.clone=function(a){a=new Jb(this.va,null!=a?a:this.bd(),this.Qg,this.pf);a.setPosition(this.uc());a.setOrientation(this.Rb());a.Vd=this.Vd;a.ua=!0;a.update();return a};m.uc=function(){return[this.sa[0],this.sa[1],this.sa[2]]};m.Rb=function(){return[this.Mf[0],this.Mf[1],this.Mf[2]]};m.bd=function(){return this.al};function Nb(a){a.ua&&a.update();return a.Pg}function Mb(a){a.ua&&a.update();return a.We}
function pa(a){a.ua&&a.update();return a.ei}function Tb(a,b){a.ua&&a.update();r.i.Fa(a.Pg,b,a.Hp);var c=r.D.length(a.Hp);return c<a.Qg?[Number.POSITIVE_INFINITY,c]:[a.We[0]/c,c]}function ac(a,b,c){a.ua&&a.update();a=a.ad;var d=b.length;if(c){var e=c[0],f=c[1];c=c[2]}else c=f=e=0;for(var g=r.jg.ao,h=0;6>h;h++){for(var k=!0,l=a[h],n=0;n<d;n+=3)if(0<=g(l,b,n,e,f,c)){k=!1;break}if(k)return!1}return!0}
m.Ad=function(a,b){this.ua&&this.update();var c=a.P,d=a.pa,e=this.Oq;if(b)var f=c[0]-b[0],g=c[1]-b[1],c=c[2]-b[2],h=d[0]-b[0],k=d[1]-b[1],l=d[2]-b[2];else f=c[0],g=c[1],c=c[2],h=d[0],k=d[1],l=d[2];d=e[0];d[0]=f;d[1]=g;d[2]=c;d=e[1];d[0]=f;d[1]=g;d[2]=l;d=e[2];d[0]=f;d[1]=k;d[2]=c;d=e[3];d[0]=f;d[1]=k;d[2]=l;d=e[4];d[0]=h;d[1]=g;d[2]=c;d=e[5];d[0]=h;d[1]=g;d[2]=l;d=e[6];d[0]=h;d[1]=k;d[2]=c;d=e[7];d[0]=h;d[1]=k;d[2]=l;f=r.jg.Jk;g=this.ad;for(c=0;6>c;c++){h=!0;k=g[c];for(d=0;8>d;d++)if(0<=f(k,e[d])){h=
!1;break}if(h)return!1}return!0};
m.update=function(a){this.Sm||(r.i.multiply(r.Dc(2,r.La(-this.Mf[2])),r.Dc(0,r.La(-this.Mf[1]-90)),this.Zf),r.i.multiply(this.Zf,r.Dc(2,r.La(-this.Mf[0])),this.Zf));r.i.multiply(this.Zf,r.qc(-this.sa[0],-this.sa[1],-this.sa[2]),this.Pg);this.We=1==this.vm?r.mt(this.zq,this.Vd,this.Qg,this.pf):r.ot(this.al,this.Vd,this.Qg,this.pf);r.i.set(this.We,this.yp);if(a){a=1+a;var b=this.We;b[2]*=a;b[6]*=a;b[10]*=a;b[15]*=a}r.i.multiply(this.We,this.Pg,this.ei);r.i.multiply(this.yp,this.Pg,this.cp);this.ad[0]=
[0,0,1,1];this.ad[1]=[0,0,-1,1];this.ad[2]=[1,0,0,1];this.ad[3]=[-1,0,0,1];this.ad[4]=[0,1,0,1];this.ad[5]=[0,-1,0,1];a=r.i.create();r.i.Sd(this.cp,a);for(b=0;6>b;b++)this.ad[b]=r.i.Rj(a,this.ad[b]);this.ua=!1};
function Lb(a,b,c){if(b){var d=r.i.create();r.i.multiply(r.af(2,2,2),r.qc(-.5,-.5,-.5),d);var e=r.i.create(),f=a.G.uc();r.i.multiply(r.qc(f[0],f[1],f[2]-400),r.Ip(Math.min(.9*a.G.pf,6E5)),e);f=r.i.create();r.i.multiply(pa(a.G),e,f);r.i.multiply(f,d,f);a.j.useProgram(c,["aPosition","aTexCoord"]);a.j.bindTexture(b);ra(c,"uSampler",0);ya(c,"uMVP",f);a.j.s.depthMask(!1);a.ni.Xa(c,"aPosition","aTexCoord");a.j.s.depthMask(!0);a.j.s.enable(a.j.s.CULL_FACE)}}
function bc(a,b,c,d,e,f,g,h){var k=a.j.s,l=r.i.create();r.i.multiply(r.af(2,2,2),r.qc(-.5,-.5,-.5),l);var n=[b[0],b[1],b[2]];b=r.i.create();r.i.multiply(r.qc(n[0],n[1],n[2]),r.Ip(null!=c?c:1.5),b);c=r.i.create();r.i.multiply(Nb(a.G),b,c);r.i.multiply(c,l,c);l=Mb(a.G);b=[0,0,0,0,0,0,0,0,0];r.i.gn(c,b);r.md.Sd(b);a.j.useProgram(d,["aPosition"]);a.j.bindTexture(a.Yg);ra(d,"uSampler",0);ya(d,"uProj",l);ya(d,"uMV",c);h&&(Cb(d,"uNorm",b),k.cullFace(k.FRONT));e&&rb(d,"uParams",e);f&&rb(d,"uParams2",f);f&&
rb(d,"uParams3",g);a.rk.Xa(d,"aPosition",null);h&&k.cullFace(k.BACK)}
Ib.prototype.Fd=function(a,b,c,d,e,f,g){var h=this.j.s,k=0,l=a.length;if(32<l)for(var n=0;n<l;n+=31)this.Fd(a.slice(n,n+32),b,c,d,e,f,g);else{for(n=0;n<l;n++){var p=a[n];this.Wj[k]=p[0];this.Wj[k+1]=p[1];this.Wj[k+2]=p[2]||0;k+=3}1!=g&&(1!=d&&h.disable(h.DEPTH_TEST),1==e&&(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),h.enable(h.BLEND)),!1===f&&h.depthMask(!1),h.disable(h.CULL_FACE));this.j.useProgram(this.Vg,["aPosition"]);
ya(this.Vg,"uMVP",this.Hg);Db(this.Vg,"uScale",[2/this.da[0],2/this.da[1],.5*b]);rb(this.Vg,"uColor",null!=c?c:[255,255,255,255]);Db(this.Vg,"uPoints",this.Wj);this.Am.Xa(this.Vg,"aPosition",l);1!=g&&(1!=d&&h.enable(h.DEPTH_TEST),1==e&&h.disable(h.BLEND),!1===f&&h.depthMask(!1),h.enable(h.CULL_FACE))}};
Ib.prototype.drawImage=function(a,b,c,d,e,f,g,h,k,l,n){if(null!=e&&null!=this.Hg){var p=this.j.s;1!=n&&(1!=h&&p.disable(p.DEPTH_TEST),1==k&&(p.blendEquationSeparate(p.FUNC_ADD,p.FUNC_ADD),p.blendFuncSeparate(p.SRC_ALPHA,p.ONE_MINUS_SRC_ALPHA,p.ONE,p.ONE_MINUS_SRC_ALPHA),p.enable(p.BLEND)),!1===l&&p.depthMask(!1),p.disable(p.CULL_FACE));this.j.useProgram(this.ab,["aPosition"]);this.j.bindTexture(e);e=this.Sf;p.bindBuffer(p.ARRAY_BUFFER,e);p.vertexAttribPointer(this.ab.getAttribute("aPosition"),e.oa,
p.FLOAT,!1,0,0);e=this.Rf;p.bindBuffer(p.ELEMENT_ARRAY_BUFFER,e);ya(this.ab,"uProjectionMatrix",this.Hg);ya(this.ab,"uData",[a,b,0,0,a+c,b,1,0,a+c,b+d,1,1,a,b+d,0,1]);rb(this.ab,"uColor",null!=f?f:[1,1,1,1]);Eb(this.ab,"uDepth",null!=g?g:0);p.drawElements(p.TRIANGLES,e.ia,p.UNSIGNED_SHORT,0);1!=n&&(!1===l&&p.depthMask(!0),1!=h&&p.enable(p.DEPTH_TEST),1==k&&p.disable(p.BLEND),p.enable(p.CULL_FACE))}};
Ib.prototype.Kk=function(a,b,c,d,e,f,g){var h=this.j.s;1!=g&&(1!=d&&h.disable(h.DEPTH_TEST),1==e&&(h.blendEquationSeparate(h.FUNC_ADD,h.FUNC_ADD),h.blendFuncSeparate(h.SRC_ALPHA,h.ONE_MINUS_SRC_ALPHA,h.ONE,h.ONE_MINUS_SRC_ALPHA),h.enable(h.BLEND)),!1===f&&h.depthMask(!1),h.disable(h.CULL_FACE));this.j.useProgram(this.ab,["aPosition","aTexCoord"]);this.j.bindTexture(b);ra(this.ab,"uSampler",0);b=this.Sf;h.bindBuffer(h.ARRAY_BUFFER,b);h.vertexAttribPointer(this.ab.getAttribute("aPosition"),b.oa,h.FLOAT,
!1,0,0);b=this.Rf;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,b);ya(this.ab,"uProjectionMatrix",a);ya(this.ab,"uData",[0,0,0,0,1,0,1,0,1,1,1,1,0,1,0,1]);rb(this.ab,"uColor",null!=c?c:[1,1,1,1]);Eb(this.ab,"uDepth",0);h.drawElements(h.TRIANGLES,b.ia,h.UNSIGNED_SHORT,0);1!=g&&(!1===f&&h.depthMask(!0),1!=d&&h.enable(h.DEPTH_TEST),1==e&&h.disable(h.BLEND),h.enable(h.CULL_FACE))};
function Pb(a,b,c,d,e,f,g,h){if(null!=a.Hg){var k=a.j.s;1!=h&&(k.disable(k.CULL_FACE),null==g?k.disable(k.DEPTH_TEST):(k.depthFunc(k.LEQUAL),k.enable(k.DEPTH_TEST)));a.j.useProgram(a.ab,["aPosition"]);a.j.bindTexture(a.en);var l=a.Sf;k.bindBuffer(k.ARRAY_BUFFER,l);k.vertexAttribPointer(a.ab.getAttribute("aPosition"),l.oa,k.FLOAT,!1,0,0);l=a.Rf;k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,l);ya(a.ab,"uProjectionMatrix",a.Hg);rb(a.ab,"uColor",f);Eb(a.ab,"uDepth",null!=g?g:0);f=d-1;var n=Math.round(.5*d),p=1/
256,v=Qb(d,e)+2,u=0,q=(u&15)<<4,z=u>>4<<4;ya(a.ab,"uData",[b-2,c-2,q*p,.0078125*z,b-2+v,c-2,(q+15)*p,.0078125*z,b-2+v,c+d+1,(q+15)*p,.0078125*(z+15),b-2,c+d+1,q*p,.0078125*(z+15)]);k.drawElements(k.TRIANGLES,l.ia,k.UNSIGNED_SHORT,0);for(var v=0,x=e.length;v<x;v++){u=e.charCodeAt(v)-32;q=(u&15)<<4;z=u>>4<<4;switch(u){case 12:case 14:case 27:case 28:case 64:case 73:case 76:case 84:ya(a.ab,"uData",[b,c,q*p,.0078125*z,b+n,c,(q+8)*p,.0078125*z,b+n,c+d,(q+8)*p,.0078125*(z+16),b,c+d,q*p,.0078125*(z+16)]);
b+=n;break;default:ya(a.ab,"uData",[b,c,q*p,.0078125*z,b+f,c,(q+15)*p,.0078125*z,b+f,c+d,(q+15)*p,.0078125*(z+16),b,c+d,q*p,.0078125*(z+16)]),b+=f}k.drawElements(k.TRIANGLES,l.ia,k.UNSIGNED_SHORT,0)}1!=h&&(k.enable(k.CULL_FACE),null==g&&k.enable(k.DEPTH_TEST))}}function Qb(a,b){for(var c=a-1,d=Math.round(.5*a),e=0,f=0,g=b.length;f<g;f++)switch(b.charCodeAt(f)-32){case 12:case 14:case 27:case 28:case 64:case 73:case 76:case 84:e+=d;break;default:e+=c}return e}
function cc(a){var b=a.j,c=b.s;c.stencilMask(255);c.clear(c.STENCIL_BUFFER_BIT);c.stencilFunc(c.EQUAL,0,255);c.stencilOp(c.KEEP,c.KEEP,c.INCR);r.Ai=a.j.Ob({sc:!0,bg:!0,Lc:!1});r.nk=a.j.Ob({sc:!0,Lc:!1});r.An=a.j.Ob({sc:!1,bg:!0,Lc:!1});r.yn=a.j.Ob({sc:!1,Lc:!1});var d=[1/a.da[0],1/a.da[1]],e=513,f=0;0<a.Li.length&&(e=a.Li[0],f++);for(var g=0,h=a.Df.length;g<h;g++){var k=a.Sh[g],l=a.Df[g];0<k&&g>=e&&(c.clear(c.STENCIL_BUFFER_BIT),a.Li.length>f?(e=a.Li[f],f++):e=513);if(a.Lf)for(var n=0;n<k;n++)l[n].Gg&&
r.co(b,c,a,l[n],d);else for(n=0;n<k;n++)r.co(b,c,a,l[n],d)}}function dc(a){for(var b=0,c=a.Df.length;b<c;b++){for(var d=a.Sh[b],e=a.Df[b],f=0;f<d;f++)e[f]=null;a.Sh[b]=0}}r.Nb={};r.Nb.gh=function(a,b,c,d,e){a[e]=b[0];a[e+1]=b[1];a[e+2]=b[2];a[e+3]=c[0];a[e+4]=c[1];a[e+5]=c[2];a[e+6]=d[0];a[e+7]=d[1];a[e+8]=d[2]};r.Nb.fh=function(a,b,c,d,e){a[e]=b[0];a[e+1]=b[1];a[e+2]=c[0];a[e+3]=c[1];a[e+4]=d[0];a[e+5]=d[1]};
r.Nb.Rq=function(){var a=5;a--;for(var b=r.Nb,c=a*a*2,d=new Float32Array(9*c),c=new Float32Array(6*c),e=1*a,f=0,g=0,h=0;h<a;h++)for(var k=0;k<a;k++){var l=k*e,n=(k+1)*e,p=h*e,v=(h+1)*e;b.gh(d,[l,p,0],[n,p,0],[n,v,0],f);b.fh(c,[l,p],[n,p],[n,v],g);f+=9;g+=6;b.gh(d,[n,v,0],[l,v,0],[l,p,0],f);b.fh(c,[n,v],[l,v],[l,p],g);f+=9;g+=6}return{A:new jb(0,0,0,1,1,1),V:d,wi:c}};
r.Nb.Sq=function(){var a=16;a--;for(var b=r.Nb,c=a*a*2,d=new Float32Array(9*c),c=new Float32Array(6*c),e=1/a,f=0,g=0,h=0;h<a;h++)for(var k=0;k<a;k++){var l=k,n=k+1,p=h,v=h+1,u=k*e,q=(k+1)*e,z=h*e,x=(h+1)*e;b.gh(d,[l,p,0],[l,v,0],[n,v,0],f);b.fh(c,[u,z],[u,x],[q,x],g);f+=9;g+=6;b.gh(d,[n,v,0],[n,p,0],[l,p,0],f);b.fh(c,[q,x],[q,z],[u,z],g);f+=9;g+=6}return{A:new jb(0,0,0,1,1,1),V:d,wi:c}};
r.Nb.ck=function(a,b){b*=Math.PI;a*=2*Math.PI;return[Math.cos(a)*Math.sin(b)*.5+.5,Math.sin(a)*Math.sin(b)*.5+.5,.5*Math.cos(b)+.5]};r.Nb.Gn=function(a,b){for(var c=r.Nb,d=a*b*2,e=new Float32Array(9*d),d=new Float32Array(6*d),f=0,g=0,h=0;h<a;h++)for(var k=0;k<b;k++)c.Ns(k/b,h/a,(k+1)/b,(h+1)/a,e,f,d,g),f+=18,g+=12;return{A:new jb(0,0,0,1,1,1),V:e,wi:d}};
r.Nb.Ns=function(a,b,c,d,e,f,g,h){var k=r.Nb,l=[a,b],n=k.ck(a,d),p=[a,d],v=k.ck(c,b),u=[c,b],q=k.ck(c,d);c=[c,d];k.gh(e,n,k.ck(a,b),v,f);k.fh(g,p,l,u,h);k.gh(e,v,q,n,f+9);k.fh(g,u,c,p,h+6)};r.pg=null;
function ec(a,b,c,d){this.h=d||{};this.Od(d);this.u=a;this.Ib=this.u.ml();this.lc=b;this.cr=a.cr;this.T=!1;this.vq=0;this.h=d||{};this.Ig=!1;this.qt=new Float32Array(27);c=c.trim();this.Qa=r.za.Zi(c);this.rc=r.za.dj(c);this.Hc=r.za.bj(c);this.sa=new fc(this,["obj",0,0,"fix",0,0,0,0,0,0]);this.Rl=this.sa.clone();this.ag={};this.bb={};this.I={};this.Bk={};this.ya=[];this.bc={};this.Ih={};this.X=[];this.Ta=[];this.cf=[];this.Ld=[];this.ac=Array(500);this.el=[];this.Fo=null;this.th=new gc(0,{});this.Vn=
"";this.Jf=[];this.Eb=this.lh=this.fc=0;this.mr=["base","hit"];this.Bh=[];this.sf=!1;this.yd={Qh:{},fj:{},Ij:{}};this.Se=!1;this.Sb=new hc(this,1048576*this.h.Cj);this.Jb=new hc(this,1048576*this.h.zj);this.zc=new hc(this,1048576*this.h.Fj);ic(this);jc(this);this.xc=new kc(this,this.h.Yh);this.l=this.u.l;this.G=this.l.G;this.vk=this.Db=10;this.ba=[0,0,0];this.Bd=[0,0,1];this.Ji=[0,0,0];this.Ql=this.qg=this.Wc=0;this.m=new lc(this);this.Zj=new mc(this);this.w={G:null,Yd:null,Ui:null,Te:null,mn:null,
ln:null,kh:!1,jh:!1,eg:!1,dg:!1,dk:this.h.Gj,bo:!1,Zk:!1,Tk:!1,Qi:!1,Qk:!1,Ri:!1,ca:30,Np:!1,jd:0,Op:0,jd:0,kc:[],wj:0,Wh:0};var e;a=this.lc.srses;this.ag={};if(null==a)e=!1;else{for(e in a)b=new nc(this,e,a[e]),this.ag[e]=b;e=!0}e&&(e=this.lc.referenceFrame,null==e?e=!1:(this.bb=new oc(this,e),e=0==this.bb.Ae?!1:!0));if(e)if(e=this.lc.credits,this.I={},null==e)e=!1;else{for(var f in e)pc(this,f,new qc(this,e[f]));e=!0}var g;if(f=e){f=this.lc.stylesheets;this.cf=[];if(null!=f)for(g in f)e=new xc(this,
g,f[g]),this.cf[g]=e;f=!0}if(g=f)if(g=this.lc.surfaces,this.ya=[],null==g)g=!1;else{f=0;for(e=g.length;f<e;f++)a=new yc(this,g[f]),this.ya.push(a),a.g=this.ya.length-1;g=!0}if(g){g=this.lc.glue;this.Ih=[];if(null!=g)for(f=0,e=g.length;f<e;f++)a=new yc(this,g[f],"glue"),this.Ih[a.f.join(";")]=a;g=!0}if(g){g=this.lc.virtualSurfaces;this.bc=[];if(this.h.Hj&&null!=g)for(f=0,e=g.length;f<e;f++)a=new zc(this,g[f]),this.bc[a.Zp]=a;g=!0}var h;if(g){g=this.lc.boundLayers;this.Ta=[];if(null!=g)for(var k in g)f=
new Ac(this,g[k],k),this.Bi(k,f);g=!0}if(k=g){k=this.lc.freeLayers;this.X=[];if(null!=k)for(h in k)g=new yc(this,k[h],"free"),this.Di(h,g);k=!0}if(h=k){h=this.lc.namedViews;this.Jf=[];if(null!=h)for(var l in h)k=new gc(0,h[l]),this.Jf[l]=k;l=this.lc.view;null!=l&&(this.Fo=JSON.parse(JSON.stringify(l)));h=!0}h&&(l=this.lc.browserOptions,this.uk={},null!=l&&(this.uk=JSON.parse(JSON.stringify(l))));this.m.Xl=0;this.m.Wl=0;this.m.wj=performance.now();this.m.Wh=this.wj;this.rp=(this.Dh=!Sa(Ta(this)))?
Ta(this).Hd().a:100;this.Dm=Array(6E4);this.Cm=Array(6E4);this.Mk=Array(6E4);this.Vu=Array(3);this.Wu=Array(5);this.Mq=new Float32Array(24);l=this.bb.Dd.Ca;h=-1;k=Number.MAX_VALUE;g=0;for(f=l.length;g<f;g++)e=l[g],e.f[0]<k&&(k=e.f[0]),e.f[0]>h&&(h=e.f[0]);l=[k,h];this.Pj=l[0];this.lm=l[1];this.Kb=new Bc(this);null!=this.lc.position&&this.setPosition(this.lc.position,!1);this.ve(this.Fo);this.se=.5*this.l.da[0];this.Vk=this.Rk=this.zh=this.ec=this.Jl=!1;this.vg=0;this.Uk=this.Nk=this.Wk=this.Lk=this.Sk=
this.Xk=this.Ok=this.Pk=!1;this.Pi=!0;this.Yk=0;this.Eo=!1;this.yh=this.h.Jg;this.Ek=2;this.ng=this.rf=0;this.Dn=this.Hi=1;this.Po=Math.log(8);this.Is=Math.log(2);this.dl=this.Do=this.ua=!0;this.ke=this.Uh=this.ee=this.Ub=this.Tb=this.Kc=null;this.Oh=0;this.Ph=[];this.Ti=this.l.j.Ob({});this.qr=this.l.j.Ob({De:!1,ff:!1});this.lr=this.l.j.Ob({oh:!0,sc:!0});this.kr=this.l.j.Ob({De:!1,sc:!0});this.jr=this.l.j.Ob({De:!1,ff:!1,sc:!0});this.l.j.Ob({De:!1,ff:!0,sc:!1});Cc(this);this.Bb=[];this.Ei("map",
this.pr.bind(this),!0)}m=ec.prototype;m.C=function(){this.T=!0;this.Kb.C();for(var a in this.X)this.X[a].Kb.C();this.Sb.clear();this.Jb.clear();this.zc.clear();null!=this.l&&(this.l.C(),this.l=null)};function ic(a){a.Se=a.h.gm;!a.Se&&a.h.fm&&(a.Se=r.Ga.Go());jc(a)}function jc(a){var b=1/(a.Se?Math.pow(2,Math.max(0,a.h.ai-1)):1),b=.5*(b+1/(a.Se?Math.pow(2,a.h.ai):1)),c=a.Jb;c.Oe=1048576*a.h.zj*b;Dc(c);c=a.Sb;c.Oe=1048576*a.h.Cj*b;Dc(c);c=a.zc;c.Oe=1048576*a.h.Fj*(.8>b?.5:1);Dc(c)}
function Cc(a){var b=0;a.Se&&(b=a.h.ai);a.pi=a.h.im*Math.pow(2,b)}m.ae=function(){return this.u.ps.ae()};m.ol=function(){return Ma(this.ag)};function pc(a,b,c){a.I[b]=c;a.Bk[c.f]=c;c.Io=b}m.gl=function(){return Ma(this.I)};m.be=function(a){a:{for(var b=this.ya,c=0,d=b.length;c<d;c++)if(b[c].f==a){a=b[c];break a}a=null}return a};m.ej=function(){for(var a=[],b=0,c=this.ya.length;b<c;b++)a.push(this.ya[b].f);return a};m.Bi=function(a,b){this.Ta[a]=b};
m.Hm=function(a){this.Ta[a]&&(this.Ta[a].C(),this.Ta[a]=null)};function Ec(a,b){var c=a.Ta,d;for(d in c)if(c[d].Zs==b)return c[d];return null}m.Eh=function(){return Ma(this.Ta)};m.Di=function(a,b){this.X[a]=b;this.ve(this.yg());D(this)};m.Im=function(a){this.X[a]&&(this.X[a].C(),this.X[a]=null,this.ve(this.yg()),D(this))};m.$i=function(){var a=[],b;for(b in this.X)a.push(b);return a};function Fc(a,b){return null==b?null:-1!=b.indexOf("+proj")?new nc(a,{srsDef:b}):a.ag[b]}
m.ve=function(a,b){if(null!=a){if("string"===typeof a)if(a=a.trim(),"{"==a.charAt(0))try{a=JSON.parse(a)}catch(f){return}else{a=this.Jf[a];if(!a)return;a=a.ub()}var c=JSON.stringify(a);if(c!=this.Vn||b)this.th.parse(a),this.Vn=c,this.lh++;Gc(this);Hc(this);c=this.th.X;this.Bh=[];for(var d in c){var e=this.X[d];e&&(e.ng=c[d].depthShift||0,this.Bh.push(e),c[d].style?Ic(e,c[d].style):Ic(e,e.Pf))}D(this)}};function La(a){var b=[],c;for(c in a.cf)b.push(c);return b}m.yg=function(){return this.th.ub()};
function Jc(a){a.lh++;Gc(a);Hc(a);D(a)}function Kc(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c].f==b)return c;return-1}function Ma(a){var b=[],c;for(c in a)b.push(c);return b}m.setPosition=function(a){this.sa=new fc(this,a);D(this)};m.pb=function(a,b,c){return this.bb.pb(a,b,c)};function Ta(a){return a.bb.Xb.Sj}m.uc=function(){return this.sa.clone()};m.Od=function(a){if("object"===typeof a&&null!==a)for(var b in a)this.Nd(b,a[b])};
m.fl=function(a,b){if(!Sa(Ta(this))){var c=Lc(this).jv(a[0],a[1],b[0],b[1]),c=c.rv-c.sv;isNaN(c)&&(c=0);return c}return 0};m.Hb=function(a,b){if(!a)return b;a=a.trim();return-1!=a.indexOf("://")?a:0==a.indexOf("//")?this.rc+a:0==a.indexOf("/")?this.Hc+a:this.Qa+a};
m.Nd=function(a,b){switch(a){case "map":this.h.c=r.mk(b,null);break;case "mapCache":this.h.zj=r.Be(b,10,900);jc(this);break;case "mapGPUCache":this.h.Cj=r.Be(b,10,360);jc(this);break;case "mapMetatileCache":this.h.Fj=r.Be(b,10,60);jc(this);break;case "mapTexelSizeFit":this.h.im=r.Be(b,1E-4,1.1);break;case "mapLowresBackground":this.h.Ej=r.Be(b,0,0);break;case "mapDownloadThreads":this.h.Yh=r.Be(b,1,6);break;case "mapMaxProcessingTime":this.h.$h=r.Be(b,1,50);break;case "mapMobileMode":this.h.gm=r.Ja(b,
!1);ic(this);break;case "mapMobileModeAutodect":this.h.fm=r.Ja(b,!1);break;case "mapMobileDetailDegradation":this.h.ai=r.Be(b,1,2);break;case "mapNavSamplesPerViewExtent":this.h.oe=r.Be(b,1E-11,4);break;case "mapFog":this.h.Jg=r.Ja(b,!1);break;case "mapIgnoreNavtiles":this.h.em=r.Ja(b,!1);break;case "mapAllowHires":this.h.Qo=r.Ja(b,!0);break;case "mapAllowLowres":this.h.Ro=r.Ja(b,!0);break;case "mapAllowSmartSwitching":this.h.So=r.Ja(b,!0);break;case "mapDisableCulling":this.h.bm=r.Ja(b,!1);break;
case "mapPreciseCulling":this.h.hm=r.Ja(b,!1);break;case "mapHeightLodBlend":this.h.Kg=r.Ja(b,!0);break;case "mapHeightNodeBlend":this.h.dm=r.Ja(b,!0);break;case "mapBasicTileSequence":this.h.To=r.Ja(b,!0);break;case "mapSmartNodeParsing":this.h.Vo=r.Ja(b,!0);break;case "mapStoreLoadStats":this.h.Gj=r.Ja(b,!0);this.w.dk=this.h.Gj;break;case "mapXhrImageLoad":this.h.ci=r.Ja(b,!1);break;case "mapLoadMode":this.h.Dj=r.mk(b,"topdown");break;case "mapGeodataLoadMode":this.h.cm=r.mk(b,"fit");break;case "mapPreciseBBoxTest":this.h.Mg=
r.Ja(b,!0);break;case "mapPreciseDistanceTest":this.h.bi=r.Ja(b,!1);break;case "mapHeightfiledWhenUnloaded":this.h.Lg=r.Ja(b,!1);break;case "mapForceMetatileV3":this.h.Bj=r.Ja(b,!1);break;case "mapVirtualSurfaces":this.h.Hj=r.Ja(b,!0);break;case "mapDegradeHorizon":this.h.Xh=r.Ja(b,!0);break;case "mapDegradeHorizonParams":this.h.Aj=r.cv(b);break;case "mario":this.h.Wo=r.Ja(b,!0)}};
m.Ie=function(a){switch(a){case "map":return this.h.c;case "mapCache":return this.h.zj;case "mapGPUCache":return this.h.Cj;case "mapMetatileCache":return this.h.Fj;case "mapTexelSizeFit":return this.h.im;case "mapLowresBackground":return this.h.Ej;case "mapDownloadThreads":return this.h.Yh;case "mapMaxProcessingTime":return this.h.$h;case "mapMobileMode":return this.h.gm;case "mapMobileModeAutodect":return this.h.fm;case "mapMobileDetailDegradation":return this.h.ai;case "mapNavSamplesPerViewExtent":return this.h.oe;
case "mapFog":return this.h.Jg;case "mapIgnoreNavtiles":return this.h.em;case "mapAllowHires":return this.h.Qo;case "mapAllowLowres":return this.h.Ro;case "mapAllowSmartSwitching":return this.h.So;case "mapDisableCulling":return this.h.bm;case "mapPreciseCulling":return this.h.hm;case "mapHeightLodBlend":return this.h.Kg;case "mapHeightNodeBlend":return this.h.dm;case "mapBasicTileSequence":return this.h.To;case "mapSmartNodeParsing":return this.h.Vo;case "mapStoreLoadStats":return this.h.Gj;case "mapXhrImageLoad":return this.h.ci;
case "mapLoadMode":return this.h.Dj;case "mapGeodataLoadMode":return this.h.cm;case "mapPreciseBBoxTest":return this.h.Mg;case "mapPreciseDistanceTest":return this.h.bi;case "mapHeightfiledWhenUnloaded":return this.h.Lg;case "mapForceMetatileV3":return this.h.Bj;case "mapVirtualSurfaces":return this.h.Hj;case "mapDegradeHorizon":return this.h.Xh;case "mapDegradeHorizonParams":return this.h.Aj;case "mario":return this.h.Wo}};m.click=function(a,b,c){this.Kc=[a,b,c]};
m.Kl=function(a,b,c,d){this.Tb=[a,b,c,d]};function D(a){a.ua=!0;a.Do=!0;a.dl=!0}m.xg=function(a,b){return this.l.xg(a,b)};
m.jl=function(a,b,c,d){this.Do&&(this.Eb=1,Ob(this.l,"depth"),Mc(this),Ob(this.l,"base"),this.Eb=0);var e;e=this.l;var f=e.j.s,g=e.xg(a,b),h=e.G.uc();f.checkFramebufferStatus(f.FRAMEBUFFER)!=f.FRAMEBUFFER_COMPLETE?e=[0,0,0,null,g,Number.MAX_VALUE,h]:(b=Hb(e.Bf,Math.floor(e.de/e.da[0]*a),e.de-Math.floor(e.de/e.da[1]*b)-1),a=1/255*b[0]+b[1]+255*b[2]+65025*b[3],b=!(255==b[0]&&255==b[1]&&255==b[2]&&255==b[3]),e.tj=[h[0]+g[0]*a,h[1]+g[1]*a,h[2]+g[2]*a],e=[e.tj[0],e.tj[1],e.tj[2],b,g,a,h]);var g=!1,h=this.ba,
k;a=e[4];if(Sa(Ta(this))){b=[0,0,Math.min(-1E3,this.bb.Dd.kj[0])];var f=[0,0,1],l=r.Math.vec3Dot(f,a);b=[b[0]-h[0],b[1]-h[1],b[2]-h[2]];b=r.Math.vec3Dot(b,f)/l;0<=b&&(!e[3]||b<e[5])&&(k=[a[0]*b+h[0],a[1]*b+h[1],a[2]*b+h[2]],g=!0)}else{var l=Ta(this).Hd().b+this.bb.Dd.kj[0],n=[h[0],h[1],h[2]];b=r.Math.vec3Dot(a,a);f=2*r.Math.vec3Dot(a,n);l=r.Math.vec3Dot(n,n)-l*l;l=f*f-4*b*l;0<l&&(l=Math.sqrt(l),n=(-f-l)/(2*b),b=(-f+l)/(2*b),b=n<b?n:b,!e[3]||b<e[5])&&(k=[a[0]*b+h[0],a[1]*b+h[1],a[2]*b+h[2]],g=!0)}if(!e[3]&&
!g)return null;g||(k=[e[0]+h[0],e[1]+h[1],e[2]+h[2]]);k=this.pb(k,"physical","navigation");"float"==c&&(d=null!=d?d:Nc(this,k,100,this.h.oe),c=this.cd(k,d),k[2]-=c[0]);return k};
m.lj=function(a,b,c){this.dl&&this.sf&&(this.l.j.eb(this.Ti),Ob(this.l,"geo"),cc(this.l),Ob(this.l,"base"),this.dl=!1);if(!this.sf)return this.ee=this.Ub=this.ke=this.Uh=null,[null,!1,[]];a=this.l.lj(a,b,c);if(a[0]){a=this.Ph[a[1]+(a[2]<<8)];if("hover"==c)return this.Uh=this.Ub,this.ke=this.ee,a&&1==a[3]?(this.Ub=a,this.ee=null!=a?a[0]["#id"]:null):this.ee=this.Ub=null,a=[],this.ee!=this.ke&&(null!=this.ke&&a.push(["leave",this.Uh,this.ke]),null!=this.ee&&a.push(["enter",this.Ub,this.ee]),this.ua=
!0),null!=this.Ub&&1==this.Ub[3]?[this.Ub,!0,a]:[null,!1,a];if("click"==c)return null!=a&&1==a[2]?[a,!0,[]]:[null,!1,[]]}else return a=[],"hover"==c&&(this.Uh=this.Ub,this.ke=this.ee,this.ee=this.Ub=null,null!=this.ke&&(null!=this.ke&&a.push(["leave",this.Uh,this.ke]),this.ua=!0)),[null,!1,a]};
m.pr=function(){1!=this.Eb&&db(this.l.j);this.yd={Qh:{},fj:{},Ij:{}};var a=Sa(Ta(this));r.i.create();this.sa.check();var b=this.sa.o[4],c=Nc(this,Oc(this.sa),this.sa.o[8],this.h.oe),d=this.cd(Oc(this.sa),c,!0);this.m.Co=d[0];this.m.Bo=b;"float"==this.sa.o[3]&&(b+=d[0]);c=this.sa.Fh(Sa(Ta(this)));this.G.setPosition(c.Bc);var e=this.G,f=c.Rm;e.Sm=!0;e.Zf=f.slice();e.ua=!0;this.Bd=c.xi;this.ba=c.Bc;this.Wc=c.lt+b;this.qg=this.Wc-d[0];this.vk=Pc(this.sa);this.Db=Math.max(this.qg,this.vk);this.Db=r.Ee(this.Db,
.1,this.G.pf);this.wk=Math.tan(r.La(.5*this.sa.bd()));this.Vq=Math.max(this.qg,this.vk*this.wk);this.l.Db=this.Db;d=this.G;d.zq=this.sa.o[8];d.ua=!0;d=Oc(this.sa);b=this.pb([d[0],d[1],b],"navigation","physical");this.Ji=[b[0],b[1],b[2]];b[0]+=c.Bc[0];b[1]+=c.Bc[1];b[2]+=c.Bc[2];this.G.setPosition([0,0,0]);this.ba=b;b=Math.max(this.Wc,this.Db)/6E5;d=Math.max(2,40*b);b=Math.max(1,b);e=this.G;e.al=.5*this.sa.bd();e.Qg=d;e.pf=12E6*b;e.ua=!0;this.l.ua=!0;this.l.yh=this.yh;this.l.Oh=0;this.l.Ph=this.Ph;
this.l.Ub=this.Ub;this.l.ba=this.ba;this.l.qh=this.sa.Rb();this.l.Kn=Math.cos(r.La(this.l.qh[1]));this.l.Bd=this.Bd;a?(b=r.La(this.l.qh[0]),this.l.Pl=[-Math.sin(b),Math.cos(b),0,0,0]):(b=c.xi,this.l.Pl=[b[0],b[1],b[2],0],this.Tq=r.D.length(this.ba),b=[0,0,0],r.D.normalize(this.ba,b),this.Uq=b);this.l.$n=1/Math.max(1,Math.log(this.Db)/Math.log(1.04));this.l.jq=Math.abs(this.l.qh[1]/-90);this.Xn=200*this.h.Aj[0];this.ir=.5*(1+Math.cos(r.La(Math.min(180,Math.abs(6*this.l.qh[1])))));1!=this.Eb?this.l.j.clear(!0,
!1):this.l.j.clear(!0,!0,[255,255,255,255]);this.l.j.eb(this.qr);1!=this.Eb&&.8>this.h.Ej&&(2==this.vg?Lb(this.l,this.l.mg,this.l.Em):Lb(this.l,this.l.Ii,this.l.Em));this.l.j.eb(this.Ti);Cc(this);this.ng=this.xc.Ki=0;this.Xa(null,a,c)};
m.update=function(){if(1!=this.T&&(this.u.jk&&Date.now()>this.u.jk-6E4&&this.u.pq(),null==this.Fe||"hidden"!=this.Fe.style.visibility)){var a=this.sa,b=this.Rl,b=b.o;a.o[0]==b[0]&&r.isEqual(a.o[1],b[1],1E-7)&&r.isEqual(a.o[2],b[2],1E-7)&&a.o[3]==b[3]&&r.isEqual(a.o[4],b[4],.001)&&r.isEqual(a.o[5],b[5],.001)&&r.isEqual(a.o[6],b[6],.001)&&r.isEqual(a.o[7],b[7],.001)&&r.isEqual(a.o[8],b[8],.001)&&r.isEqual(a.o[9],b[9],.001)||this.u.dc("map-position-changed",{position:this.sa.o.slice(),"last-position":this.Rl.o.slice()});
this.Ql!=this.qg&&this.u.dc("map-position-fixed-height-changed",{height:this.qg,"last-height":this.Ql});this.Rl=this.sa.clone();this.Ql=this.qg;this.yh=this.h.Jg;a=this.l.Fe.getBoundingClientRect();if(this.l.da[0]!=a.width||this.l.da[1]!=a.height)this.l.Vj(),this.ua=!0;a=this.ua;b=this.m;if(a){b.Yd=0;b.Vi=0;b.xh=0;b.mf=0;b.vb=0;b.vi=0;b.ji=0;for(var c=b.ii=0,d=b.Tf.length;c<d;c++)b.Tf[c]=0}b.Xc++;b.Wp++;b.Bp=performance.now();for(this.xc.update();0<this.Ld.length;){if(this.m.cb>this.h.$h){D(this);
break}this.Ld[0]();this.Ld.shift()}this.ua&&(this.ua=!1,this.Dn=this.Hi=0,Mc(this),this.xc.update(),this.u.dc("map-update",{}));if(null!=this.Kc||null!=this.Tb){if(null!=this.Tb){b=this.lj(this.Tb[0],this.Tb[1],"hover");1==b[1]&&null!=b[0]&&this.u.dc("geo-feature-hover",{feature:b[0][0],"canvas-coords":ub(this.l,b[0][1],pa(this.G)),"camera-coords":b[0][1],state:this.Tb[3]},!0);b=b[2];if(null!=b)for(c=0,d=b.length;c<d;c++){var e=b[c];switch(e[0]){case "enter":this.u.dc("geo-feature-enter",{feature:e[1][0],
"canvas-coords":ub(this.l,e[1][1],pa(this.G)),"camera-coords":e[1][1],state:this.Tb[3]},!0);break;case "leave":this.u.dc("geo-feature-leave",{feature:e[1][0],"canvas-coords":ub(this.l,e[1][1],pa(this.G)),"camera-coords":e[1][1],state:this.Tb[3]},!0)}}1!=this.Tb[2]&&(this.Tb=null)}null!=this.Kc&&(b=this.lj(this.Kc[0],this.Kc[1],"click"),1==b[1]&&null!=b[0]&&this.u.dc("geo-feature-click",{feature:b[0][0],"canvas-coords":ub(this.l,b[0][1],pa(this.G)),"camera-coords":b[0][1],state:this.Kc[2]},!0),this.Kc=
null)}this.m.end(a)}};
r.Bq=function(){function a(a,b,c){if(Ha>=ib){var d=Pa;ib+=65536;Pa=Array(ib);for(var e=0,f=Ha;e<f;e++)Pa[e]=d[e]}Pa[Ha]={Ef:a,Fi:b,mi:c};Ha++}function b(){for(var a=0,b=Pa,c=0,d=Ha;c<d;c++){var e=b[c],f=e.Ef,g=f.type,h=e.mi;if(e.hitable||e.Xe||"icon"==g||"label"==g)e.Xe||(postMessage(e.Ef,e.Fi),a++);else{switch(g){case "flat-line":for(var k=f.vertexBuffer.length,l=c+1;l<d;l++){var n=b[l];n.mi==h&&(n.Xe=!0,k+=n.Ef.vertexBuffer.length)}for(var p=new Float32Array(k),k=0,l=c;l<d;l++){var n=b[l],q=n.Ef;
if(n.mi==h){n=q.vertexBuffer;q.vertexBuffer=null;for(var q=0,t=n.length;q<t;q++)p[k+q]=n[q];k+=t}}f.vertexBuffer=p;e.Fi=[p.buffer];break;case "pixel-line":case "line-label":k=f.vertexBuffer.length;for(l=c+1;l<d;l++)n=b[l],n.mi==h&&(n.Xe=!0,k+=n.Ef.vertexBuffer.length);for(var p=new Float32Array(k),u=new Float32Array(k),k=0,l=c;l<d;l++)if(n=b[l],q=n.Ef,n.mi==h){n=q.vertexBuffer;q.vertexBuffer=null;if("line-label"==g){var v=q.texcoordsBuffer;q.texcoordsBuffer=null}else v=q.normalBuffer,q.normalBuffer=
null;q=0;for(t=n.length;q<t;q++)p[k+q]=n[q],u[k+q]=v[q];k+=t}f.vertexBuffer=p;"line-label"==g?f.texcoordsBuffer=u:f.normalBuffer=u;e.Fi=[p.buffer,u.buffer]}a++;postMessage(e.Ef,e.Fi)}}Ha=0}function c(a,b,c,d,f,g){var h=B(d,"next-pass",b,c);if(null!=h)for(var k=0,l=h.length;k<l;k++){var n=h[k][0];d=J(h[k][1],a,f);visible_=B(d,"visible",b,c);if(0!=visible_)if(hoverLayerId_=B(d,"hover-layer",b,c),hoverlayer_=""!=hoverLayerId_?J(hoverLayerId_,a,f):null,null!=hoverlayer_){var p=Ga;Ga=1;e(a,b,c,d,n,g);
Ga=2;e(a,b,c,hoverlayer_,n,g);Ga=p}else e(a,b,c,d,n,g)}}function d(a,b,d,f,g,h){for(var k in V){var l=V[k],n=B(l,"filter",b,d);b.Xg=b.properties||{};b.id&&(b.Xg["#id"]=b.id);if(!n||A(n,b,g,h)){var n=a,p=b,q=d,ca=f,R=B(l,"visible",p,q),ea=B(l,"z-index",p,q);if(0!=R){var R=p.Xg,t=B(l,"hover-layer",p,q),t=""!=t?J(t,n,ca):null;null!=t?(Ga=1,e(n,p,q,l,ea,R),c(n,p,q,l,ca,R),Ga=2,e(n,p,q,t,ea,R),c(n,p,q,t,ca,R)):(Ga=0,e(n,p,q,l,ea,R),c(n,p,q,l,ca,R))}}}}function e(b,c,d,e,f,g){switch(b){case "line-string":(B(e,
"point",c,d)||B(e,"label",c,d))&&v(c,d,e,f,g);u(c,d,e,f,g);break;case "point-array":v(c,d,e,f,g);break;case "polygon":var h=style_,k=c.vertices||[];if(0!=k.length&&((B(h,"point",c,d)||B(h,"label",c,d))&&n(c,k,d,h,f,g,!1),(B(h,"line",c,d)||B(h,"line-label",c,d))&&n(c,k,d,h,f,g,!0),0!=B(h,"polygon",c,d))){var l=c.surface||[];if(0!=l.length){b=B(h,"hover-event",c,d);e=B(h,"click-event",c,d);var p=B(h,"draw-event",c,d),q=B(h,"enter-event",c,d),R=B(h,"leave-event",c,d),ca=B(h,"zbuffer-offset",c,d);c=B(h,
"polygon-color",c,d);d=[0,0,0];for(var ea=l.length/3*3,h=Array(3*ea),t=0,y=0,x,z=0;z<ea;z++)x=3*l[t++],x=[k[x++],k[x++],k[x]],null!=forceScale_&&(x=[x[0]*forceScale_[0],x[1]*forceScale_[1],x[2]*forceScale_[2]]),d[0]+=x[0],d[1]+=x[1],d[2]+=x[2],h[y++]=x[0],h[y++]=x[1],h[y++]=x[2];0<ea&&(k=1/ea,d[0]*=k,d[1]*=k,d[2]*=k);d[0]+=Qa[0];d[1]+=Qa[1];d[2]+=Qa[2];a({command:"addRenderJob",type:"flat-line",vertexBuffer:h,color:c,"z-index":f,center:d,"hover-event":b,"click-event":e,"draw-event":p,hitable:b||e||
q||R,state:Ga,eventInfo:g,"enter-event":q,"leave-event":R,"zbuffer-offset":ca,lod:Ka})}}}}function f(a,b){if(!a||""==a)return!1;for(var c=b.Xd,d=0,e=a.length;d<e;d++){var f=a.charCodeAt(d);if(10!=f&&9!=f&&!c[f])return!1}return!0}function g(a,b){for(var c=0,d=[0,0,0],e=[1,0,0],f=0,g=a.length-1;f<g;f++){var d=a[f],e=a[f+1],e=[e[0]-d[0],e[1]-d[1],e[2]-d[2]],h=vec3Length(e);if(c+h>b){c=(b-c)/h;d=[d[0]+e[0]*c,d[1]+e[1]*c,d[2]+e[2]*c];vec3Normalize(e);break}c+=h}return[d,e]}function h(a,b,c){var d=0;c=
c.Xd;for(var e=0,f=a.length;e<f;e++){var g=a.charCodeAt(e);10!=g&&(9==g&&(g=32),g=c[g],null!=g&&(d+=g.cg*b))}return d}function k(a,b,c,d,e,f,k,n){var p=c/d.v,q=h(b,p,d),R,ea=0;R=0;for(var ca=a.length-1;R<ca;R++)var t=a[R],u=a[R+1],ea=ea+vec3Length([u[0]-t[0],u[1]-t[1],u[2]-t[2]]);R=ea;ea=.5*(R-q);0>ea&&(ea=0);if(!(q>R)){a:{R=ea;for(var ca=0,v,q=[0,0,0],p=R+h(b,p,d),t=0,u=a.length-1;t<u;t++){v=a[t];var x=a[t+1];v=[x[0]-v[0],x[1]-v[1],x[2]-v[2]];ca+=vec3Length(v);ca>R&&(vec3Normalize(v),q[0]+=v[0],
q[1]+=v[1],q[2]+=v[2]);if(ca>p){vec3Normalize(q);if(wa){p=[0,0,0];vec3Normalize(ia,p);y(p,q,p);break a}p=[-q[1],q[0],0];break a}}p=q}null==p&&(p=[0,1,0]);ca=a[0];q=d.Xd;c/=d.v;R=d.hh*c;ca=[ca[0],ca[1],ca[2]];t=0;for(u=b.length;t<u;t++)if(v=b.charCodeAt(t),10==v)ca[0]+=-w[1]*R,ca[1]+=w[0]*R;else{9==v&&(v=32);w=q[v];x=1;null!=w&&(x=w.cg*c);var z=g(a,ea),w=g(a,ea+x),w=[.5*(w[1][0]+z[1][0]),.5*(w[1][1]+z[1][1]),.5*(w[1][2]+z[1][2])];vec3Normalize(w);n=l(z[0],w,-c*d.v*.7+e,v,c,n,n,p,d,f,k)[1];ea+=x}return n}}
function l(a,b,c,d,e,f,g,h,k,l,n,p){if(wa&&!p){p=[0,0,0];var q=[0,0,0];vec3Normalize(ia,q);y(q,b,p)}else p=[-b[1],b[0],0];a=[a[0],a[1],a[2]];var q=[a[0],a[1],a[2]],R=k.Xd;k=R[d];var t=0,ca=h[0],ea=h[1];h=h[2];9==d||32==d?(k=R[32],null!=k&&(a[0]+=b[0]*k.cg*e,a[1]+=b[1]*k.cg*e,t=k.$l*e)):null!=k&&(d=k.$l*e,R=k.Js*e,c=[p[0]*c,p[1]*c,p[2]*c],p=[c[0]+p[0]*R,c[1]+p[1]*R,c[2]+p[2]*R],q[0]=a[0]+b[0]*d,q[1]=a[1]+b[1]*d,q[2]=a[2]+b[2]*d,l[f]=a[0]-c[0],l[f+1]=a[1]-c[1],l[f+2]=a[2]-c[2],l[f+3]=h,n[g]=k.nn,n[g+
1]=k.sn,n[g+2]=ca,n[g+3]=ea,l[f+4]=a[0]-p[0],l[f+5]=a[1]-p[1],l[f+6]=a[2]-p[2],l[f+7]=h,n[g+4]=k.nn,n[g+5]=k.tn,n[g+6]=ca,n[g+7]=ea,l[f+8]=q[0]-c[0],l[f+9]=q[1]-c[1],l[f+10]=q[2]-c[2],l[f+11]=h,n[g+8]=k.pn,n[g+9]=k.sn,n[g+10]=ca,n[g+11]=ea,l[f+12]=a[0]-p[0],l[f+13]=a[1]-p[1],l[f+14]=a[2]-p[2],l[f+15]=h,n[g+12]=k.nn,n[g+13]=k.tn,n[g+14]=ca,n[g+15]=ea,l[f+16]=q[0]-p[0],l[f+17]=q[1]-p[1],l[f+18]=q[2]-p[2],l[f+19]=h,n[g+16]=k.pn,n[g+17]=k.tn,n[g+18]=ca,n[g+19]=ea,l[f+20]=q[0]-c[0],l[f+21]=q[1]-c[1],l[f+
22]=q[2]-c[2],l[f+23]=h,n[g+20]=k.pn,n[g+21]=k.sn,n[g+22]=ca,n[g+23]=ea,f+=24,g+=24,a[0]+=b[0]*k.cg*e,a[1]+=b[1]*k.cg*e,t=k.$l*e);return[a,f,g,t]}function n(a,b,c,d,e,f,g){var h=a.borders||[];if(0!=h.length){var k={},l;for(l in a)"surface"!=l&&"vertices"!=l&&"borders"!=l&&(k[l]=a[l]);a=h.length;for(l=0;l<a;l++){var n=h[l],p=n.length;if(0<p){var q;q=g?Array(p+1):Array(p);for(var R=0;R<p;R++){var t=3*n[R];q[R]=[b[t++],b[t++],b[t]];g&&0==R&&(q[p]=q[0])}k.points=q;g?u(k,c,d,e,f):v(k,c,d,e,f)}}}}function p(a,
b,c){switch(a){case "top-left":return[0,0];case "top-right":return[-b,0];case "top-center":return[.5*-b,0];case "center-left":return[0,.5*-c];case "center-right":return[-b,.5*-c];case "center-center":return[.5*-b,.5*-c];case "bottom-left":return[0,-c];case "bottom-right":return[-b,-c];case "bottom-center":return[.5*-b,-c]}}function v(b,c,d,e,g){var k=[];b.lines?k=b.lines||[]:b.points&&(k=[b.points]);if(0!=k.length){var n=B(d,"visibility",b,c),q=B(d,"culling",b,c),R=B(d,"hover-event",b,c),u=B(d,"click-event",
b,c),v=B(d,"draw-event",b,c),ca=B(d,"enter-event",b,c),y=B(d,"leave-event",b,c),x=B(d,"zbuffer-offset",b,c),ea=B(d,"point",b,c),z=B(d,"point-flat",b,c),w=B(d,"point-color",b,c),A=.5*B(d,"point-radius",b,c),C=B(d,"icon",b,c);if(1==C){var cb=B(d,"icon-source",b,c);if(cb)var lb=24*k.length,J=18*k.length,F={Cd:B(d,"icon-color",b,c),Jp:B(d,"icon-scale",b,c),gi:B(d,"icon-offset",b,c),ih:B(d,"icon-stick",b,c),Of:B(d,"icon-origin",b,c),Tp:B(d,"icon-source",b,c),na:new Float32Array(lb),Nf:new Float32Array(J),
ig:new Float32Array(lb),g:0,Rh:0};else C=!1}var N=B(d,"label",b,c);if(1==N){var cb=B(d,"label-source",b,c),K=t(d,cb,b),U=B(d,"label-size",b,c);if("$name"==cb&&!f(K,za["default"])){var aa=t(d,"$name:en",b);f(aa,za["default"])&&(K=aa)}if(K&&""!=K&&1E-4<Math.abs(U))var lb=24*K.length*k.length,J=18*K.length*k.length,V={Cd:B(d,"label-color",b,c),v:U,gi:B(d,"label-offset",b,c),ih:B(d,"label-stick",b,c),Of:B(d,"label-origin",b,c),Fq:B(d,"label-align",b,c),Iu:K,Ce:B(d,"label-width",b,c),na:new Float32Array(lb),
Nf:new Float32Array(J),ig:new Float32Array(lb),g:0,Rh:0};else N=!1}var T=0,W=0,Z=[],ba,wa=4*A;8>wa&&(wa=8);32<wa&&(wa=32);ba=wa;for(var Qa=0,E=2*Math.PI/ba,I=0;I<ba;I++)Z[I]=[-Math.sin(Qa),Math.cos(Qa)],Qa+=E;Z[ba]=[0,1];for(var Ra=0,ja=[0,0,0],Ha=0,Pa=k.length;Ha<Pa;Ha++){var ha=k[Ha];if(Array.isArray(ha)&&0<ha.length){var G=ha[0],X=[G[0],G[1],G[2]],Ra=Ra+ha.length;if(0==z)var va=12*ba,Y=Array(ha.length*va),sa=Array(12*ha.length*ba);else va=9*ba,Y=Array(ha.length*va);for(var I=0,oa=ha.length;I<oa;I++){null!=
forceScale_&&(X=[X[0]*forceScale_[0],X[1]*forceScale_[1],X[2]*forceScale_[2]]);ja[0]+=X[0];ja[1]+=X[1];ja[2]+=X[2];if(1==C){var qa=X,ta=F,O=ta.Tp,L=ta.g,Ub=ta.Rh,ib=L,rc=Math.abs(O[3]*ta.Jp),sc=Math.abs(O[4]*ta.Jp),la=ta.na,ua=ta.ig,Yc=ta.Nf;la[L]=0;la[L+1]=0;la[L+2]=0;la[L+3]=0;la[L+4]=rc;la[L+5]=0;la[L+6]=0;la[L+7]=0;la[L+8]=rc;la[L+9]=-sc;la[L+10]=0;la[L+11]=0;ua[L]=O[1];ua[L+1]=O[2];ua[L+2]=0;ua[L+3]=0;ua[L+4]=O[1]+O[3];ua[L+5]=O[2];ua[L+6]=0;ua[L+7]=0;ua[L+8]=O[1]+O[3];ua[L+9]=O[2]+O[4];ua[L+
10]=0;ua[L+11]=0;L+=12;la[L]=0;la[L+1]=0;la[L+2]=0;la[L+3]=0;la[L+4]=0;la[L+5]=-sc;la[L+6]=0;la[L+7]=0;la[L+8]=rc;la[L+9]=-sc;la[L+10]=0;la[L+11]=0;ua[L]=O[1];ua[L+1]=O[2];ua[L+2]=0;ua[L+3]=0;ua[L+4]=O[1];ua[L+5]=O[2]+O[4];ua[L+6]=0;ua[L+7]=0;ua[L+8]=O[1]+O[3];ua[L+9]=O[2]+O[4];ua[L+10]=0;ua[L+11]=0;for(var L=L+12,Ud=p(ta.Of,rc,sc),Ne=Ud[0]+ta.gi[0],Oe=Ud[1]+ta.gi[1],Pe=qa[0],Qe=qa[1],Re=qa[2],yb=ib;yb<L;yb+=4)la[yb]+=Ne,la[yb+1]-=Oe,Yc[Ub]=Pe,Yc[Ub+1]=Qe,Yc[Ub+2]=Re,Ub+=3;ta.g=L;ta.Rh=Ub}if(1==N){for(var Zc=
X,Ba=V,Vb=Ba.na,Se=Ba.ig,$c=Ba.Nf,Wb=Ba.g,Xb=Ba.Rh,Te=Wb,Vd=(""+Ba.Iu).match(/[^\r\n]+/g),zb=[],xa=0,Yb=Vd.length;xa<Yb;xa++){var mb=Vd[xa];do{var Zb;a:{for(var Wd=0,Ue=za["default"].Xd,tc=0,Xd=mb.length;tc<Xd;tc++){var nb=mb.charCodeAt(tc);if(Wd>Ba.Ce&&(10==nb||9==nb||32==nb)){Zb=tc;break a}if(10!=nb){9==nb&&(nb=32);var Yd=Ue[nb];null!=Yd&&(Wd+=Ba.v/za["default"].v*Yd.cg)}}Zb=Xd}if(mb.length==Zb){zb.push(mb);break}zb.push(mb.substring(0,Zb));mb=mb.substring(Zb+1)}while(1)}var uc=0,ad=0,Zd,$d=za["default"];
Zd=Ba.v/$d.v*$d.hh;for(var $b=0,bd=[],xa=0,Yb=zb.length;xa<Yb;xa++)bd[xa]=h(zb[xa],Ba.v/za["default"].v,za["default"]),$b=Math.max(bd[xa],$b);xa=0;for(Yb=zb.length;xa<Yb;xa++){var ae=bd[xa];switch(Ba.Fq){case "left":uc=0;break;case "right":uc=$b-ae;break;case "center":uc=.5*($b-ae)}for(var Ab=[uc,ad,0],be=zb[xa],cd=za["default"],Ve=Vb,We=Se,vc=Wb,dd=[1,0,0],Xe=[0,1,0],ce=Ba.v/cd.v,de=cd.hh*ce,ob=[Ab[0],Ab[1],Ab[2]],ed=[Ab[0],Ab[1],Ab[2]],fd=0,Ye=be.length;fd<Ye;fd++){var ee=be.charCodeAt(fd);if(10==
ee)ob[0]+=-dd[1]*de,ob[1]+=dd[0]*de,ed=[ob[0],ob[1],ob[2]];else var fe=l(ed,dd,0,ee,ce,vc,vc,Xe,cd,Ve,We,!0),ed=fe[0],vc=fe[1]}Wb=vc;ad-=Zd}var ge=p(Ba.Of,$b,-ad);offsetX_=ge[0]+Ba.gi[0];offsetY_=ge[1]+Ba.gi[1];for(var Ze=Zc[0],$e=Zc[1],af=Zc[2],xa=Te;xa<Wb;xa+=4)Vb[xa]+=offsetX_,Vb[xa+1]-=offsetY_,$c[Xb]=Ze,$c[Xb+1]=$e,$c[Xb+2]=af,Xb+=3;Ba.g=Wb;Ba.Rh=Xb}for(var Ya=0;Ya<ba;Ya++)1==ea&&(1==z?(Y[T]=X[0],Y[T+1]=X[1],Y[T+2]=X[2],Y[T+3]=X[0]+Z[Ya][0]*A,Y[T+4]=X[1]+Z[Ya][1]*A,Y[T+5]=X[2],Y[T+6]=X[0]+Z[Ya+
1][0]*A,Y[T+7]=X[1]+Z[Ya+1][1]*A,Y[T+8]=X[2],T+=9):(Y[T]=X[0],Y[T+1]=X[1],Y[T+2]=X[2],Y[T+3]=0,sa[W]=0,sa[W+1]=0,sa[W+2]=0,sa[W+3]=0,Y[T+4]=X[0],Y[T+5]=X[1],Y[T+6]=X[2],Y[T+7]=0,sa[W+4]=Z[Ya][0]*A,sa[W+5]=Z[Ya][1]*A,sa[W+6]=0,sa[W+7]=0,Y[T+8]=X[0],Y[T+9]=X[1],Y[T+10]=X[2],Y[T+11]=0,sa[W+8]=Z[Ya+1][0]*A,sa[W+9]=Z[Ya+1][1]*A,sa[W+10]=0,sa[W+11]=0,T+=12,W+=12));X=ha[I+1]}}}0<Ra&&(ja[0]/=Ra,ja[1]/=Ra,ja[2]/=Ra);ja[0]+=ia[0];ja[1]+=ia[1];ja[2]+=ia[2];var wc=R||u||ca||y;1==ea&&(1==z?a({command:"addRenderJob",
type:"flat-line",vertexBuffer:Y,color:w,"z-index":e,visibility:n,center:ja,"hover-event":R,"click-event":u,"draw-event":v,"enter-event":ca,"leave-event":y,"zbuffer-offset":x,hitable:wc,state:Ga,eventInfo:g,lod:Ka},[Y.buffer]):a({command:"addRenderJob",type:"pixel-line",vertexBuffer:Y,normalBuffer:sa,color:w,"z-index":e,visibility:n,center:ja,"hover-event":R,"click-event":u,"draw-event":v,"enter-event":ca,"leave-event":y,"zbuffer-offset":x,hitable:wc,state:Ga,eventInfo:g,lod:Ka},[Y.buffer,sa.buffer]));
1==C&&0<F.na.length&&a({command:"addRenderJob",type:"icon",vertexBuffer:F.na,originBuffer:F.Nf,texcoordsBuffer:F.ig,icon:H[F.Tp[0]],color:F.Cd,"z-index":e,visibility:n,culling:q,center:ja,stick:F.ih,"hover-event":R,"click-event":u,"draw-event":v,"enter-event":ca,"leave-event":y,"zbuffer-offset":x,hitable:wc,state:Ga,eventInfo:g,lod:Ka},[F.na.buffer,F.Nf.buffer,F.ig.buffer]);1==N&&0<V.na.length&&a({command:"addRenderJob",type:"label",vertexBuffer:V.na,originBuffer:V.Nf,texcoordsBuffer:V.ig,color:V.Cd,
"z-index":e,visibility:n,culling:q,center:ja,stick:V.ih,"hover-event":R,"click-event":u,"draw-event":v,"enter-event":ca,"leave-event":y,"zbuffer-offset":x,hitable:wc,state:Ga,eventInfo:g,lod:Ka},[V.na.buffer,V.Nf.buffer,V.ig.buffer])}}function u(b,c,d,e,g){var h,l=b.lines||[];if(0!=l.length){var n=B(d,"line",b,c),p=B(d,"line-label",b,c);if(n||p){var q=B(d,"hover-event",b,c),u=B(d,"click-event",b,c),v=B(d,"draw-event",b,c),R=B(d,"enter-event",b,c),x=B(d,"leave-event",b,c),ca=B(d,"zbuffer-offset",b,
c),z=B(d,"line-flat",b,c),ea=B(d,"line-color",b,c),w=.5*B(d,"line-width",b,c),A=B(d,"line-style",b,c),C=B(d,"line-style-texture",b,c),cb=B(d,"line-style-background",b,c),p=B(d,"line-label",b,c),lb=B(d,"line-label-size",b,c),F=0,N=0,J=!z&&2.1>w;if(!J){for(var K=[],V=[],U=8,T=0,aa=2*Math.PI/U,Z=0;Z<U;Z++)K[Z]=[-Math.sin(T),Math.cos(T)],V[Z]=T,T+=aa;K[U]=[0,1];V[U]=0}for(var W=0,ba=0;ba<l.length;ba++)Array.isArray(l[ba])&&(W+=l[ba].length);var Ha=6*(X||!z?4:3),E=new Float32Array(W*Ha+W*(J?0:U*(X||!z?
4:3)*3));if(!z||X)var I=new Float32Array(24*W+W*(J?0:12*U));if(X&&!J)var Ra=Float32Array(W);T=[0,0,0];aa=[];for(ba=0;ba<l.length;ba++)if(Array.isArray(l[ba])&&l[ba].length){var ja=l[ba];if(p){var Pa=Array(ja.length),ib=Array(ja.length);aa.push({yt:Pa,xt:ib})}for(var ha=ja[0],G,X="solid"!=A,va=.001,Y=.001,Z=0,sa=ja.length-1;Z<sa;Z++){G=ja[Z];h=ja[Z+1];null!=forceScale_&&(G=[G[0]*forceScale_[0],G[1]*forceScale_[1],G[2]*forceScale_[2]],h=[h[0]*forceScale_[0],h[1]*forceScale_[1],h[2]*forceScale_[2]]);
if(z&&!X){if(wa){var oa=[h[0]-G[0],h[1]-G[1],h[2]-G[2]],qa=Math.sqrt(oa[0]*oa[0]+oa[1]*oa[1]+oa[2]*oa[2]),Y=Y+qa,qa=0!=qa?1/qa:0,ta=[oa[0]*qa,oa[1]*qa,oa[2]*qa],O=[0,0,0],L=[0,0,0];vec3Normalize(ia,L);y(L,ta,O);O=[O[0]*w,O[1]*w,O[2]*w]}else oa=[h[0]-G[0],h[1]-G[1],0],qa=Math.sqrt(oa[0]*oa[0]+oa[1]*oa[1]),Y+=qa,qa=0!=qa?w/qa:0,O=[-oa[1]*qa,oa[0]*qa,0];E[F]=G[0]+O[0];E[F+1]=G[1]+O[1];E[F+2]=G[2]+O[2];E[F+3]=G[0]-O[0];E[F+4]=G[1]-O[1];E[F+5]=G[2]-O[2];E[F+6]=h[0]+O[0];E[F+7]=h[1]+O[1];E[F+8]=h[2]+O[2];
E[F+9]=G[0]-O[0];E[F+10]=G[1]-O[1];E[F+11]=G[2]-O[2];E[F+12]=h[0]-O[0];E[F+13]=h[1]-O[1];E[F+14]=h[2]-O[2];E[F+15]=h[0]+O[0];E[F+16]=h[1]+O[1];E[F+17]=h[2]+O[2];F+=18}else oa=[h[0]-G[0],h[1]-G[1],0],qa=Math.sqrt(oa[0]*oa[0]+oa[1]*oa[1]),Y+=qa,z?(qa=0!=qa?w/qa:0,O=[-oa[1]*qa,oa[0]*qa,0],null!=Ra&&(Ra[Z]=0!=qa?Math.atan2(oa[0],oa[1])+.5*Math.PI:0),E[F]=G[0],E[F+1]=G[1],E[F+2]=G[2],E[F+3]=va,I[N]=O[0],I[N+1]=O[1],I[N+2]=0,I[N+3]=w,E[F+4]=G[0],E[F+5]=G[1],E[F+6]=G[2],E[F+7]=-va,I[N+4]=-O[0],I[N+5]=-O[1],
I[N+6]=0,I[N+7]=-w,E[F+8]=h[0],E[F+9]=h[1],E[F+10]=h[2],E[F+11]=Y,I[N+8]=O[0],I[N+9]=O[1],I[N+10]=0,I[N+11]=w,E[F+12]=G[0],E[F+13]=G[1],E[F+14]=G[2],E[F+15]=-va,I[N+12]=-O[0],I[N+13]=-O[1],I[N+14]=0,I[N+15]=-w,E[F+16]=h[0],E[F+17]=h[1],E[F+18]=h[2],E[F+19]=-Y,I[N+16]=-O[0],I[N+17]=-O[1],I[N+18]=0,I[N+19]=-w,E[F+20]=h[0],E[F+21]=h[1],E[F+22]=h[2],E[F+23]=Y,I[N+20]=O[0],I[N+21]=O[1],I[N+22]=0,I[N+23]=w):(E[F]=G[0],E[F+1]=G[1],E[F+2]=G[2],E[F+3]=va,I[N]=h[0],I[N+1]=h[1],I[N+2]=h[2],I[N+3]=w,E[F+4]=G[0],
E[F+5]=G[1],E[F+6]=G[2],E[F+7]=-va,I[N+4]=h[0],I[N+5]=h[1],I[N+6]=h[2],I[N+7]=-w,E[F+8]=h[0],E[F+9]=h[1],E[F+10]=h[2],E[F+11]=-Y,I[N+8]=G[0],I[N+9]=G[1],I[N+10]=G[2],I[N+11]=w,E[F+12]=G[0],E[F+13]=G[1],E[F+14]=G[2],E[F+15]=va,I[N+12]=h[0],I[N+13]=h[1],I[N+14]=h[2],I[N+15]=w,E[F+16]=h[0],E[F+17]=h[1],E[F+18]=h[2],E[F+19]=-Y,I[N+16]=G[0],I[N+17]=G[1],I[N+18]=G[2],I[N+19]=w,E[F+20]=h[0],E[F+21]=h[1],E[F+22]=h[2],E[F+23]=Y,I[N+20]=G[0],I[N+21]=G[1],I[N+22]=G[2],I[N+23]=-w),F+=24,N+=24;va=Y}G=[ha[0],ha[1],
ha[2]];Z=0;for(sa=ja.length;Z<sa;Z++){null!=forceScale_&&(G=[G[0]*forceScale_[0],G[1]*forceScale_[1],G[2]*forceScale_[2]]);T[0]+=G[0];T[1]+=G[1];T[2]+=G[2];if(!J)for(h=null!=Ra?Ra[Z]:0,wa&&(ta=[0,0,0],L=[0,0,0],vec3Normalize(ia,L),vec3AnyPerpendicular(L,ta),vec3Normalize(ta),y(L,ta,L)),ha=0;ha<U;ha++)z&&!X?(E[F]=G[0],E[F+1]=G[1],E[F+2]=G[2],wa?(va=K[ha][0],Y=K[ha][1],E[F+3]=G[0]+(L[0]*va+ta[0]*Y)*w,E[F+4]=G[1]+(L[1]*va+ta[1]*Y)*w,E[F+5]=G[2]+(L[2]*va+ta[2]*Y)*w,va=K[ha+1][0],Y=K[ha+1][1],E[F+6]=G[0]+
(L[0]*va+ta[0]*Y)*w,E[F+7]=G[1]+(L[1]*va+ta[1]*Y)*w,E[F+8]=G[2]+(L[2]*va+ta[2]*Y)*w):(E[F+3]=G[0]+K[ha][0]*w,E[F+4]=G[1]+K[ha][1]*w,E[F+5]=G[2],E[F+6]=G[0]+K[ha+1][0]*w,E[F+7]=G[1]+K[ha+1][1]*w,E[F+8]=G[2]),F+=9):(va=Z!=sa-1?E[Z*Ha+3]:E[(Z-1)*Ha+11],E[F]=G[0],E[F+1]=G[1],E[F+2]=G[2],E[F+3]=va,I[N]=0,I[N+1]=0,I[N+2]=0,I[N+3]=0,E[F+4]=G[0],E[F+5]=G[1],E[F+6]=G[2],E[F+7]=va,I[N+4]=K[ha][0]*w,I[N+5]=K[ha][1]*w,I[N+6]=V[ha]+h,I[N+7]=0,E[F+8]=G[0],E[F+9]=G[1],E[F+10]=G[2],E[F+11]=va,I[N+8]=K[ha+1][0]*w,
I[N+9]=K[ha+1][1]*w,I[N+10]=V[ha+1]+h,I[N+11]=0,F+=12,N+=12);p&&(ha=[G[0],G[1],G[2]+.1*lb],Pa[Z]=ha,ib[sa-Z-1]=ha);G=ja[Z+1]}}0<W&&(T[0]/=W,T[1]/=W,T[2]/=W);T[0]+=Qa[0];T[1]+=Qa[1];T[2]+=Qa[2];Z=q||u||R||x;n&&(Z={command:"addRenderJob",vertexBuffer:E,color:ea,"z-index":e,center:T,normalBuffer:I,"hover-event":q,"click-event":u,"draw-event":v,hitable:Z,state:Ga,eventInfo:g,"enter-event":R,"leave-event":x,"zbuffer-offset":ca,"line-width":2*w,lod:Ka},Z.type=z?1==X?"flat-tline":"flat-line":1==X?"pixel-tline":
"pixel-line",X&&null!=C&&(Z.texture=[H[C[0]],C[1],C[2]],Z.background=cb),sa=JSON.stringify({U:Z.type,Cd:ea,nh:e,hv:ca,Pd:Ga}),I?a(Z,[E.buffer,I.buffer],sa):a(Z,[E.buffer],sa));if(p)for(Z=0,sa=aa.length;Z<sa;Z++)n=aa[Z].yt,ea=aa[Z].xt,w=b,p=T,E=c,l=d,I=e,ca=g,z=B(l,"line-label-color",w,E),q=B(l,"line-label-source",w,E),C=B(l,"line-label-size",w,E),cb=B(l,"line-label-offset",w,E),1E-4>Math.abs(C)||(X=t(l,q,w),"$name"!=q||f(X,za["default"])||(q=t(l,"$name:en",w),f(q,za["default"])&&(X=q)),X&&""!=X&&
(q=B(l,"hover-event",w,E),u=B(l,"click-event",w,E),v=B(l,"draw-event",w,E),R=B(l,"enter-event",w,E),x=B(l,"leave-event",w,E),w=B(l,"zbuffer-offset",w,E),l=48*X.length,E=new Float32Array(l),l=new Float32Array(l),A=q||u||R||x,n=k(n,X,C,za["default"],cb,E,l,0),k(ea,X,C,za["default"],cb,E,l,n),ea=JSON.stringify({U:"line-label",Cd:z,nh:I,hv:w}),a({command:"addRenderJob",type:"line-label",vertexBuffer:E,texcoordsBuffer:l,color:z,"z-index":I,center:p,"hover-event":q,"click-event":u,"draw-event":v,"enter-event":R,
"leave-event":x,"zbuffer-offset":w,hitable:A,state:Ga,eventInfo:ca,lod:Ka},[E.buffer,l.buffer],ea)))}}}function q(a){switch(a){case "filter":return null;case "inherit":return"";case "line":return!1;case "line-flat":return!1;case "line-width":return 1;case "line-color":return[255,255,255,255];case "line-style":return"solid";case "line-style-texture":return null;case "line-style-background":return[0,0,0,0];case "line-label":return!1;case "line-label-color":return[255,255,255,255];case "line-label-source":return"$name";
case "line-label-size":return 1;case "line-label-offset":return 0;case "point":return!1;case "point-flat":return!1;case "point-radius":return 1;case "point-Layer":return"solid";case "point-color":return[255,255,255,255];case "icon":return!1;case "icon-source":return null;case "icon-scale":return 1;case "icon-offset":return[0,0];case "icon-origin":return"bottom-center";case "icon-stick":return[0,0,0,255,255,255,255];case "icon-color":return[255,255,255,255];case "label":return!1;case "label-color":return[255,
255,255,255];case "label-source":return"$name";case "label-size":return 10;case "label-offset":return[0,0];case "label-origin":return"bottom-center";case "label-align":return"center";case "label-stick":return[0,0,0,255,255,255,255];case "label-width":return 200;case "polygon":return!1;case "polygon-color":return[255,255,255,255];case "z-index":return 0;case "zbuffer-offset":return[0,0,0];case "hover-event":return!1;case "hover-layer":return"";case "enter-event":return!1;case "leave-event":return!1;
case "click-event":return!1;case "draw-event":return!1;case "visible":return!0;case "visibility":return 0;case "culling":return 180;case "next-pass":return null}}function z(a,b,c){switch(b){case "inherit":return x(a,b,c,"string");case "line":return x(a,b,c,"boolean");case "line-flat":return x(a,b,c,"boolean");case "line-width":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "line-color":return x(a,b,c,"object",4,0,255);case "line-style":return x(a,b,c,"string");case "line-style-texture":return x(a,
b,c,"object",3,-Number.MAX_VALUE,Number.MAX_VALUE);case "line-style-background":return x(a,b,c,"object",4,0,255);case "line-label":return x(a,b,c,"boolean");case "line-label-source":return x(a,b,c,"string");case "line-label-color":return x(a,b,c,"object",4,0,255);case "line-label-size":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "line-label-offset":return x(a,b,c,"number",null,-Number.MAX_VALUE,Number.MAX_VALUE);case "point":return x(a,b,c,"boolean");case "point-flat":return x(a,b,c,
"boolean");case "point-radius":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "point-Layer":return x(a,b,c,"string");case "point-color":return x(a,b,c,"object",4,0,255);case "icon":return x(a,b,c,"boolean");case "icon-source":return x(a,b,c,"object",5,-Number.MAX_VALUE,Number.MAX_VALUE);case "icon-scale":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "icon-offset":return x(a,b,c,"object",2,-Number.MAX_VALUE,Number.MAX_VALUE);case "icon-origin":return x(a,b,c,"string");case "icon-stick":return x(a,
b,c,"object",7,-Number.MAX_VALUE,Number.MAX_VALUE);case "icon-color":return x(a,b,c,"object",4,0,255);case "label":return x(a,b,c,"boolean");case "label-color":return x(a,b,c,"object",4,0,255);case "label-source":return x(a,b,c,"string");case "label-size":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "label-offset":return x(a,b,c,"object",2,-Number.MAX_VALUE,Number.MAX_VALUE);case "label-origin":return x(a,b,c,"string");case "label-align":return x(a,b,c,"string");case "label-stick":return x(a,
b,c,"object",7,-Number.MAX_VALUE,Number.MAX_VALUE);case "label-width":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "polygon":return x(styleId_,b,c,"boolean");case "polygon-color":return x(styleId_,b,c,"object",4,0,255);case "z-index":return x(a,b,c,"number",null,-Number.MAX_VALUE,Number.MAX_VALUE);case "zbuffer-offset":return x(a,b,c,"object",3,0,Number.MAX_VALUE);case "hover-event":return x(a,b,c,"boolean");case "hover-layer":return x(a,b,c,"string");case "enter-event":return x(a,b,c,
"boolean");case "leave-event":return x(a,b,c,"boolean");case "click-event":return x(a,b,c,"boolean");case "draw-event":return x(a,b,c,"boolean");case "visible":return x(a,b,c,"boolean");case "visibility":return x(a,b,c,"number",null,1E-4,Number.MAX_VALUE);case "culling":return x(a,b,c,"number",180,1E-4,180);case "next-pass":return x(a,b,c,"object")}return c}function x(a,b,c,d,e,f,g){if(null!=c&&"object"==typeof c&&(null!=c.discrete||null!=c.linear||null!=c["lod-scaled"])){var h=!1;if(null!=c["lod-scaled"]){var k=
c["lod-scaled"];if(!("object"==typeof k&&Array.isArray(k)&&2<=k.length))return w("wrong-property-value",a,b,c,null,"[]"),q(b);null==k[2]&&(k[2]=1);if("number"!=typeof k[0]||"number"!=typeof k[2])return w("wrong-property-value",a,b,c,null,"[]"),q(b);if("number"==typeof k[1])return c;e=k[1];h=!0}else e=c.discrete||c.linear;if(null==e||!("object"==typeof e&&Array.isArray(e)&&0<e.length))return w("wrong-property-value",a,b,c,null,"[]"),q(b);if(null!=e){var l=null;d=0;for(k=e.length;d<k;d++){var n=e[d];
if(null==n||"object"!=typeof n||!Array.isArray(n)||2==n.length)if(null==l&&(l=typeof n[1],1==h&&"number"!=l)||"number"!=typeof n[0]||typeof n[1]!=l||"number"==l&&(n[1]>g||n[1]<f))return w("wrong-property-value[]",a,b,c,d,"[]"),q(b)}}return c}if(typeof c!=d&&(null!==c||"icon-source"!=b&&"visibility"!=b))return w("wrong-property-value",a,b,c),q(b);switch(typeof c){case "object":if(null===c&&("line-style-texture"==b||"icon-source"==b||"visibility"==b||"next-pass"==b))return c;if("next-pass"==b)if(1==
Array.isArray(c)&&0<c.length)for(d=0;d<k;d++){if(f=c[d],"object"!=typeof f||1!=Array.isArray(f)||2!=f.length||"number"!=typeof f[0]||"string"!=typeof f[1])return w("wrong-property-value[]",a,b,c,d),q(b)}else return w("wrong-property-value",a,b,c),q(b);if(null!=e)if(1==Array.isArray(c)&&c.length==e){d=0;if("icon-source"==b||"line-style-texture"==b){if("string"!=typeof c[0])return w("wrong-property-value[]",a,b,c,0),q(b);if(null==H[c[0]])return w("wrong-object",a,b,c,null,"bitmap"),q(b);d=1}for(k=c.length;d<
k;d++)if("number"!=typeof c[d])return w("wrong-property-value[]",a,b,c,d),q(b)}else return w("wrong-property-value",a,b,c),q(b);return c;case "string":if("line-style"==b)switch(c){case "solid":case "texture":return c;default:return w("wrong-property-value",a,b,c),q(b)}if("label-origin"==b||"icon-origin"==b)switch(c){case "top-left":case "top-right":case "top-center":case "center-left":case "center-right":case "center-center":case "bottom-left":case "bottom-right":case "bottom-center":return c;default:return w("wrong-property-value",
a,b,c),q(b)}if("label-align"==b)switch(c){case "left":case "right":case "center":break;default:return w("wrong-property-value",a,b,c),q(b)}return c;case "number":return c>g||c<f?(w("wrong-property-value",a,b,c),q(b)):c;case "boolean":return c}}function w(a,b,c,d,e,f){"object"==typeof d&&(d=JSON.stringify(d));var g=null;switch(a){case "wrong-property-value":g="Error: wrong layer property "+(f?"'"+f+"'":"")+": "+b+"."+c+" = "+d;break;case "wrong-property-value[]":g="Error: wrong layer property "+(f?
"'"+f+"'":"")+"["+e+"]: "+b+"."+c+" = "+d;break;case "wrong-object":g="Error: reffered "+f+" does not exist: "+b+"."+c+" = "+d;break;case "wrong-object[]":g="Error: reffered "+f+" does not exist: "+b+"."+c+"["+e+"] = "+d;break;case "wrong-Layer":g="Error: reffered "+f+" Layer does not exist: "+f+"["+e+"].Layer = "+b;break;case "wrong-bitmap":g="Error: wrong definition of bitmap: "+b;break;case "custom":g="Error: "+b}g&&console.log(g)}function C(a,b,c,d,e){if(100<e)w("custom","infinite inherit loop in Layer: "+
a);else if(null!=c.inherit){var f=d.layers[c.inherit];if(null!=f){null!=f.inherit&&C(c.inherit,b,f,d,e++);for(var g in f)b[g]=f[g]}else w("wrong-object",a,"inherit",f,"Layer")}}function B(a,b,c,d){var e=a[b];switch(typeof e){case "string":if(0<e.length&&"$"==e.charAt(0)){d=c.Xg[e.substr(1)];if(null!=d)return d;w("wrong-object",a["$$layer-id"],b,e,null,"feature-property")}return e;case "object":if(null==e)break;if(1==Array.isArray(e)){if("icon-source"==b&&null==H[e[0]]){w("wrong-object",a["$$layer-id"],
b,e,null,"bitmap");break}return e}var f;a=null;if(null!=e["lod-scaled"]){a=e["lod-scaled"];if("number"==typeof a[1])return a[1]*Math.pow(2*a[2],a[0]-d);f=a[1]}else f=e.discrete||e.linear;b=f[0][0];c=f[0][1];for(var g=typeof c,h=c,k=0,l=f.length;k<=l;k++){if(k==l){h=c;break}if(f[k][0]>d){if(null!=e.discrete||null!=a)h=c;else{currentLod_=f[k][0];currentValue_=f[k][1];if(currentLod_==b)break;switch(g){case "boolean":currentValue_=(c=c?1:0)?1:0;h=c+(d-b)/(currentLod_-b)*(currentValue_-c);h=.5<h?!0:!1;
break;case "number":h=c+(d-b)/(currentLod_-b)*(currentValue_-c);break;case "object":for(h=[],e=0,f=c.length;e<f;e++)h[e]=c[e]+(d-b)/(currentLod_-b)*(currentValue_[e]-c[e])}}break}b=f[k][0];c=f[k][1]}null!=a&&(h*=Math.pow(2*a[2],a[0]-d));return h;case "number":case "boolean":return e}return q(b)}function t(a,b,c){switch(typeof b){case "string":if(0<b.length)switch(b.charAt(0)){case "$":return c=c.Xg[b.substr(1)],"undefined"==typeof c&&w("wrong-expresion",a["$$layer-id"],b,b,null,"feature-property"),
c}}return b}function J(a,b,c){var d=K.ka[a];return null==d?(w("wrong-Layer",a,null,null,c,b),{}):d}function y(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];b=b[2];c[0]=e*b-a*g;c[1]=a*f-d*b;c[2]=d*g-e*f}function A(a,b,c,d){if(!a||!Array.isArray(a))return!1;switch(a[0]){case "all":for(var e=!0,f=1,g=a.length;f<g;f++)e=e&&A(a[f],b,c,d);return e;case "any":e=!1;f=1;for(g=a.length;f<g;f++)e=e||A(a[f],b,c,d);return e;case "none":e=!0;f=1;for(g=a.length;f<g;f++)e=e&&A(a[f],b,c,d);return!e;case "skip":return!1}switch(a[1]){case "#type":e=
c;break;case "#group":e=d;break;default:if((c=a[1])&&0<c.length)switch(c.charAt(0)){case "$":e=b.Xg[c.substr(1)];break;case "@":e=aa[c];break;default:e=b.Xg[c]}}switch(a[0]){case "==":return e==a[2];case "!=":return e!=a[2];case ">=":return e>=a[2];case "<=":return e<=a[2];case ">":return e>a[2];case "<":return e<a[2];case "has":return"undefined"!=typeof e;case "!has":return"undefined"==typeof e;case "in":f=2;for(g=a.length;f<g;f++)if(a[f]==e)return!0;break;case "!in":f=2;for(g=a.length;f<g;f++)if(a[f]==
e)return!1;return!0}return!1}var K={},V={},H={},aa={},ia=[0,0,0],W=[1,1,1],U=[1,1,1],ba=4096,wa=!1,Ka=0,za={},Ga=0,Qa=[0,0,0],Pa=Array(65536),Ha=0,ib=Pa.length;vec3Normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);if(f){if(1==f)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;f=1/f;b[0]=c*f;b[1]=d*f;b[2]=e*f;return b};vec3Length=function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)};vec3AnyPerpendicular=function(a,b){b||(b=a);var c=a[0],
d=a[1],e=a[2];b[0]=1;b[1]=1;b[2]=e?-(c+d)/e:0;return b};self.onmessage=function(a){a=a.data;var c=a.data;switch(a.command){case "setStylesheet":if(c){wa=c.geocent||!1;var e=c.data;H={};aa=e.constants||{};a=e.bitmaps||{};for(var f in a)c=a[f],"string"==typeof c?c={url:c}:"object"==typeof c?null==c.url&&w("wrong-bitmap",f):w("wrong-bitmap",f),H[f]=c;postMessage({command:"loadBitmaps",bitmaps:H});K={ka:{}};a=e.layers||{};V=K.ka;for(f in a){var c=K.ka,g=f,h=f,k={},l=h,n=k,p=a[f];null!=p.inherit&&C(l,
n,p,e,0);var t=void 0;for(t in p)n[t]=p[t];n["$$layer-id"]=l;l=void 0;for(l in k)n=k[l],"string"==typeof n&&0<n.length&&"@"==n.charAt(0)&&(null!=aa[n]?k[l]=aa[n]:(w("wrong-object",h,l,n,null,"constant"),k[l]=q(l))),k[l]=z(h,l,k[l]);c[g]=k}}postMessage({command:"ready"});break;case "setFont":za["default"]={Xd:c.chars,hh:c.space,v:c.size};postMessage({command:"ready"});break;case "processGeodata":Ka=a.lod||0;a=c=JSON.parse(c);f=Ka;if("string"==typeof a)try{e=JSON.parse(a)}catch(df){e=null}else e=a;
if(e)for(e=e.groups||[],a=0,c=e.length;a<c;a++)if(k=e[a],g=f,h=k.id||"",l=k.bbox){ia=l[0];W=l[1];U=[l[1][0]-l[0][0],l[1][1]-l[0][1],l[1][2]-l[0][2]];ba=k.resolution||4096;Qa=[0,0,0];forceScale_=[U[0]/ba,U[1]/ba,U[2]/ba];postMessage({command:"beginGroup",id:k.id,bbox:[ia,W],origin:ia});p=k.points||[];l=0;for(n=p.length;l<n;l++)d("point-array",p[l],g,l,"point",h);p=k.lines||[];l=0;for(n=p.length;l<n;l++)d("line-string",p[l],g,l,"line",h);k=k.polygons||[];l=0;for(n=k.length;l<n;l++)d("polygon",k[l],
g,l,"polygon",h);b();postMessage({command:"endGroup"})}b();postMessage({command:"allProcessed"});postMessage({command:"ready"})}}};r.zi=function(a,b){this.Ia=a;this.c=a.c;this.T=!1;this.Vh=b;this.ta=!0;var c=window.URL||window.webkitURL,d,e=r.Au();try{d=new Blob([e],{type:"application/javascript"})}catch(f){window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.mv,d=new BlobBuilder,d.append(e),d=blob.getBlob()}this.Xj=new Worker(c.createObjectURL(d));this.Xj.onmessage=this.onMessage.bind(this)};
r.zi.prototype.C=function(){1!=this.T&&(this.T=!0,null!=this.Xj&&this.Xj.terminate())};r.zi.prototype.W=function(){return this.ta||this.T};r.zi.prototype.onMessage=function(a){if(1!=this.T){a=a.data;var b=a.command;"ready"==b&&(this.ta=!0);null!=this.Vh&&this.Vh(b,a)}};function Oa(a,b,c,d){1!=a.T&&(a.ta=!1,b={command:b,data:c},d&&d.f&&(b.lod=d.f[0]),a.Xj.postMessage(b))}
function Ac(a,b,c){this.c=a;this.f=c;this.fq=[256,256];this.ra=[0,100];this.I=[];this.aa=[[0,0],[0,0]];this.wc=null;this.Qa=this.c.Qa;this.rc=this.c.rc;this.Hc=this.c.Hc;this.ta=!1;"esri-world-imagery"==c&&(b.availability={type:"negative-size",size:2521});"string"===typeof b?(this.wc=this.c.Hb(b),this.Qa=r.za.Zi(this.wc),this.rc=r.za.dj(this.wc),this.Hc=r.za.bj(this.wc),r.Id(this.wc,function(a){this.Qf(a);this.ta=!0;Jc(this.c)}.bind(this),function(){}.bind(this),null,r.useCredentials?-1!=this.wc.indexOf(this.c.Qa):
!1,this.c.u.Mb)):(this.Qf(b),this.ta=!0)}
Ac.prototype.Qf=function(a){this.Zs=a.id||null;this.U=a.type||"raster";this.vd=this.Hb(a.url,"");this.fq=a.tileSize||[256,256];this.ra=a.lodRange||[0,0];this.aa=a.tileRange||[[0,0],[0,0]];this.yc=this.Hb(a.metaUrl);this.km=this.Hb(a.maskUrl);this.qj=a.isTransparent||!1;this.I=a.credits||[];this.bf=Math.pow(2,this.ra[0])/((this.aa[1][0]-this.aa[1][0]+1)*(this.aa[1][1]-this.aa[1][1]+1));if(this.Uc=a.availability?{}:null)a=a.availability,this.Uc.U=a.type,this.Uc.Qs=a.mime,this.Uc.Yq=a.codes,this.Uc.v=
a.size;this.yc&&this.km&&(this.Uc={U:"metatile"});switch(typeof this.I){case "string":this.I=[];break;case "object":if(!Array.isArray(this.I)){a=this.I;this.I=[];for(var b in a)pc(this.c,b,new qc(this.c,a[b])),this.I.push(b)}b=0;for(a=this.I.length;b<a;b++);}};Ac.prototype.C=function(){};Ac.prototype.ub=function(){return{type:this.U,url:this.vd,tileSize:this.fq,credits:this.I,lodRange:this.ra,tileRange:this.aa,mataUrl:this.yc,maskUrl:this.km,isTransparent:this.qj}};
Ac.prototype.Hb=function(a,b){if(!a)return b;a=a.trim();return-1!=a.indexOf("://")?a:0==a.indexOf("//")?this.rc+a:0==a.indexOf("/")?this.Hc+a:this.Qa+a};function Qc(a,b){var c=b[0]-a.ra[0];if(0>c)return!1;var d=b[1]>>c,c=b[2]>>c;return d<a.aa[0][0]||d>a.aa[1][0]||c<a.aa[0][1]||c>a.aa[1][1]?0:b[0]>a.ra[1]?1:2}function Rc(a,b){return Sc(a.c,a.vd,{ca:b[0],qb:b[1],rb:b[2]},null,void 0)}function mc(a){this.c=a;this.Kb=new Tc(a,null,[0,0,0])}mc.prototype.C=function(){this.Kb.C()};
function Uc(a,b,c,d){a=a.Kb;var e=b[1]>>c<<c;c=b[2]>>c<<c;for(b=b[0];0<b;b--){var f=1<<b-1,g=0;0!=(e&f)&&(g+=1);0!=(c&f)&&(g+=2);if(!a.ha[g])if(d)a.Ci(g);else return null;a=a.ha[g]}return a}function Tc(a,b,c){this.c=a;this.f=c;this.va=b;this.Ng={};this.Yo={};this.ik={};this.$p={};this.Ka={};this.I={};this.ha=[null,null,null,null]}Tc.prototype.C=function(){for(var a=0;4>a;a++)null!=this.ha[a]&&this.ha[a].C();this.ha=[null,null,null,null];a=this.va;this.va=null;null!=a&&a.removeChild(this)};
Tc.prototype.Ci=function(a){if(!this.ha[a]){var b=this.f,b=[b[0]+1,b[1]<<1,b[2]<<1];switch(a){case 1:b[1]++;break;case 2:b[2]++;break;case 3:b[1]++,b[2]++}this.ha[a]=new Tc(this.c,this,b)}};Tc.prototype.Ap=function(a){null!=this.ha[a]&&(this.ha[a].C(),this.ha[a]=null)};Tc.prototype.removeChild=function(a){for(var b=0;4>b;b++)this.ha[b]==a&&(this.ha[b].C(),this.ha[b]=null)};
function Vc(a,b,c,d,e,f,g){if(e&&e.Ia){var h=b+e.Ia.f,k=a.ik[h];k||(k=new Wc(a.c,b,c,d,e,f,g),a.ik[h]=k)}else k=a.ik[b],k||(k=new Wc(a.c,b,c,d,e,f,g),a.ik[b]=k);return k}function Xc(a,b){for(var c in a.Ng)a.Ng[c]==b&&delete a.Ng[c]}function gd(a,b,c,d){var e=a.Ng,f;for(f in e)if(e[f].F==b)return e[f];f=b.aj(a.f);return e[f]?(b=e[f].clone(b),a.Ng[f]=b):c?(b=new hd(a,b,d),a.Ng[f]=b):null}function hc(a,b){this.c=a;this.Oe=null!=b?b:Number.MAX_VALUE;this.Fb=this.jc=null;this.Gc=0}
function id(a,b){if(null!=b&&a.Fb!=b){null!=b.$b&&(b.$b.Ac=b.Ac);null!=b.Ac&&(b.Ac.$b=b.$b);a.jc==b&&(a.jc=b.$b);var c=a.Fb;a.Fb=b;a.Fb.Ac=c;a.Fb.$b=null;c.$b=a.Fb}}m=hc.prototype;m.clear=function(){for(var a=this.Fb;null!=a;)null!=a.Ni&&a.Ni(),a=a.Ac;this.Fb=this.jc=null;this.Gc=0};function jd(a,b,c){b={Ni:b,Rn:c,$b:null,Ac:a.Fb};null!=a.Fb&&(a.Fb.$b=b);a.Fb=b;null==a.jc&&(a.jc=b);a.Gc+=c;Dc(a);return b}
m.remove=function(a){var b=!1;a==this.Fb&&(this.Fb=a.Ac,b=!0,null!=this.Fb&&(this.Fb.$b=null));a==this.jc&&(this.jc=a.$b,b=!0,null!=this.jc&&(this.jc.Ac=null));if(!b){if(a.$b)a.$b.Ac=a.Ac;else debugger;if(a.Ac)a.Ac.$b=a.$b;else debugger}this.Gc-=a.Rn;a.Ni();Dc(this)};function Dc(a){for(;a.Gc>a.Oe;){var b=a.jc;if(null!=b)a.jc=a.jc.$b,null!=a.jc&&(a.jc.Ac=null),a.Gc-=b.Rn,b.Ni();else break}}m.Dq=function(a,b){return jd(this,b,a)};m.removeItem=function(a){return this.remove(a)};
m.ts=function(a){return id(this,a)};hc.prototype.addItem=hc.prototype.Dq;hc.prototype.removeItem=hc.prototype.removeItem;hc.prototype.itemUsed=hc.prototype.ts;function fc(a,b){this.c=a;b instanceof fc?this.o=b.o.slice():(this.o=null!=b&&b instanceof Array?b.slice():[],this.xq())}m=fc.prototype;m.clone=function(){return new fc(this.c,this.o)};function Oc(a){return[a.o[1],a.o[2],a.o[4]]}function kd(a,b){a.o[1]=b[0];a.o[2]=b[1];a.o[4]=b[2];return a}function ld(a,b){a.o[1]=b[0];a.o[2]=b[1]}
function md(a,b){a.o[4]=b;return a}m.Rb=function(){return[this.o[5],this.o[6],this.o[7]]};m.setOrientation=function(a){this.o[5]=a[0];this.o[6]=a[1];this.o[7]=a[2];return this};m.bd=function(){return this.o[9]};function nd(a,b){a.o[9]=b;return a}function od(a,b){a.o[8]=b;return a}function Pc(a){return.5*a.o[8]/Math.tan(r.La(.5*a.bd()))}m.check=function(){this.o[6]=r.Ee(this.o[6],-90,90);this.o[5]%=360;this.o[7]%=360};
function pd(a,b,c,d){var e=Oc(a),f;Ta(a.c).Hd();d=null==d?1:d;Sa(Ta(a.c))?(d=r.La(b),d=[-Math.sin(d),Math.cos(d)],ld(a,[e[0]+d[0]*c,e[1]+d[1]*c])):(f=Ta(a.c).Hd(),c=(new GeographicLib.Geodesic.Geodesic(f.a,f.a/f.b-1)).Direct(e[1],e[0],b,c),ld(a,[c.lon2,c.lat2]),e=a.Rb(),e[0]+=(c.azi1-c.azi2)*d,a.setOrientation(e));return a}
function Aa(a,b){if(b==a.o[0])return a;if("obj"==b){if("float"==a.o[3]){var c=!0;qd(a,"fix")}var d=Pc(a),e=a.Rb(),f=r.La(-e[1]),g=d*Math.sin(f),d=d*Math.cos(f);Sa(Ta(a.c))?(e=r.La(e[0]),e=[-Math.sin(e),Math.cos(e)],f=Oc(a),f[0]+=e[0]*d,f[1]+=e[1]*d):(pd(a,-e[0],d),f=Oc(a));f[2]-=g;kd(a,f);c&&qd(a,"float")}else"subj"==b&&(f=rd(a,a.o[3]),kd(a,f));a.o[0]=b;return a}
function qd(a,b){if(a.o[3]==b)return a;var c=Nc(a.c,Oc(a),a.o[8],a.c.h.oe),c=a.c.cd(Oc(a),c);"float"==b?(a.o[3]=b,a.o[4]-=c[0]):"fix"==b&&(a.o[3]=b,a.o[4]+=c[0]);return a}
m.xq=function(){var a=this.o;"fixed"==a[0]&&(a[0]="obj",a[9]=a[8],a[8]=a[7],a[7]=a[6],a[6]=a[5],a[5]=a[4],a[4]=a[3],a[3]="fix");a[0]="obj"==a[0]||"subj"==a[0]?a[0]:"obj";a[1]=null!=a[1]?a[1]:0;a[2]=null!=a[2]?a[2]:0;a[3]="fix"==a[3]||"fixed"==a[3]||"float"==a[3]?a[3]:"float";a[4]=null!=a[4]?a[4]:0;a[5]=null!=a[5]?a[5]:0;a[6]=null!=a[6]?a[6]:-90;a[7]=null!=a[7]?a[7]:0;a[8]=null!=a[8]?a[8]:900;a[9]=null!=a[9]?a[9]:55;a[3]="fixed"==a[3]?"fix":a[3]};
function rd(a,b){var c=a.Rb(),d=r.i.create();r.i.multiply(r.Dc(2,r.La(c[0])),r.Dc(0,r.La(c[1])),d);if("obj"==a.o[0]){var d=Oc(a),e=0,c=-1;if("float"==a.o[3])var c=Nc(a.c,Oc(a),a.o[8],a.c.h.oe),f=a.c.cd(Oc(a),c),e=f[0];f=a.Fh(Sa(Ta(a.c)));Sa(Ta(a.c))?(d[0]+=f.Bc[0],d[1]+=f.Bc[1],d[2]+=f.Bc[2]+e):(d=a.c.pb([d[0],d[1],d[2]+e],"navigation","physical"),d[0]+=f.Bc[0],d[1]+=f.Bc[1],d[2]+=f.Bc[2],d=a.c.pb(d,"physical","navigation"));"fix"!=b&&(-1==c&&(c=Nc(a.c,d,a.o[8],a.c.h.oe)),f=a.c.cd(d,c),d[2]-=f[0]);
return d}if(a.o[3]==b)return Oc(a);c=Nc(a.c,Oc(a),a.o[8],a.c.h.oe);f=a.c.cd(Oc(a),c);d=Oc(a);d[2]="fix"==b?d[2]+f[0]:d[2]-f[0];return d}function sd(a,b){var c=Oc(a);if("float"==a.o[3]){b=null!=b?b:Nc(a.c,Oc(a),a.o[8],a.c.h.oe);var d=a.c.cd(Oc(a),b);c[2]+=d[0]}c=a.c.pb(c,"navigation","physical");d=a.c.ba;c[0]-=d[0];c[1]-=d[1];c[2]-=d[2];return c}m.uf=function(a,b){if(b)var c=this.c.ba,d=Oc(this),c=[d[0]-c[0],d[1]-c[1],d[2]-c[2]];else c=sd(this,a);return ub(this.c.l,c,pa(this.c.G))};
function td(a){var b=Oc(a.clone());b[2]=0;var c=a.c.pb(b,"navigation","physical");if(Sa(Ta(a.c)))var d=a.c.pb([b[0],b[1]+100,b[2]],"navigation","physical"),b=a.c.pb([b[0]+100,b[1],b[2]],"navigation","physical");else if(d=b[0]+180+1E-4,0>b[1]+90-1E-4||180<d){var e=Lc(a.c),f=e.Direct(b[1],b[0],0,-100),d=a.clone();ld(d,[f.lon2,f.lat2]);d=a.c.pb(Oc(d),"navigation","physical");f=e.Direct(b[1],b[0],90,100);b=a.clone();ld(b,[f.lon2,f.lat2]);b=a.c.pb(Oc(b),"navigation","physical")}else d=a.c.pb([b[0],b[1]-
1E-4,b[2]],"navigation","physical"),b=a.c.pb([b[0]+1E-4,b[1],b[2]],"navigation","physical");a=[d[0]-c[0],d[1]-c[1],d[2]-c[2]];c=[b[0]-c[0],b[1]-c[1],b[2]-c[2]];b=[0,0,0];r.D.normalize(a);r.D.normalize(c);r.D.Ck(a,c,b);r.D.normalize(b);return{jo:c,Zn:a,ip:b}}
m.Fh=function(a,b){var c=this.Rb(),d=Pc(this);b&&(c[1]=r.Ee(c[1],-89,90));var e=r.i.create();r.i.multiply(r.Dc(2,r.La(c[0])),r.Dc(0,r.La(c[1])),e);if("obj"==this.o[0]){var f=[0,-d,0];r.i.Fa(e,f)}else f=[0,0,0];d={Bc:null,Ea:d,Rm:null,xi:null,lt:f[2]};if(a){e=r.i.create();r.i.multiply(r.Dc(0,r.La(-c[1]-90)),r.Dc(2,r.La(-c[0])),e);var g=td(this);north_=g.ip;east_=g.jo;direction_=g.Zn;var c=[1,0,0],g=[0,1,0],h=[0,0,1],k=[1,0,0],l=[0,0,-1],n=[0,0,0];r.D.Ck(k,l,n);r.i.Fa(e,h);r.i.Fa(e,c);r.i.Fa(e,g);r.i.Fa(e,
k);r.i.Fa(e,l);r.i.Fa(e,n);e=k[0];k[0]=k[1];k[1]=e;e=l[0];l[0]=l[1];l[1]=e;e=n[0];n[0]=n[1];n[1]=e;k[2]=-k[2];l[2]=-l[2];n[2]=-n[2];g=[c[0],c[1],c[2],0,g[0],g[1],g[2],0,h[0],h[1],h[2],0,0,0,0,1];d.xi=r.D.normalize([-f[0],-f[1],-f[2]]);d.fv=d.xi;d.Bc=f;d.Rm=g}else g=td(this),north_=g.ip,east_=g.jo,direction_=g.Zn,e=r.i.create(),r.i.multiply(r.Dc(0,r.La(-c[1]-90)),r.Dc(2,r.La(-c[0])),e),c=[1,0,0],g=[0,1,0],h=[0,0,1],k=Oc(this),l=r.i.create(),r.i.multiply(r.Dc(0,r.La(k[1]-90)),r.Dc(2,r.La(-k[0]-90)),
l),r.i.Fa(l,h),r.i.Fa(l,c),r.i.Fa(l,g),c=[c[0],c[1],c[2],0,g[0],g[1],g[2],0,h[0],h[1],h[2],0,0,0,0,1],n=[1,0,0],k=[0,1,0],l=[0,0,1],r.i.Fa(c,k),r.i.Fa(c,l),r.i.Fa(c,n),r.i.Fa(e,n),r.i.Fa(e,k),r.i.Fa(e,l),g=[n[0],n[1],n[2],0,k[0],k[1],k[2],0,l[0],l[1],l[2],0,0,0,0,1],c=r.i.inverse(c),r.i.Fa(c,f),d.fv=[-c[8],-c[9],-c[10]],r.i.inverse(g,c),d.xi=[-c[8],-c[9],-c[10]];d.Bc=f;d.Rm=g;return d};
m.toString=function(){var a=this.o;return a[0]+", "+a[1].toFixed(0)+", "+a[2].toFixed(0)+", "+a[3]+", "+a[4].toFixed(0)+", "+a[5].toFixed(0)+", "+a[6].toFixed(0)+", "+a[7].toFixed(0)+", , "+a[8].toFixed(0)+", "+a[9].toFixed(0)};function qc(a,b){this.c=a;this.f=b.id||null;this.rm=b.notice||null;this.vd=b.url||null;this.ls=r.Mp(this.rm);this.pt=r.Mp(this.rm)}qc.prototype.ub=function(){return{id:this.f,notice:this.rm,html:this.ls,plain:this.pt}};
ec.prototype.Xa=function(a,b,c){this.se=.5*this.l.da[0];var d=this.uc().Rb(),d=Math.log(.05)/(Math.max(5,-d[1])/90*Math.max(1,1E-4*this.Wc)*this.G.pf),d=5/(Math.min(5E4,Math.max(this.Db,1E3))/5E3)*d;this.yh||(d=0);this.rf=d;this.l.rf=d;for(var d=this.bb.Dd.Ca,e=0,f=d.length;e<f;e++){var g=d[e],h=2*(g.S.ea[0]-g.S.Z[0]),k=Math.log(Math.min(h,Math.max(10,this.Db+20)))/this.Po,k=Math.log(h)/this.Po-k;g.ds=k-Math.floor(k);k=Math.floor(Math.floor(k))+1;g.yo=Math.pow(8,k);g.es=8*g.yo}this.Pe=.9*this.Sb.Oe;
this.Yk=this.m.cb=0;d=this.ba;this.sf&&0==this.Eb&&dc(this.l);if(this.Pi){if(this.w.eg||this.w.dg)this.w.Te=[];if(this.w.bo||this.w.Zk||this.w.Qi||this.w.Tk||this.w.Qk||this.w.Ri){a=this.w.ca;b=this.w.Np;if(this.w.Zk&&this.w.Yd)for(h=this.w.Yd,e=0,f=h.length;e<f;e++)g=h[e],(b&&g.f[0]==a||!b&&g.f[0]<=a)&&ud(this,g,g.B,d,g.Cc,!1,!1);if(this.w.Qi&&this.w.Ui)for(h=this.w.Ui,e=0,f=h.length;e<f;e++)g=h[e],(b&&g.f[0]==a||!b&&g.f[0]<=a)&&ud(this,g,g.B,d,g.Cc,!1,!1);if(this.w.Tk&&this.w.mn){var h=this.w.mn,
l=this.ec;this.ec=!0;e=0;for(f=h.length;e<f;e++)g=h[e],(b&&g.f[0]==a||!b&&g.f[0]<=a)&&vd(this,g,g.B,d,g.Pa);this.ec=l}if(this.w.Qk&&this.w.ln){h=this.w.ln;l=this.ec;this.ec=!0;e=0;for(f=h.length;e<f;e++)g=h[e],(b&&g.f[0]==a||!b&&g.f[0]<=a)&&vd(this,g,g.B,d,g.Pa);this.ec=l}c=this.w.jd;h=this.w.Op;if(this.w.Ri&&this.w.kc){k=this.w.kc;this.ec=!0;e=0;for(f=k.length;e<f;e++)(g=k[e])&&g.K&&g.K.f&&(g=g.K,(h&&e==c||!h&&e<=c)&&(b&&g.f[0]==a||!b&&g.f[0]<=a)&&g.B&&(0!=(g.B.O&1)?ud(this,g,g.B,d,g.Cc,!1,!1):vd(this,
g,g.B,d,g.Pa)));this.ec=l}(this.w.Qi&&this.w.Ui||this.w.Ri&&this.w.kc)&&this.sf&&0==this.Eb&&cc(this.l);return}e=0;for(f=this.ac.length;e<f;e++)this.ac[e]=null;0<this.Kb.gg.length&&this.Kb.Xa(c);if(this.w.kh){l=[];e=0;for(f=this.ac.length;e<f;e++)if(h=this.ac[e])for(var k=0,n=h.length;k<n;k++)l.push(h[k]);this.w.rh=d;this.w.Yd=l;this.w.kh=!1}if(this.w.eg){l=[];e=0;for(f=this.w.Te.length;e<f;e++)g=this.w.Te[e],l.push(g);this.w.rh=d;this.w.mn=l;this.w.eg=!1}e=0;for(f=this.Bh.length;e<f;e++)l=this.Bh[e],
l.ta&&l.Kb&&(!l.Ka||l.ud&&l.ud.W())&&0==this.Eb&&("geodata"==l.U?l&&0==this.Eb&&this.G.Ad(l.S,this.ba)&&(null==l.Qj&&(g="object"===typeof l.$d?l.$d:Sc(l.c,l.$d,{},null,void 0),l.Qj=new wd(this,g,{K:null,F:l})),l.ap!=l.Zd&&(l.di=null,l.ap=l.Zd),l.Qj.W()&&(l.di||(l.di=new xd(this,l.Qj,{K:null,F:l})),l.di.W()&&l.di.Xa(this.ba))):l.Kb.Xa(c));if(this.w.jh){l=[];e=0;for(f=this.ac.length;e<f;e++)if(h=this.ac[e])for(k=0,n=h.length;k<n;k++)g=h[k],g.F&&g.F.Ch&&l.push(g);this.w.rh=d;this.w.Ui=l;this.w.jh=!1}if(this.w.dg){l=
[];e=0;for(f=this.w.Te.length;e<f;e++)g=this.w.Te[e],g.F&&g.F.Ch&&l.push(g);this.w.rh=d;this.w.ln=l;this.w.dg=!1}}!b&&this.yh&&"melown2015"==this.bb.f&&(b=Ta(this).Hd().a,l=[0,0,0,0],r.D.normalize(this.ba,l),r.D.length(this.ba),c=this.uc().Rb(),c=1-Math.max(0,Math.min(1,this.Wc/(5E4*(10+Math.max(5,-c[1])/90*20)))),c=[Math.max(2,c*c*128),0,0,0],this.Wc>2*b&&(c[0]=2-Math.min(1,(this.Wc-2*b)/(2*b))),this.l.j.eb(this.jr),bc(this.l,[-this.ba[0],-this.ba[1],-this.ba[2]],b,this.l.Dt,c,l,null,!0),c=[2,(b+
5E4)/b*2,.25,(b+5E4)/b*2],l=1/b*2,l=[this.ba[0]*l,this.ba[1]*l,this.ba[2]*l,1],d=1.4,e=1.6,6E4<this.Wc?(e=1.8,d=[e,1,e,0]):(5E3>this.Wc&&(d=1.05,e=1.12),d=[d,5.2/(e-d),e,0]),this.l.j.eb(this.kr),bc(this.l,[-this.ba[0],-this.ba[1],-this.ba[2]],b+5E4,this.l.Et,c,l,d),this.l.j.eb(this.Ti));this.Pi&&(a||this.sf&&0==this.Eb&&cc(this.l))};
function yd(a,b,c,d){var e=!0;d=d?!1:!0;for(var f=0,g=a.length;f<g;f++){var h=a[f];switch(h.U){case "submesh":var k=h.mc,h=h.N,k=k&&k.W(c,b,d),h=!h||h&&h.W(c,b,d);k&&h||(e=!1);break;case "geodata":(k=h.qo)&&k.W(c,b,d)||(e=!1)}}return e}function zd(a,b){for(var c in b.Vb){var d=b.Vb[c],e=a.yd.Qh[c];a.yd.Qh[c]=e?d>e?d:e:d}for(c in b.vf)d=b.vf[c],e=a.yd.Qh[c],a.yd.fj[c]=e?d>e?d:e:d;for(c in b.Ne)d=b.Ne[c],e=a.yd.Ij[c],a.yd.Ij[c]=e?d>e?d:e:d}
function Ad(a,b,c,d,e){0<c.length&&a.Yk++;for(var f=0,g=c.length;f<g;f++){var h=c[f];switch(h.U){case "state":a.l.j.eb(h.Pd);break;case "submesh":var k=h.mc,l=h.N,n=k&&k.W(e,d),p=!l||l&&l.W(e,d);if(n&&p)if(a.ec&&a.zh&&k.sb[h.Tc].ug(b),l)Bd(k,b,h.Tc,l,h.nd,h.fb);else{n=h.nd;switch(n){case "external":case "internal":n="flat"}Bd(k,b,h.Tc,l,n,h.fb)}break;case "geodata":(h=h.qo)&&h.W(e,d,!0)&&h.Xa(b)}}}r.wv=[144,8880,5492];
function ud(a,b,c,d,e,f,g,h){if(a.m.vb>=a.Pe)return!1;b.Km=!1;if(b.F){if(0!=(c.O&1)){a.ec&&!f&&vd(a,b,c,d,b.Pa);if(a.Jl&&!f)return b.F.Ka||Cd(b,d),!0;f||(a.m.Tf[b.f[0]]++,a.m.Yd++,b.F.Ka&&a.m.Vi++);if(b.Yf){b.ja=[[],[],[]];b.ui=!0;if(b.Vc)for(var k in b.Vc)b.Vc[k].Td=0;b.Yf=!1}if(b.F.Ka)if(1>=b.f[0])b=!0;else{if(null==b.Rd){var l;if(b.F.po){k=b.f;var n=a.Kb.hg;if(0==k[0])k=n.B&&0!=(n.B.O&2)?n:null;else{for(var p=null,v=k[0];0<v;v--){var u=1<<v-1,q=0;0!=(k[1]&u)&&(q+=1);0!=(k[2]&u)&&(q+=2);if(n=n.ha[q])n.B&&
0!=(n.B.O&2)&&(p=n);else break}k=p}k&&k.F&&(l=k.F.kl(k.f)+";"+k.f[0]+"-"+k.f[1]+"-"+k.f[2]+";"+k.B.re+";"+k.B.Jd,l=Dd(b.F,b.f,encodeURIComponent(l)))}l||(l=Dd(b.Da,b.f,""));k=b.oc;n={K:b,F:b.F};p=k.Ka[l];p||(p=new wd(k.c,l,n),k.Ka[l]=p);b.Rd=p}l=a.Eb;b.Zd!=b.F.Zd&&(b.ja=[[],[],[]],null!=b.pc&&b.pc.C(),b.pc=null,b.Zd=b.F.Zd);if(0<b.ja[l].length&&yd(b.ja[l],e,g,h))f||(Ad(a,d,b.ja[l],e),zd(a,b)),b.ic=null,b=!0;else if(b.pc||!b.Rd.W(g,e)||g||(b.pc=new xd(a,b.Rd,{K:b,F:b.F})),b.pc){b.Ne={};a=b.F?b.F.bf:
0;d=0;for(e=c.I.length;d<e;d++)b.Ne[c.I[d]]=a;b.ja[l][0]={U:"geodata",qo:b.pc};b=b.pc.W()}else b=!1}else a:{if(!b.Pa){if(b.Da.Ud){b=!0;break a}l=b.Da;k=b.f;q=Sc(l.c,l.Nj,{ca:k[0],qb:k[1],rb:k[2]},null,void 0);l=b.oc;k=q;n=l.Yo[k];n||(n=new Ed(l.c,k,b),l.Yo[k]=n);b.Pa=n}l=a.Eb;k=!1;if(0<b.ja[l].length&&yd(b.ja[l],e,g,h))f||(Ad(a,d,b.ja[l],e),zd(a,b)),b.ic=null,b=!0;else{if(b.ic)if(1==b.Pa.W(!0,e)){if(0<b.ja[l].length){f||(Ad(a,d,b.ic.ja[l],e,!0),zd(a,b));b=!0;break a}}else f||(Ad(a,d,b.ic.ja[l],e,
!0),zd(a,b)),k=!0;0<b.ja[l].length&&a.h.Lg&&!f&&(Cd(b,d),k=!0);if(b.Pa.W(g,e)&&!g){n=b.Pa.sb;b.ja=[[],[],[]];b.Vb={};b.cc={};var z=0;if(b.F.wf){q=b.F.f;p=0;for(v=q.length;p<v;p++)(u=a.be(q[p]))&&(z=Math.max(z,u.bf));for(var q=0,x=c.I.length;q<x;q++)b.vf[c.I[q]]=z}else for(z=b.F.bf,q=0,x=c.I.length;q<x;q++)b.Vb[c.I[q]]=z;p=0;for(v=n.length;p<v;p++){c=n[p];a.ec&&a.zh&&!f&&c.ug(d);if(c.Zc){if(b.ui){b.ui=!1;for(var q=a,u=b,x=n,z=0,w=x.length;z<w;z++){var C=x[z];if(C.Zc){var B=u.Da;u.Da.wf&&(B=u.Da.fg[C.fg-
1]);if(B){var t=u.Vc[B.f];t||(t={sd:[],fb:[],kk:!1,Td:0},u.Vc[B.f]=t);if(t.Td!=u.Td){var J=q,y=u,A=C,C=B,B=t,t=t.Td!=u.Td;if(0<C.Ic.length){if(t){B.sd=[];for(var J=[],K=A=0,V=C.Ic.length;K<V;K++){var H=C.Ic[K][0];if(H&&H.ta&&Qc(H,y.f)&&0<C.Ic[K][1]){var aa=null;y.f[0]>H.ra[1]&&(aa={$f:Fd(y,H.ra[1]),Sp:null,Ia:H,K:y});t=y.lb[H.f];t||(t=Rc(H,y.f),t=Vc(y.oc,t,null,aa,{K:y,Ia:H},y,!1),t.W(!0),y.lb[H.f]=t);!t.Kf&&(Gd(t)&&(B.kk=!0),(t=!(1>C.Ic[K][1]||t.J||Gd(t)||H.qj))&&A++,J.push(t),B.sd.push(H.f),B.fb[H.f]=
C.Ic[K],y.Ta[H.f]=H,1>B.fb[H.f][1]||H.qj)&&(B.kk=!0)}}if(0<A){C=[];for(A=B.sd.length-1;0<=A;A--)if(K=B.sd[A],J[A]){C.unshift(K);break}else t=y.lb[K],(1>B.fb[K][1]||y.Ta[K].qj||Gd(t)&&!t.J)&&C.unshift(K);B.sd=C}}}else null!=C.ze?t&&(H=J.Ta[C.ze])&&Qc(H,y.f)&&(aa=null,y.f[0]>H.ra[1]&&(aa={$f:Fd(y,H.ra[1]),Sp:null,Ia:H,K:y}),B.sd.push(H.f),y.Ta[H.f]=H,y.lb[H.f]||(t=Rc(H,y.f),y.lb[H.f]=Vc(y.oc,t,null,aa,{K:y,Ia:H},y,!1))):0!=A.ze&&(H=Ec(J,A.ze))&&Qc(H,y.f)&&(aa=null,y.f[0]>H.ra[1]&&(aa={$f:Fd(y,H.ra[1]),
Sp:null,Ia:H,K:y}),y.Ta[H.f]=H,y.lb[H.f]||(t=Rc(H,y.f),y.lb[H.f]=Vc(y.oc,t,null,aa,{K:y,Ia:H},y,!1)))}}}}q=void 0;for(q in u.Vc)u.Vc[q].Td=u.Td}u=b.Da;b.Da.wf&&(u=b.Da.fg[c.fg-1]);if(null!=u&&(z=b.Vc[u.f]))if(c.Zc)if(0<z.sd.length)if(z.kk){c.vc&&(null==b.nb[p]&&(q=Hd(b.Da,b.f,p),b.nb[p]=Vc(b.oc,q,null,null,null,b,!0)),b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:b.nb[p],nd:"internal-nofog"}));b.ja[0].push({U:"state",Pd:a.lr});w=z.sd;y=0;for(B=w.length;y<B;y++)if(c=b.lb[w[y]]){b.cc[u.f]||(b.cc[u.f]=[]);
b.cc[u.f].push(w[y]);C=b.Ta[w[y]];J=C.I;q=0;for(x=J.length;q<x;q++)b.Vb[J[q]]=C.bf;b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:c,nd:"external-nofog",fb:z.fb[w[y]][1]})}b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:null,nd:"fog"});b.ja[0].push({U:"state",Pd:a.Ti})}else{if(q=z.sd[z.sd.length-1],c=b.lb[q]){b.cc[u.f]||(b.cc[u.f]=[]);b.cc[u.f].push(q);C=b.Ta[q];J=C.I;q=0;for(x=J.length;q<x;q++)b.Vb[J[q]]=C.bf;b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:c,nd:"external"})}}else if(c.ze){if(C=Ec(a,c.ze))if(c=b.lb[C.f]){b.cc[u.f]||
(b.cc[u.f]=[]);b.cc[u.f].push(C.f);C=b.Ta[C.f];J=C.I;q=0;for(x=J.length;q<x;q++)b.Vb[J[q]]=C.bf;b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:c,nd:"external"})}}else c.vc?(null==b.nb[p]&&(q=Hd(b.Da,b.f,p),b.nb[p]=Vc(b.oc,q,null,null,null,b,!0)),b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:b.nb[p],nd:"internal"})):b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:null,nd:"flat"});else c.vc&&(null==b.nb[p]&&(q=Hd(b.Da,b.f,p),b.nb[p]=Vc(b.oc,q,null,null,null,b,!0)),b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:b.nb[p],nd:"internal"}))}else c.vc&&
(null==b.nb[p]&&(q=Hd(b.Da,b.f,p),b.nb[p]=Vc(b.oc,q,null,null,null,b,!0)),b.ja[0].push({U:"submesh",mc:b.Pa,Tc:p,N:b.nb[p],nd:"internal"}));b.ja[1].push({U:"submesh",mc:b.Pa,Tc:p,nd:"depth"})}yd(b.ja[l],e,g,h)?(f||(Ad(a,d,b.ja[l],e),zd(a,b)),b.ic=null,k=!0):b.ic?(f||(Ad(a,d,b.ic.ja[l],e,!0),zd(a,b)),k=!0):a.h.Lg&&!f&&(Cd(b,d),k=!0)}else a.h.Lg&&!f&&(Cd(b,d),k=!0);b=k}}return b}return!0}if(!f&&b.ic)return Ad(a,d,b.ic.ja[a.Eb],e,!0),zd(a,b),!0}function Fd(a,b){for(;a&&a.f[0]>b;)a=a.va;return a}
function vd(a,b,c,d,e){a.zh||c.ug(d);if(4>c.$a.df){var f=c.A.P,g=c.A.pa;d=a.u.ae().uf([f[0]+.5*(g[0]-f[0])-d[0],f[1]+.5*(g[1]-f[1])-d[1],g[2]-d[2]],pa(a.G));d[2]*=.9992}else{var g=c.Ra[3]-c.Ra[0],h=c.Ra[4]-c.Ra[1],k=c.Ra[5]-c.Ra[2],g=Math.sqrt(g*g+h*h+k*k);d=a.u.ae().uf([.25*(c.Ra[12]+c.Ra[15]+c.Ra[18]+c.Ra[21])+c.Mc[0]*g*.1-d[0],.25*(c.Ra[13]+c.Ra[16]+c.Ra[19]+c.Ra[22])+c.Mc[1]*g*.1-d[1],.25*(c.Ra[14]+c.Ra[17]+c.Ra[20]+c.Ra[23])+c.Mc[2]*g*.1-d[2]],pa(a.G))}g=a.Ek;a.Rk&&(h=""+b.f[0],Pb(a.l,Math.round(d[0]-
.5*Qb(4*g,h)),Math.round(d[1]-4*g),4*g,h,[1,0,0,1],d[2]));a.eo&&(h=""+b.f[1]+" "+b.f[2],Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]-11*g),4*g,h,[0,1,1,1],d[2]));a.Vk&&(h=""+f[0].toFixed(1)+" "+f[1].toFixed(1)+" "+f[2].toFixed(1),Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+3*g),4*g,h,[0,1,1,1],d[2]));a.Pk&&e&&(h=""+e.Ge+" - "+e.sb.length+(b.F&&b.F.wf?" - 1":" - 0"),Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+10*g),4*g,h,[0,1,0,1],d[2]));a.Uk&&(h=""+a.Yk,Pb(a.l,Math.round(d[0]-
.5*Qb(4*g,h)),Math.round(d[1]+10*g),4*g,h,[0,1,0,1],d[2]));a.Wk&&(h=JSON.stringify(b.F.f),c.ph&&(h="[A]"+h),Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+10*g),4*g,h,[1,1,1,1],d[2]));if(a.Lk&&b.cc){var l=b.Da;if(l.wf)for(f=0,k=l.f.length;f<k;f++)b.cc[l.f[f]]&&(h="< "+l.f[f]+" >",Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+(10+14*f)*g),4*g,h,[1,1,1,1],d[2]),h=JSON.stringify(b.cc[l.f[f]]),Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+(17+14*f)*g),4*g,h,[1,1,1,1],d[2]));else b.cc[l.f]&&
(h="< "+l.f+" >",Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+10*g),4*g,h,[1,1,1,1],d[2]),h=JSON.stringify(b.cc[l.f]),Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+17*g),4*g,h,[1,1,1,1],d[2]))}if(a.Nk){var h="{ ",n;for(n in b.Vb)b.Vb[n]&&(h+=n+":"+b.Vb[n]+", ");for(n in b.vf)b.Vb[n]||(h+=n+":"+b.vf[n]+", ");h+="}";Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+10*g),4*g,h,[1,1,1,1],d[2])}a.Ok&&(h=""+b.Ea.toFixed(2)+"  "+b.ob.toFixed(3)+"  "+c.Tg.toFixed(3),h+="--"+b.Fu.toFixed(3),
Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+17*g),4*g,h,[1,0,1,1],d[2]));a.Sk&&(n=(c.O&240)>>4,h="v"+c.$a.wa+"-"+c.O.toString(2)+"-"+(n&1?"1":"0")+(n&2?"1":"0")+(n&4?"1":"0")+(n&8?"1":"0"),h+="-"+c.re+"/"+c.Jd+"-"+Math.floor(c.Re)+"/"+Math.floor(c.Qe),Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]-18*g),4*g,h,[1,0,1,1],d[2]));if(a.Xk&&e)for(c=e.sb,f=0,k=c.length;f<k;f++)c[f].vc&&(e=b.nb[f])&&e.wb&&(h="["+f+"]: "+e.wb.Ce+" x "+e.wb.Fg,Pb(a.l,Math.round(d[0]-.5*Qb(4*g,h)),Math.round(d[1]+
(17+14*f)*g),4*g,h,[1,1,1,1],d[2]))}function S(a){this.c=a;this.h=a.h}m=S.prototype;m.setPosition=function(a){this.c.setPosition(a);return this};m.uc=function(){return this.c.uc().o};m.ve=function(a){this.c.ve(a);return this};m.yg=function(){return this.c.yg()};m.gl=function(){return this.c.gl()};
m.Fr=function(){var a=this.c,b=a.yd.Qh,c=a.yd.fj,d=[],e=[],f;for(f in c)b[f]||(b[f]=c[f]);a.yd.fj={};for(f in b)d.push(f),e.push(b[f]);do for(var g=!0,b=0,c=e.length-1;b<c;b++)e[b]<e[b+1]&&(g=e[b],e[b]=e[b+1],e[b+1]=g,g=d[b],d[b]=d[b+1],d[b+1]=g,g=!1);while(!g);b=a.yd.Ij;a=[];e=[];for(f in b)a.push(f),e.push(b[f]);do for(g=!0,b=0,c=e.length-1;b<c;b++)e[b]<e[b+1]&&(g=e[b],e[b]=e[b+1],e[b+1]=g,g=a[b],a[b]=a[b+1],a[b+1]=g,g=!1);while(!g);return{"3D":[],imagery:d,mapdata:a}};
m.Er=function(a){return(a=this.c.I[a])?a.ub():{}};m.Wr=function(){return Ma(this.c.Jf)};m.Vr=function(a){return(a=this.c.Jf[a])?a.ub():{}};m.Eh=function(){return this.c.Eh()};m.so=function(a){return this.c.so(a)};m.$i=function(){return this.c.$i()};m.Gr=function(a){return(a=this.c.X[a])?a.ub():{}};m.ej=function(){return this.c.ej()};m.Ur=function(a){return(a=this.c.X[a])?a.ub():{}};m.ol=function(){return this.c.ol(surfaceId_)};m.Hd=function(a){return(a=this.c.ag[a])?a.ub():{}};m.Tr=function(){return this.c.bb.ub()};
m.Di=function(a,b){var c=new yc(this.c,b,"free");this.c.Di(a,c)};m.Im=function(a){this.c.Im(a)};m.Bi=function(a,b){var c=new Ac(this.c,b,a);this.c.Bi(a,c)};m.Hm=function(a){this.c.Hm(a)};m.br=function(a,b){var c=Aa(new fc(this.c,a),b);return null!=c?c.o:c};m.ar=function(a,b){var c=qd(new fc(this.c,a),b);return null!=c?c.o:c};m.pb=function(a,b,c){a=this.c.ag[a];b=this.c.ag[b];return a&&b?Id(b,c,a):null};m.Pn=function(a,b,c){return(new fc(this.c,["obj",a[0],a[1],b,a[2],0,0,0,10,90])).uf(c)};
m.Mi=function(a){return(new fc(this.c,["obj",a[0],a[1],"fix",a[2],0,0,0,10,90])).uf(null,!0)};m.$q=function(a,b,c){return sd(new fc(this.c,["obj",a[0],a[1],b,a[2],0,0,0,10,90]),c)};m.yk=function(a){var b=this.c.ba;return[a[0]-b[0],a[1]-b[1],a[2]-b[2]]};m.Xq=function(a){return(new fc(this.c,a)).o};m.ou=function(a,b){return kd(new fc(this.c,a),b).o};m.uo=function(a){return Oc(new fc(this.c,a))};m.qu=function(a,b){return md(new fc(this.c,a),b).o};m.Pr=function(a){return(new fc(this.c,a)).o[4]};
m.ru=function(a,b){return(new fc(this.c,a)).setOrientation(b).o};m.Rr=function(a){return(new fc(this.c,a)).Rb()};m.su=function(a,b){return od(new fc(this.c,a),b).o};m.vo=function(a){return(new fc(this.c,a)).o[8]};m.pu=function(a,b){return nd(new fc(this.c,a),b)};m.Or=function(a){return(new fc(this.c,a)).bd()};m.Sr=function(a){return(new fc(this.c,a)).o[0]};m.Qr=function(a){return(new fc(this.c,a)).o[3]};m.Nr=function(a,b){return(new fc(this.c,a)).uf(b)};
m.Mr=function(a,b){return rd(new fc(this.c,a),b)};m.bp=function(a,b,c,d){return pd(new fc(this.c,a),b,c,d).o};m.cd=function(a,b){return this.c.cd(a,Jd(this.c,a,b))};m.hl=function(a,b,c){return this.c.zv(a,b,c)};m.fl=function(a,b){return this.c.fl(a,b)};m.Fh=function(){var a=this.c.G;return{"projection-matrix":a.We.slice(),"view-matrix":a.Pg.slice(),"view-projection-matrix":a.ei.slice(),"rotation-matrix":a.Zf.slice(),position:this.c.ba.slice(),vector:this.c.Bd.slice(),distance:this.c.Db}};
m.ss=function(a){var b;a:{b=this.c.G;var c=this.c.ba;b.ua&&b.update();a=c?[a[0]-c[0],a[1]-c[1],a[2]-c[2],1]:[a[0],a[1],a[2],1];for(c=0;6>c;c++)if(0>r.jg.lf(b.ad[c],a)){b=!1;break a}b=!0}return b};m.rs=function(a){return this.c.G.Ad({P:a[0],pa:a[1]},this.c.ba)};m.Ar=function(a,b,c){a=new fc(this.c,a);b=new fc(this.c,b);return(new Kd(this.c,a,b,c)).bl()};P.prototype.Od=function(a){this.c.Od(a);return this};m=S.prototype;m.Nd=function(a,b){this.c.Nd(a,b);return this};
m.Ie=function(a){return this.c.Ie(a,value_)};m.zp=function(){D(this.c);return this};m.Ei=function(a,b,c){this.c.Ei(a,b,c);return this};m.pm=function(a,b){this.c.pm(a,b);return this};m.om=function(a,b){this.c.om(a,b);return this};m.Jm=function(a){this.c.Jm(a);return this};m.Um=function(a,b){this.c.Um(a,b);return this};m.nl=function(a){return this.c.nl(a)};m.nu=function(a){this.c.Ig=a;return this};m.Jr=function(){return this.c.Ig};m.Hr=function(){return this.c.Sb};
m.jl=function(a,b,c,d){return this.c.jl(a,b,c,d)};m.xg=function(a,b){return this.c.xg(a,b)};m.getStats=function(){for(var a=0,b=0,c=this.c.el;b<c;b++)this.c.el[b].Hn&&a++;return{bestMeshTexelSize:this.c.Hi,bestGeodataTexelSize:this.c.Dn,downloading:this.c.xc.Ed.length,lastDownload:this.c.xc.Th,surfaces:this.c.Kb.gg.length,freeLayers:this.c.Bh.length,texelSizeFit:this.c.pi,loadMode:this.c.h.Dj,processingTasks:this.c.Ld.length,busyWorkers:a,dirty:this.c.ua,drawnTiles:this.c.m.Yd,drawnGeodataTiles:this.c.m.Vi}};
m.click=function(a,b,c){this.c.click(a,b,c)};m.Kl=function(a,b,c,d){this.c.Kl(a,b,c,d)};r.lv=fc;S.prototype.setPosition=S.prototype.setPosition;S.prototype.getPosition=S.prototype.uc;S.prototype.setView=S.prototype.ve;S.prototype.getView=S.prototype.yg;S.prototype.getCredits=S.prototype.gl;S.prototype.getCurrentCredits=S.prototype.Fr;S.prototype.getCreditInfo=S.prototype.Er;S.prototype.getViews=S.prototype.Wr;S.prototype.getViewInfo=S.prototype.Vr;S.prototype.getBoundLayers=S.prototype.Eh;
S.prototype.getBoundLayerInfo=S.prototype.so;S.prototype.getFreeLayers=S.prototype.$i;S.prototype.getFreeLayerInfo=S.prototype.Gr;S.prototype.getSurfaces=S.prototype.ej;S.prototype.getSurfaceInfo=S.prototype.Ur;S.prototype.getSrses=S.prototype.ol;S.prototype.getSrsInfo=S.prototype.Hd;S.prototype.getReferenceFrame=S.prototype.Tr;S.prototype.addFreeLayer=S.prototype.Di;S.prototype.removeFreeLayer=S.prototype.Im;S.prototype.addBoundLayer=S.prototype.Bi;S.prototype.removeBoundLayer=S.prototype.Hm;
S.prototype.convertPositionViewMode=S.prototype.br;S.prototype.convertPositionHeightMode=S.prototype.ar;S.prototype.convertCoords=S.prototype.pb;S.prototype.convertCoordsFromNavToCanvas=S.prototype.Pn;S.prototype.convertCoordsFromPhysToCanvas=S.prototype.Mi;S.prototype.convertCoordsFromNavToCameraSpace=S.prototype.$q;S.prototype.convertCoordsFromPhysToCameraSpace=S.prototype.yk;S.prototype.clonePosition=S.prototype.Xq;S.prototype.setPositionCoords=S.prototype.ou;S.prototype.getPositionCoords=S.prototype.uo;
S.prototype.setPositionHeight=S.prototype.qu;S.prototype.getPositionHeight=S.prototype.Pr;S.prototype.setPositionOrientation=S.prototype.ru;S.prototype.getPositionOrientation=S.prototype.Rr;S.prototype.setPositionViewExtent=S.prototype.su;S.prototype.getPositionViewExtent=S.prototype.vo;S.prototype.setPositionFov=S.prototype.pu;S.prototype.getPositionFov=S.prototype.Or;S.prototype.getPositionViewMode=S.prototype.Sr;S.prototype.getPositionHeightMode=S.prototype.Qr;
S.prototype.getPositionCanvasCoords=S.prototype.Nr;S.prototype.getPositionCameraCoords=S.prototype.Mr;S.prototype.movePositionCoordsTo=S.prototype.bp;S.prototype.getSurfaceHeight=S.prototype.cd;S.prototype.getDistance=S.prototype.hl;S.prototype.getAzimuthCorrection=S.prototype.fl;S.prototype.getCameraInfo=S.prototype.Fh;S.prototype.isPointInsideCameraFrustum=S.prototype.ss;S.prototype.isBBoxInsideCameraFrustum=S.prototype.rs;S.prototype.generateTrajectory=S.prototype.Ar;
S.prototype.setConfigParam=S.prototype.Nd;S.prototype.getConfigParam=S.prototype.Ie;S.prototype.redraw=S.prototype.zp;S.prototype.addRenderSlot=S.prototype.Ei;S.prototype.moveRenderSlotBefore=S.prototype.pm;S.prototype.moveRenderSlotAfter=S.prototype.om;S.prototype.removeRenderSlot=S.prototype.Jm;S.prototype.setRenderSlotEnabled=S.prototype.Um;S.prototype.getRenderSlotEnabled=S.prototype.nl;S.prototype.setLoaderSuspended=S.prototype.nu;S.prototype.getLoaderSuspended=S.prototype.Jr;
S.prototype.getGpuCache=S.prototype.Hr;S.prototype.getHitCoords=S.prototype.jl;S.prototype.getScreenRay=S.prototype.xg;S.prototype.getStats=S.prototype.getStats;S.prototype.click=S.prototype.click;S.prototype.hover=S.prototype.Kl;function kc(a,b){this.c=a;this.Mj=b||1;this.lk=0;this.Kj=2*this.Mj;this.ko=.95;this.Sg=[[],[]];this.Ki=0;this.Ed=[];this.tg=[];this.Th=0;Ld(this)}function Ld(a){a.Mj=a.c.h.Yh;a.Kj=Math.max(20,2*a.Mj);a.ko=(a.Kj-1)/a.Kj}m=kc.prototype;
m.load=function(a,b,c,d,e){var f=this.Ed.indexOf(a);if(-1==f){var g=this.Sg[this.Ki],f=Kc(g,a);-1!=f?g[f].Cc=c:g.unshift({f:a,In:b,Cc:c||0,K:d,Ff:e});do for(c=!0,a=0,b=g.length-1;a<b;a++)g[a].Cc>g[a+1].Cc&&(c=g[a],g[a]=g[a+1],g[a+1]=c,c=!1);while(!c);g.length>this.Kj&&g.pop()}};m.remove=function(a){a=Kc(this.Sg[this.Ki],a);-1!=a&&this.Sg[this.Ki].splice(a,1)};
m.zb=function(a){var b=this.Ed.indexOf(a.f),c=performance.now(),d=this.c.m;this.c.w.dk&&(this.c.w.kc.push({vd:a.f,Ff:a.Ff,K:a.K,Cc:a.Cc,kq:c,H:c-this.tg[b],pj:c-this.Th,Fc:this.Ed.length}),Number.isNaN(c-this.tg[b]));this.Ed.splice(b,1);this.tg.splice(b,1);this.Th=c;this.lk--;D(this.c);this.update();d.Xl++;d.Wh=c};
m.nc=function(a){var b=this.Ed.indexOf(a.f),c=performance.now(),d=this.c.m;this.c.w.dk&&this.c.w.kc.push({vd:a.f,Ff:a.Ff,K:a.K,Cc:a.Cc,kq:c,H:c-this.tg[b],pj:c-this.Th,Fc:this.Ed.length});this.Ed.splice(b,1);this.tg.splice(b,1);this.Th=c;this.lk--;D(this.c);this.update();d.Wl++;d.Wh=c};
m.update=function(){if(!this.c.Ig)for(var a=this.Sg.length-1;0<=a;a--)if(0<this.Sg[a].length){a=this.Sg[a];Ld(this);for(var b=0,c=a.length;b<c;b++)a[b].Cc*=this.ko;for(b=performance.now();0<a.length&&this.lk<this.Mj;)c=a.shift(),-1==this.Ed.indexOf(c.f)&&null!=c.In&&(this.Ed.push(c.f),this.tg.push(b),this.lk++,c.In(c.f,this.zb.bind(this,c),this.nc.bind(this,c)));break}};
ec.prototype.cd=function(a,b,c,d,e,f){if(!d){var g=Md(this,a);d=g[0];e=g[1]}this.h.Kg||(b=Math.floor(b));if(this.h.em)return Nd(this,null,b+8,c,b,null,d,e,f);var h=this.Kb;if(null!=d&&null!==b){g={Qn:e,uh:Math.ceil(b),S:{Z:d.S.Z.slice(),ea:d.S.ea.slice()},B:null,Za:null,Lh:null,$u:!0};Od(h,Pd(h,d.f),g,!1);h=g.B;if(null!=g.Za){c&&(this.m.Kh=2,this.m.ij=b,this.m.jj=h.f[0]);a=h.f[0]>=Math.ceil(b);var k;if(this.h.Kg&&0<h.f[0]&&g.va&&g.va.Za&&b<=h.f[0]){if(c=Qd(e,g.va.B,g.va),e=Qd(e,h,g),b-=Math.floor(b),
d=c+(e-c)*b,f){k=Array(f.length);for(var l=0,n=f.length;l<n;l++)e=f[l],c=Qd(e,g.va.B,g.va),e=Qd(e,h,g),k[l]=[c+(e-c)*b,a,!0]}}else if(d=Qd(e,h,g),f)for(k=Array(f.length),l=0,n=f.length;l<n;l++)e=Qd(f[l],h,g),k[l]=[e,a,!0];return[d,a,!0,null,null,k]}if(null!=h)return a=Nd(this,a,b+8,c,b,null,d,e,f),[a[0],a[1],!0,null,null,a[5]]}return[0,!1,!1,null,null,null]};
function Nd(a,b,c,d,e,f,g,h,k){var l;if(f)g=f[0],h=f[1];else if(g||(h=Md(a,b),g=h[0],h=h[1]),k){l=Array(k.length);b=0;for(var n=k.length;b<n;b++)l[b]=Nd(a,null,c,d,e,f,g,k[b])}a.h.Kg||(c=Math.floor(c));if(!f&&a.h.dm){f=Nd(a,null,c,d,e,[g,[h[0],h[1],h[2]]]);if(f[2]){var p=f[3].ea[0]-f[3].Z[0],v=f[3].ea[1]-f[3].Z[1];k=(h[0]-f[3].Z[0])/p;b=(h[1]-f[3].Z[1])/v;var u=Nd(a,null,c,d,e,[g,[h[0]+p,h[1],h[2]]]),n=Nd(a,null,c,d,e,[g,[h[0],h[1]+v,h[2]]]);c=Nd(a,null,c,d,e,[g,[h[0]+p,h[1]+v,h[2]]]);a=f[0]+(u[0]-
f[0])*k;c=a+(n[0]+(c[0]-n[0])*k-a)*b;return[c,f[1],f[2],f[3],null,l]}return[f[0],f[1],f[2],f[3],null,l]}f=a.Kb;if(null!=g&&null!==c&&(h={Qn:h,uh:Math.ceil(c),S:{Z:g.S.Z.slice(),ea:g.S.ea.slice()},B:null,Za:null,Lh:null,$u:!0},Od(f,Pd(f,g.f),h,!0),g=h.B,null!=g))return f=g.A.xk(),f=a.pb(f,"physical","navigation"),d&&(a.m.Kh=1,a.m.ij=e,a.m.jj=g.f[0]),a.h.Kg&&0<g.f[0]&&h.va&&h.va.B?(a=a.pb(h.va.B.A.xk(),"physical","navigation"),c=f[2]+(a[2]-f[2])*(c-Math.floor(c)),[c,!0,!0,h.S,g,l]):[f[2],!0,!0,h.S,
g,l];d&&(a.m.Kh=0,a.m.ij=e,a.m.jj=0);return[0,!1,!1,null,null,l]}function Qd(a,b,c){var d=c.Za,e=d.getImageData(),f=d.kd.mj;c=c.Lh;d=a[0]-c.Z[0];a=c.ea[1]-a[1];var g=f[0]-1,h=f[1]-1,d=d/(c.ea[0]-c.Z[0])*g;a=a/(c.ea[1]-c.Z[1])*h;0>d&&(d=0);0>a&&(a=0);d>g&&(d=g);a>h&&(a=h);var k=Math.floor(d);c=Math.floor(a);var d=d-k,l=c*f[0],f=c==h?l:l+f[0],g=k==g?k:k+1,h=e[4*(l+k)],k=e[4*(f+k)],l=h+(e[4*(l+g)]-h)*d,e=l+(k+(e[4*(f+g)]-k)*d-l)*(a-c);return e=b.re+e/255*(b.Jd-b.re)}
function Md(a,b){for(var c=a.bb.Dd.Ca,d=null,e=-1,f=[0,0],g=0,h=c.length;g<h;g++){var k=c[g],l=Id(k.Xm,b,Ta(k.c)),n=k.S;l[0]>=n.Z[0]&&l[0]<=n.ea[0]&&l[1]>=n.Z[1]&&l[1]<=n.ea[1]&&k.f[0]>e&&(d=k,e=k.f[0],f=l)}return[d,f]}
function Rd(a,b){for(var c=a.bb.Dd.Ca,d=null,e=[0,0],f=0,g=c.length;f<g;f++){var h=c[f],k=b[0]-h.f[0];if(0<=k){var l=b[2]>>k;h.f[1]==b[1]>>k&&h.f[2]==l&&(d=h,e=[h.f[1]<<k,h.f[2]<<k])}}if(!d)return null;k=b[0]-d.f[0];h=1/Math.pow(2,k);c=d.S.ea;f=d.S.Z;g=(c[0]-f[0])*h;h*=f[1]-c[1];k=b[1]-e[0];e=b[2]-e[1];return[d,[[f[0]+g*k,c[1]+h*e],[f[0]+g*(k+1),c[1]+h*(e+1)]]]}function Jd(a,b,c){a=Md(a,b)[0];return null!=a?(c=Math.log((a.S.ea[1]-a.S.Z[1])/c)/Math.log(2),c=c-8+a.f[0],Math.max(0,c)):null}
function Nc(a,b,c,d){a=Md(a,b)[0];return null!=a?(c=Math.log(d*(a.S.ea[1]-a.S.Z[1])/c)/Math.log(2),c=c-8+a.f[0],Math.max(0,c)):null}ec.prototype.hl=function(a,b,c){var d=Id(this.bb.Xb.Ve,a,Ta(this)),e=Id(this.bb.Xb.Ve,b,Ta(this)),f=e[0]-d[0],g=e[1]-d[1],e=e[2]-d[2],d=c?Math.sqrt(f*f+g*g+e*e):Math.sqrt(f*f+g*g),h=Ta(this).Hd();if(Sa(Ta(this)))return[d,r.Fk(Math.atan2(g,f))];a=Lc(this).Inverse(a[1],a[0],b[1],b[0]);return d>2*h.a*Math.PI/4007.5?c?[Math.sqrt(a.s12*a.s12+e*e),a.qv]:[a.s12,a.azi1]:[d,a.azi1]};
function Lc(a){a=Ta(a).Hd();return new GeographicLib.Geodesic.Geodesic(a.a,a.a/a.b-1)}
function Kd(a,b,c,d){this.c=a;this.rd=b.clone();this.Ue=c.clone();this.kt=c.clone();a=this.rd.o[3];b=this.Ue.o[3];"fix"==a&&"float"==b?qd(this.rd,"float"):"float"==a&&"fix"==b&&qd(this.rd,"fix");a=this.rd.o[0];b=this.Ue.o[0];"subj"==a&&"obj"==b?Aa(this.Ue,"subj"):"obj"==a&&"subj"==b&&Aa(this.rd,"subj");this.rd.o[5]=0>this.rd.o[5]?360+this.rd.o[5]%360:this.rd.o[5]%360;this.Ue.o[5]=0>this.Ue.o[5]?360+this.Ue.o[5]%360:this.Ue.o[5]%360;this.Zb=this.rd.clone();this.Og=d.mode||"auto";this.Bu="none";this.Jd=
d.maxHeight||1E9;this.Rs=d.minDuration||0;this.Jj=d.maxDuration||1E4;this.Gp=d.samplePeriod||10;this.sr=d.fade||"none";this.$k=d.fadePower||1;this.Wt=d.pv||.15;Sa(Ta(this.c))||(this.ro=Lc(this.c));d.distanceAzimuth?(this.Ik=!0,this.Ab=this.rd.clone(),d.destHeight&&md(this.Ab,d.destHeight),d.destOrientation&&md(this.Ab,d.destOrientation),d.destFov&&md(this.Ab,d.destFov),this.Yi=d.azimuth||0,this.Ea=this.cl=d.distance||100,this.tb=this.Yi%360,this.tb=0>this.tb?360+this.tb:this.tb):(this.Ik=!1,this.Ab=
this.Ue.clone(),a=this.c.hl(Oc(this.Zb),Oc(this.Ab)),this.Ea=a[0],this.tb=(a[1]-90)%360,this.tb=0>this.tb?360+this.tb:this.tb,Sa(Ta(this.c))||(a=this.ro.Inverse(this.Zb.o[2],this.Zb.o[1],this.Ab.o[2],this.Ab.o[1]),this.Yi=a.azi1,this.cl=a.s12,this.tb=this.Yi%360,this.tb=0>this.tb?360+this.tb:this.tb));"auto"==this.Og&&(this.Og=2E3<this.Ea?"ballistic":"direct");this.H=0;this.hc=1E3;500>this.Ea?this.H=1E3:2E3>this.Ea?this.H=2E3:(this.H=this.Ea/100,300>this.H?this.H=3E3:this.hc=1500,6E3>this.H&&(this.H=
6E3),1E4<this.H&&(this.H=1E4),"direct"!=this.Og&&(this.H*=1.8,this.hc*=1.8));"direct"!=this.Og&&(a=3*this.hc,this.H=Math.max(this.H,a),this.Jj<a&&(this.H=this.Jj,this.hc=this.Jj/3));this.H=Math.min(this.H,this.Jj);this.H=Math.max(this.H,this.Rs);d=d.height;"ballistic"==this.Og&&(this.qf=Math.max(this.Zb.o[4],this.Ab.o[4]),this.qf+=d||.5*this.Ea,this.qf=Math.min(this.qf,this.Jd),this.qf-=Math.max(this.Zb.o[4],this.Ab.o[4]))}
Kd.prototype.bl=function(){for(var a=Array(Math.ceil(this.H/this.Gp)+(this.Ik?0:1)),b=0,c=0;c<=this.H;c+=this.Gp){var d=c/this.H,e=this.Zb.clone();if("direct"==this.Og){var f=d;switch(this.sr){case "in":switch(this.$k){case 1:d=f*f;break;case 2:d=f*f*f;break;case 3:d=f*f*f*f;break;case 4:d=f*f*f*f*f;break;case 5:d=f*f*f*f*f*f;break;case 6:d=f*f*f*f*f*f*f}break;case "out":f=1-f;switch(this.$k){case 1:d=1-f*f;break;case 2:d=1-f*f*f;break;case 3:d=1-f*f*f*f;break;case 4:d=1-f*f*f*f*f;break;case 5:d=
1-f*f*f*f*f*f;break;case 6:d=1-f*f*f*f*f*f*f}break;case "inout":switch(this.$k){case 1:d=f*f*(3-2*f);break;case 2:d=f*f*f*(f*(6*f-15)+10);break;case 3:f=d=f*f*(3-2*f);d=f*f*(3-2*f);break;case 4:f=d=f*f*f*(f*(6*f-15)+10);d=f*f*f*(f*(6*f-15)+10);break;case 5:f=d=f*f*(3-2*f);f=d=f*f*(3-2*f);d=f*f*(3-2*f);break;case 6:f=d=f*f*f*(f*(6*f-15)+10),f=d=f*f*f*(f*(6*f-15)+10),d=f*f*f*(f*(6*f-15)+10)}}kd(e,Sd(this,d));f=this.Zb.o[4];md(e,f+(this.Ab.o[4]-f)*d);e.setOrientation(Td(this.Zb.Rb(),this.Ab.Rb(),d));
nd(e,he(this,d));od(e,ie(this,d))}else{f=d;f=d=f*f*(3-2*f);d=f*f*(3-2*f);f=c<this.hc?0:c>this.H-this.hc?1:Math.min(1,(c-this.hc)/(this.H-2*this.hc));f=f*f*(3-2*f);factor2_=f*f*(3-2*f);if("piha"==this.Bu){var f=Oc(this.Zb)[2],g=this.Ea/(.001*this.H*this.Wt*Math.tan(.5*r.La(this.Zb.bd())))*(1-Math.cos(2*Math.PI*c/this.H))+f+(Oc(this.Ab)[2]-f)*c/this.H,f=Sd(this,this.Ea/this.H*(c-this.H/(2*Math.PI)*Math.sin(2*Math.PI/this.H*c))/this.Ea);kd(e,f);md(e,g)}else f=Sd(this,factor2_),kd(e,f),g=Oc(this.Zb),
md(e,g[2]+(Oc(this.Ab)[2]-g[2])*d+Math.sin(Math.PI*d)*this.qf);null!=f[3]&&(this.tb=f[3]);var f=c,g=[0,-90,0],h;g[0]=this.tb%360;0>g[0]&&(g[0]=360-Math.abs(g[0]));f<=this.hc?(h=f/this.hc,f=this.Zb.Rb()):f>=this.H-this.hc?(h=(f-(this.H-this.hc))/this.hc,f=g,g=this.Ab.Rb()):(h=0,f=g);e.setOrientation(Td(f,g,h));nd(e,he(this,d));od(e,ie(this,d));a[b]=e.o}a[b]=e.o;b++}this.Ik||(a[b]=this.kt.clone().o);return a};
function Sd(a,b){var c=Oc(a.Zb),d=Oc(a.Ab);if(Sa(Ta(a.c)))return[c[0]+(d[0]-c[0])*b,c[1]+(d[1]-c[1])*b,c[2]+(d[2]-c[2])*b];var e=a.ro.Direct(c[1],c[0],a.Yi,a.cl*b),f=e.azi1-e.azi2,f=0>a.tb?360+f:f;return[e.lon2,e.lat2,c[2]+(d[2]-c[2])*b,f]}function Td(a,b,c){var d=b[0]-a[0],e=b[1]-a[1];b=b[2]-a[2];180<Math.abs(d)&&(d=0<d?-(360-d):360-Math.abs(d));return[a[0]+d*c,a[1]+e*c,a[2]+b*c]}function he(a,b){var c=a.Zb.bd();return c+(a.Ab.bd()-c)*b}function ie(a,b){var c=a.Zb.o[8];return c+(a.Ab.o[8]-c)*b}
function xc(a,b,c){this.c=a;this.m=a.m;this.f=b;this.Aa=this.vd=null;this.gc=this.v=this.L=0;"object"===typeof c?(this.Aa=c,this.L=2):(this.vd=this.c.Hb(c),r.Id(this.vd,this.zb.bind(this),this.nc.bind(this),null,r.useCredentials?-1!=this.vd.indexOf(this.c.Qa):!1,this.c.u.Mb),this.L=1)}m=xc.prototype;m.C=function(){};m.setData=function(a){this.Aa=a;this.L=2};m.W=function(a,b){if(2==this.L)return!0;0!=this.L||a||this.Cb(b);return!1};m.Cb=function(a){this.c.xc.load(this.vd,this.qd.bind(this),a)};
m.qd=function(){this.L=1};m.nc=function(){};m.zb=function(a){1!=this.c.T&&(this.Aa=a,this.L=2,D(this.c))};m.size=function(){return this.v};m.fileSize=function(){return this.gc};function wd(a,b,c){this.c=a;this.m=a.m;this.la=b;this.hb=c;this.A=new jb;this.gc=this.v=0;this.fa=this.Ka=null;this.L=0;this.Ua=null;this.xa=0;D(this.c)}m=wd.prototype;m.C=function(){this.A=null;this.Ml()};
m.Ml=function(a){this.Ka&&(this.Ka=null);1!=a&&null!=this.fa&&this.c.Jb.remove(this.fa);this.gc=this.v=this.L=0;this.fa=null};
m.W=function(a,b){var c=this.c.m.vb>=this.c.Pe;a=a||c;if(2==this.L)return id(this.c.Jb,this.fa),!0;if(0==this.L){if(!a){if("object"===typeof this.la)return this.Ka=JSON.stringify(this.la),this.L=2,this.fa=jd(this.c.Jb,this.Ml.bind(this,!0),this.Ka.length),id(this.c.Jb,this.fa),!0;this.Cb(b)}}else 3==this.L&&this.xa<=this.c.h.Pc&&performance.now()>this.Ua+this.c.h.Qc&&this.Cb(b);return!1};m.Cb=function(a){this.c.xc.load(this.la,this.qd.bind(this),a,this.hb.K,"geodata")};
m.qd=function(a,b,c){this.Rc=b;this.ld=c;this.L=1;r.Id(a,this.zb.bind(this),this.nc.bind(this),!0,r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb)};m.nc=function(){this.c.T||(this.L=3,this.Ua=performance.now(),this.xa++,this.xa<=this.c.h.Pc&&setTimeout(function(){this.c.T||D(this.c)}.bind(this),this.c.h.Qc),this.ld())};m.zb=function(a){if(!this.c.T){var b=a.length;this.gc=this.v=b;this.Ka=a;this.fa=jd(this.c.Jb,this.Ml.bind(this,!0),b);D(this.c);this.L=2;this.Ua=null;this.xa=0;this.Rc()}};
m.size=function(){return this.v};m.fileSize=function(){return this.gc};
function xd(a,b,c){this.c=a;this.m=a.m;this.Ka=b;this.j=this.c.l.j;this.l=this.c.l;this.Cg=[];this.rg=null;this.K=c.K;this.F=c.F;this.F.Qb?this.F.$m&&(Oa(this.F.Qb,"setStylesheet",{data:this.F.ud.Aa,geocent:!Sa(Ta(this.c))}),this.F.$m=!1):(a=new r.zi(this,this.hi.bind(this)),Oa(a,"setStylesheet",{data:this.F.ud.Aa,geocent:!Sa(Ta(this.c))}),Oa(a,"setFont",{chars:this.l.Gd.Xd,space:this.l.Gd.hh,size:this.l.Gd.v}),this.F.Qb=a,this.c.el.push(a));this.Qb=this.F.Qb;this.v=0;this.ta=this.Ol=this.T=!1;this.W()}
m=xd.prototype;m.C=function(){this.T=!0;this.Ka=null;this.Jo(!1)};m.Jo=function(a){this.Ol=a;for(var b=0,c=this.Cg.length;b<c;b++)this.Cg[b].C();this.Cg=[];1!=a&&null!=this.mb&&this.c.Sb.remove(this.mb);this.m.Bg-=this.v;this.m.dd[1][0]++;this.m.dd[1][1]+=this.v;this.ta=!1;this.v=0;this.mb=null};
m.hi=function(a,b,c){if(!this.T&&!this.Ol)switch(a){case "beginGroup":c?(this.rg=new hb(b.id,b.bbox,b.origin,this.j,this.l),this.Cg.push(this.rg)):(D(this.c),this.c.Ld.push(this.hi.bind(this,a,b,!0)));break;case "addRenderJob":if(c){if(this.rg){a=performance.now();c=this.rg;switch(b.type){case "flat-line":var d=c.s,e=b.vertexBuffer,f=b.color,g=1/255,h={U:"flat-line"};h.Ya=b.program;h.Cd=[f[0]*g,f[1]*g,f[2]*g,f[3]*g];h.nh=b["z-index"]+256;h.Kc=b["click-event"];h.Tb=b["hover-event"];h.Wi=b["enter-event"];
h.vj=b["leave-event"];h.Gg=b.hitable;h.Ah=b.eventInfo;h.Pd=b.state;h.Wd=b.center;h.ca=b.lod;h.Oo=b["line-width"];h.og=b["zbuffer-offset"];h.Xe=!1;h.ta=!0;h.R=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,h.R);d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW);h.R.oa=3;h.R.ia=e.length/3;c.he.push(h);c.v+=4*e.length;c.Yb+=e.length/3;break;case "flat-tline":kb(c,b);break;case "pixel-line":kb(c,b);break;case "pixel-tline":kb(c,b);break;case "line-label":var d=c.s,e=b.vertexBuffer,f=b.texcoordsBuffer,g=b.color,
h=1/255,k={U:"line-label"};k.Ya=b.program;k.Cd=[g[0]*h,g[1]*h,g[2]*h,g[3]*h];k.nh=b["z-index"]+256;k.Kc=b["click-event"];k.Tb=b["hover-event"];k.Wi=b["enter-event"];k.vj=b["leave-event"];k.Gg=b.hitable;k.Ah=b.eventInfo;k.Pd=b.state;k.Wd=b.center;k.ca=b.lod;k.og=b["zbuffer-offset"];k.Xe=!1;k.ta=!0;k.R=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,k.R);d.bufferData(d.ARRAY_BUFFER,e,d.STATIC_DRAW);k.R.oa=4;k.R.ia=e.length/4;k.Lb=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,k.Lb);d.bufferData(d.ARRAY_BUFFER,
f,d.STATIC_DRAW);k.Lb.oa=4;k.Lb.ia=f.length/4;c.he.push(k);c.v+=4*e.length+4*f.length;c.Yb+=e.length/4;break;case "icon":qb(c,b);break;case "label":qb(c,b,!0);break;case "optimize":c.Ov(b)}this.m.cb+=performance.now()-a}}else D(this.c),this.c.Ld.push(this.hi.bind(this,a,b,!0));break;case "endGroup":c?this.rg&&(this.v+=this.rg.size()):(D(this.c),this.c.Ld.push(this.hi.bind(this,a,b,!0)));break;case "allProcessed":D(this.c);this.mb=jd(this.c.Sb,this.Jo.bind(this,!0),this.v);this.m.Bg+=this.v;this.m.dd[0][0]++;
this.m.dd[0][1]+=this.v;this.Qb.Hn=!1;this.ta=!0;break;case "ready":D(this.c)}};m.W=function(a,b,c){if(this.T)return!1;var d=this.c.m.vb>=this.c.Pe;a=a||d;!this.ta&&!a&&this.Ka.W(a,b,c)&&this.Qb.W()&&(this.Ol=!1,this.Qb.Vh=this.hi.bind(this),Oa(this.Qb,"processGeodata",this.Ka.Ka,this.K),this.Qb.Hn=!0);!a&&this.mb&&id(this.c.Sb,this.mb);return this.ta};m.zg=function(a,b,c){null==c&&(c=r.i.create(),r.i.multiply(r.qc(a.P[0]-b[0],a.P[1]-b[1],a.P[2]-b[2]),r.af(1,1,1),c));return c};
m.Xa=function(a){if(this.ta){for(var b=this.l,c=0,d=this.Cg.length;c<d;c++){var e=this.Cg[c],f=r.i.create(),g=r.i.create();r.i.multiply(Nb(b.G),this.zg(e.A,a),g);var h=Mb(b.G);r.i.multiply(h,g,f);e.Xa(g,f);this.m.mf+=e.Yb;this.m.xh+=e.he.length}this.oi!=this.m.Xc&&(this.oi=this.m.Xc,this.m.vb+=this.v)}return this.ta};m.size=function(){return this.v};
function Ed(a,b,c){this.c=a;this.m=a.m;this.la=b;this.K=c;this.A=new jb;this.Ge=this.gc=this.v=0;this.mb=this.fa=null;this.L=0;this.Ua=null;this.xa=0;this.Ls=r.i.create();this.Ks=r.i.create();this.sb=[];this.Nc=[];this.cn=!1}m=Ed.prototype;m.C=function(){this.A=null;this.Nl();this.Ko()};m.Nl=function(a){for(var b=0,c=this.sb.length;b<c;b++)this.sb[b].C();this.cn=!0;1!=a&&this.fa&&this.c.Jb.remove(this.fa);0==this.Nc.length&&(this.L=0);this.fa=null};
m.Ko=function(a){for(var b=0,c=0,d=this.Nc.length;c<d;c++)this.Nc[c].C(),b+=this.Nc[c].v;0<d&&(this.m.Dg-=b,this.m.ed[1][0]++,this.m.ed[1][1]+=b);this.Nc=[];1!=a&&this.mb&&this.c.Sb.remove(this.mb);this.cn&&(this.L=0);this.mb=null};
m.W=function(a,b,c){var d=this.c.m.vb>=this.c.Pe;a=a||d;"https://cdn.melown.com/mario/proxy/melown2015/surface/melown/cz10/12-1107-688.bin?0"==this.la&&(this.la=this.la);if(2==this.L){this.fa&&id(this.c.Jb,this.fa);if(c)return!0;if(0==this.Nc.length){if(this.c.m.vb>=this.c.Pe)return!1;if(this.m.cb>this.c.h.$h)return D(this.c),!1;if(d)return!1;b=performance.now();c=0;this.Nc=Array(this.sb.length);for(var d=0,e=this.sb.length;d<e;d++)this.Nc[d]=je(this.sb[d]),c+=this.Nc[d].v;this.m.Dg+=c;this.m.ed[0][0]++;
this.m.ed[0][1]+=c;this.mb=jd(this.c.Sb,this.Ko.bind(this,!0),c);this.m.cb+=performance.now()-b}!a&&this.mb&&id(this.c.Sb,this.mb);return!0}0==this.L?a||this.Cb(b):3==this.L&&this.xa<=this.c.h.Pc&&performance.now()>this.Ua+this.c.h.Qc&&this.Cb(b);return!1};m.Cb=function(a){this.la||(this.la=Sc(this.c,this.K.Da.Nj,{ca:this.K.f[0],qb:this.K.f[1],rb:this.K.f[2]}));this.c.xc.load(this.la,this.qd.bind(this),a,this.K,"mesh")};
m.qd=function(a,b,c){this.Rc=b;this.ld=c;r.hd(a,this.zb.bind(this),this.nc.bind(this),r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb);this.L=1};m.nc=function(){1!=this.c.T&&(this.L=3,this.Ua=performance.now(),this.xa++,this.xa<=this.c.h.Pc&&setTimeout(function(){this.c.T||D(this.c)}.bind(this),this.c.h.Qc),this.ld())};
m.zb=function(a,b){if(1!=this.c.T)if(b){this.gc=a.byteLength;var c={Aa:new DataView(a),Qq:a,g:0},d=performance.now();this.Nl();var e=c.Aa,f;f=""+String.fromCharCode(e.getUint8(c.g,!0));c.g+=1;f+=String.fromCharCode(e.getUint8(c.g,!0));c.g+=1;if("ME"==f&&(this.wa=e.getUint16(c.g,!0),c.g+=2,!(3<this.wa))){c.tq=new Uint8Array(c.Qq);e.getFloat64(c.g,!0);c.g+=8;this.jp=e.getUint16(c.g,!0);c.g+=2;this.sb=[];e=0;for(f=this.jp;e<f;e++){var g=new ke(this,c);g.Ae&&(this.sb.push(g),this.v+=this.sb[e].v,this.Ge+=
this.sb[e].Ge)}this.jp=this.sb.length}this.c.m.cb+=performance.now()-d;this.cn=!1;this.fa=jd(this.c.Jb,this.Nl.bind(this,!0),this.v);D(this.c);this.L=2;this.Ua=null;this.xa=0;this.Rc()}else D(this.c),this.c.Ld.push(this.zb.bind(this,a,!0))};m.size=function(){return this.v};m.fileSize=function(){return this.gc};
function Bd(a,b,c,d,e,f){null!=a.Nc[c]||null==a.sb[c]||a.sb[c].T||(a.Nc[c]=je(a.sb[c]));var g=a.sb[c];if(c=a.Nc[c]){var h=a.c.l,k=null,l=null,n=null,p=null,v=a.c.vg,u=0!=v?["aPosition","aBarycentric"]:["aPosition"];if("depth"==e)k=h.tp;else if("flat"==e)k=h.up;else if(0<v)switch(v){case 2:k=h.wp;break;case 3:k=h.up;break;case 1:switch(e){case "internal":case "internal-nofog":k=h.xp;n="aTexCoord";u.push("aTexCoord");break;case "external":case "external-nofog":k=h.Ut;p="aTexCoord2";u.push("aTexCoord2");
break;case "fog":return}}else switch(e){case "internal":case "internal-nofog":k=h.Fm;n="aTexCoord";u.push("aTexCoord");break;case "external":case "external-nofog":k=h.St;d&&(l=le(d))&&(k=h.Tt);p="aTexCoord2";u.push("aTexCoord2");break;case "fog":k=h.Gt}h.j.useProgram(k,u,l);if(d)if(u=d.Gh())d.oi!=a.m.Xc&&(d.oi=a.m.Xc,a.m.vb+=u.v),h.j.bindTexture(u),l&&h.j.bindTexture(l,1);else return;else if("fog"!=e&&"depth"!=e&&"flat"!=e)return;l=a.Ls;r.i.multiply(Nb(h.G),g.zg(b,a.Ks),l);b=Mb(h.G);ya(k,"uMV",l);
ya(k,"uProj",b);if(0==v)switch(e){case "internal":case "fog":rb(k,"uParams",[a.c.ng,a.c.rf,0,0]);break;case "internal-nofog":rb(k,"uParams",[a.c.ng,0,0,0]);break;case "external":Eb(k,"uAlpha",1);rb(k,"uParams",[a.c.ng,a.c.rf,0,0]);rb(k,"uTransform",d.J?d.J.N?d.J.sq:null:[1,1,0,0]);break;case "external-nofog":Eb(k,"uAlpha",f),rb(k,"uParams",[a.c.ng,0,0,0]),rb(k,"uTransform",d.J?d.J.N?d.J.sq:null:[1,1,0,0])}g.oi!=a.m.Xc&&(g.oi=a.m.Xc,a.m.vb+=c.v);c.Xa(k,"aPosition",n,p,0!=v?"aBarycentric":null);a.m.mf+=
a.Ge;a.m.xh++}}MelownMetanodeFlags_GeometryPresent=1;MelownMetanodeFlags_NavtilePresent=3;MelownMetanodeFlags_InternalTexturePresent=7;MelownMetanodeFlags_CoarsenessControl=15;MelownMetanodeFlags_ChildShift=3;r.Cq=new Uint8Array(1024);
function me(a,b,c,d){this.$a=a;this.c=a.c;this.f=b;this.I=[];this.Mh=this.ta=this.ph=!1;this.Pb=d;this.jf=Array(3);this.wh=1;this.Mc=Array(3);this.sg=this.Oi=1;this.Ra=Array(24);if(c){a=c.Aa;b=this.$a.wa;this.O=a.getUint8(c.g,!0);c.g+=1;if(5>b){d=r.Cq;for(var e=0,f=6*(this.f[0]+2)+7>>3;e<f;e++)d[e]=a.getUint8(c.g,!0),c.g+=1;for(var f=this.f[0]+2,g=[0,0,0],h=[0,0,0],k=0,l=this.c.xu,n=this.c.wu,e=0;3>e;e++)g[e]=ne(d,f,k)*l[e]+n[e],k+=f,h[e]=ne(d,f,k)*l[e]+n[e],k+=f;e=k=0;for(f=d.length;e<f;e++)k+=d[e];
0==k&&(g[0]=Number.POSITIVE_INFINITY,g[1]=Number.POSITIVE_INFINITY,g[2]=Number.POSITIVE_INFINITY,h[0]=Number.NEGATIVE_INFINITY,h[1]=Number.NEGATIVE_INFINITY,h[2]=Number.NEGATIVE_INFINITY);this.A=new jb(g[0],g[1],g[2],h[0],h[1],h[2])}4<=b&&(this.Re=a.getFloat32(c.g,!0),c.g+=4,this.Qe=a.getFloat32(c.g,!0),c.g+=4,a.getFloat32(c.g,!0),c.g+=4);this.oj=a.getUint8(c.g,!0);c.g+=1;this.Tg=r.gr(a.getUint16(c.g,!0));c.g+=2;a.getUint16(c.g,!0);c.g+=2;this.kf=1024;0==(this.O&4)&&(this.Tg=Number.POSITIVE_INFINITY);
0==(this.O&8)&&(this.kf=256);this.re=a.getInt16(c.g,!0);c.g+=2;this.Jd=a.getInt16(c.g,!0);c.g+=2;4>b&&(this.Re=this.re,this.Qe=this.Jd);3<=this.$a.wa&&(this.$a.O&128?(this.Rp=a.getUint16(c.g,!0),c.g+=2):this.$a.O&64&&(this.Rp=a.getUint8(c.g,!0),c.g+=1));this.Mh=0!=(this.O&2);this.ph=!1;oe(this)}}me.prototype.C=function(){};function ne(a,b,c){for(var d=0,e=0;e<b;e++)a[c>>3]&1<<7-(c&7)&&(d|=1<<b-e-1),c++;return d/((1<<b)-1)}
me.prototype.clone=function(){var a=new me(this.$a,this.f);a.O=this.O;a.re=this.re;a.Jd=this.Jd;a.Re=this.Re;a.Qe=this.Qe;a.oj=this.oj;a.Tg=this.Tg;a.kf=this.kf;a.ta=this.ta;a.zu=this.zu;a.Mh=this.Mh;a.I=Array(this.I.length);for(var b=0,c=this.I.length;b<c;b++)a.I[b]=this.I[b];this.A&&(a.A=this.A.clone());a.jf=this.jf;a.Mc=this.Mc;a.Oi=this.Oi;a.sg=this.sg;a.wh=this.wh;a.Ra=this.Ra;a.Pb=this.Pb;this.qp&&(a.qp=this.qp.slice());return a};
function oe(a,b){a.ta=!0;var c=a.c,d=c.Dh,e=a.$a.df;if(!(a.f[0]<c.Pj||!d&&4>e)&&(c.h.hm||4<=e)&&!b){var f=c.Vu;if(a.f[0]>c.lm){var g=c.Wu,h;h=a.c;var k=a.f,l=k[0]-h.lm;h=h.bb.fp[""+h.lm+"."+(k[1]>>l)+"."+(k[2]>>l)];var n=a.f,p=n[0]-h.f[0],v=1/Math.pow(2,p),k=h.S.ea,l=h.S.Z,u=(k[0]-l[0])*v,v=(l[1]-k[1])*v,q=n[1]-(h.f[1]<<p),n=n[2]-(h.f[2]<<p);g[0]=h;g[1]=l[0]+u*q;g[2]=k[1]+v*n;g[3]=l[0]+u*(q+1);g[4]=k[1]+v*(n+1);k=g[1];l=g[2];u=g[3];g=g[4]}else g=Rd(a.c,a.f),h=g[0],k=g[1][0][0],l=g[1][0][1],u=g[1][1][0],
g=g[1][1][1];a.Pb=h;p=a.Re;f[0]=.5*(u+k);f[1]=.5*(g+l);f[2]=p;pe(h,f,a.jf,0);d?(a.wh=r.D.length(a.jf),r.D.normalize(a.jf,a.Mc)):(a.Mc[0]=0,a.Mc[1]=0,a.Mc[2]=1);v=a.Mc;f[0]=u;f[1]=g;f[2]=p;n=a.Ra;pe(h,f,n,0);f[1]=l;pe(h,f,n,3);f[0]=k;pe(h,f,n,6);f[1]=g;pe(h,f,n,9);if(d){q=r.D.lf;if(c.h.Mg||4<=e)if(d=a.Qe-p,3>=a.f[0]){var z=r.D.hp;z(n,0,f);e=q(v,f);z(n,3,f);var x=q(v,f);z(n,6,f);var w=q(v,f);z(n,9,f);v=q(v,f);e=Math.min(e,x,w,v);f[0]=.5*(u+k);f[1]=g;f[2]=p;pe(h,f,n,12);f[1]=l;pe(h,f,n,15);f[0]=u;f[1]=
.5*(g+l);pe(h,f,n,18);f[0]=k;pe(h,f,n,21);x=a.jf;c=Math.max(n[0],n[3],n[6],n[9],n[12],n[15],n[18],n[21],x[0]);d=Math.min(n[0],n[3],n[6],n[9],n[12],n[15],n[18],n[21],x[0]);p=Math.max(n[1],n[4],n[7],n[10],n[13],n[16],n[19],n[22],x[1]);v=Math.min(n[1],n[4],n[7],n[10],n[13],n[16],n[19],n[22],x[1]);q=Math.max(n[2],n[5],n[8],n[11],n[14],n[17],n[20],n[23],x[2]);x=Math.min(n[2],n[5],n[8],n[11],n[14],n[17],n[20],n[23],x[2]);1>=a.f[0]&&(f[0]=u+.25*(k-u),f[1]=.5*(g+l),pe(h,f,n,12),f[0]=u+.75*(k-u),pe(h,f,n,
15),f[0]=.5*(u+k),f[1]=g+.25*(l-g),pe(h,f,n,18),f[1]=g+.75*(l-g),pe(h,f,n,21),c=Math.max(c,n[12],n[15],n[18],n[21]),d=Math.min(d,n[12],n[15],n[18],n[21]),p=Math.max(p,n[13],n[16],n[19],n[22]),v=Math.min(v,n[13],n[16],n[19],n[22]),q=Math.max(q,n[14],n[17],n[20],n[23]),x=Math.min(x,n[14],n[17],n[20],n[23]));n[0]=d;n[1]=v;n[2]=x;n[3]=c;n[4]=v;n[5]=x;n[6]=c;n[7]=p;n[8]=x;n[9]=d;n[10]=p;n[11]=x;n[12]=d;n[13]=v;n[14]=q;n[15]=c;n[16]=v;n[17]=q;n[18]=c;n[19]=p;n[20]=q;n[21]=d;n[22]=p;n[23]=q}else z=r.D.Xs,
q=r.D.Jk,z(n,0,n,12),e=q(v,n,12),z(n,3,n,15),x=q(v,n,15),z(n,6,n,18),w=q(v,n,18),z(n,9,n,21),v=q(v,n,21),e=Math.min(e,x,w,v),d+=c.rp-c.rp*e,n[12]=n[0]+n[12]*d,n[13]=n[1]+n[13]*d,n[14]=n[2]+n[14]*d,n[15]=n[3]+n[15]*d,n[16]=n[4]+n[16]*d,n[17]=n[5]+n[17]*d,n[18]=n[6]+n[18]*d,n[19]=n[7]+n[19]*d,n[20]=n[8]+n[20]*d,n[21]=n[9]+n[21]*d,n[22]=n[10]+n[22]*d,n[23]=n[11]+n[23]*d;else z=r.D.hp,z(n,0,f),e=q(v,f),z(n,3,f),x=q(v,f),z(n,6,f),w=q(v,f),z(n,9,f),v=q(v,f),e=Math.min(e,x,w,v);a.Oi=Math.cos(Math.max(0,
.5*Math.PI-Math.acos(e)));a.sg=e}else d=a.Qe-p,n[12]=n[0],n[13]=n[1],n[14]=n[2]+d,n[15]=n[3],n[16]=n[4],n[17]=n[5]+d,n[18]=n[6],n[19]=n[7],n[20]=n[8]+d,n[21]=n[9],n[22]=n[10],n[23]=n[11]+d}}
me.prototype.zg=function(a,b){var c=b;null!=c?(c[0]=Sb(this.A,0),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=Sb(this.A,1),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=Sb(this.A,2),c[11]=0,c[12]=this.A.P[0]-a[0],c[13]=this.A.P[1]-a[1],c[14]=this.A.P[2]-a[2],c[15]=1):(c=r.i.create(),r.i.multiply(r.qc(this.A.P[0]-a[0],this.A.P[1]-a[1],this.A.P[2]-a[2]),r.af(Sb(this.A,0),Sb(this.A,1),Sb(this.A,2)),c));return c};
me.prototype.ug=function(a){if(4<=this.$a.df){var b=this.Ra;a=this.c.Mq;for(var c=this.c.ba,d=this.c.l,e=d.Ft,f=0;24>f;f+=3)a[f]=b[f]-c[0],a[f+1]=b[f+1]-c[1],a[f+2]=b[f+2]-c[2];d.j.useProgram(e,["aPosition"]);Fb(e,"uPoints",a);b=pa(d.G);ya(e,"uMVP",b);d.Nq.Xa(e,"aPosition")}else d=this.c.l,d.j.useProgram(d.Ug,["aPosition"]),e=r.i.create(),b=r.i.create(),r.i.multiply(Nb(d.G),this.zg(a),b),a=Mb(d.G),r.i.multiply(a,b,e),ya(d.Ug,"uMVP",e),d.Gi.Xa(d.Ug,"aPosition")};
function hd(a,b,c){this.Gb=a;this.c=a.c;this.F=b;this.f=a.f;this.K=c;this.Ca=[];this.L=this.fc=0;this.Ua=null;this.v=this.xa=0;this.fa=null}m=hd.prototype;m.C=function(a){1!=a&&null!=this.fa&&this.c.zc.remove(this.fa);this.Gb&&Xc(this.Gb,this);this.F=this.L=0;this.fa=null;this.Ca=[]};
m.clone=function(a){a=new hd(this.Gb,a);a.Ca=this.Ca;a.L=this.L;a.Ca=this.Ca;a.v=this.v;a.ca=this.ca;a.pe=this.pe;a.qe=this.qe;a.od=this.od;a.pd=this.pd;a.Ma=this.Ma;a.Ec=this.Ec;a.wa=this.wa;a.I=this.I;2>this.wa?a.fi=this.fi:(a.O=this.O,a.Yc=this.Yc,a.$c=this.$c);a.fa=jd(this.c.zc,a.C.bind(a,!0),a.v);return a};m.W=function(a){if(2==this.L)return!0;0==this.L&&(3==this.L?this.xa<=this.c.h.Pc&&performance.now()>this.Ua+this.c.h.Qc&&this.Cb(a):this.Cb(a));return!1};
m.rn=function(){null!=this.fa&&id(this.c.zc,this.fa)};m.Hh=function(a){var b=a[1]-this.f[1]-this.od;a=a[2]-this.f[2]-this.pd;if(0>b||0>a||b>=this.Ma||a>=this.Ec)return null;var c=this.Ca[this.Ma*a+b];if(!c){var d=this.Ma*a+b,c=new me(this,[this.ca,this.pe+this.od+b,this.qe+this.pd+a],{Aa:this.Aa,g:this.nm+d*this.Va},this.Pb);this.Ca[d]=c;this.pk(b,a);this.qk(b,a)}return c};m.Cb=function(){null==this.la&&(this.la=this.F.aj(this.f));this.c.xc.load(this.la,this.qd.bind(this),null,this.K,"metatile")};
m.qd=function(a,b,c){this.Rc=b;this.ld=c;r.hd(a,this.zb.bind(this),this.nc.bind(this),r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb);this.L=1};m.nc=function(){1!=this.c.T&&(this.L=3,this.Ua=performance.now(),this.xa++,this.xa<=this.c.h.Pc&&setTimeout(function(){this.c.T||D(this.c)}.bind(this),this.c.h.Qc),this.ld())};
m.zb=function(a,b){if(1!=this.c.T)if(b){a=new DataView(a);this.v+=4*a.byteLength;this.Aa=a;var c=performance.now();this.xm({Aa:a,g:0});this.c.m.cb+=performance.now()-c;this.fa=jd(this.c.zc,this.C.bind(this,!0),this.v);D(this.c);this.L=2;this.Ua=null;this.xa=0;this.Rc()}else D(this.c),this.c.Ld.push(this.zb.bind(this,a,!0))};
m.xm=function(a){var b=a.Aa,c;c=""+String.fromCharCode(b.getUint8(a.g,!0));a.g+=1;c+=String.fromCharCode(b.getUint8(a.g,!0));a.g+=1;"MT"==c&&(this.wa=b.getUint16(a.g,!0),a.g+=2,5<this.wa||(this.ca=b.getUint8(a.g,!0),a.g+=1,this.pe=b.getUint32(a.g,!0),a.g+=4,this.qe=b.getUint32(a.g,!0),a.g+=4,this.od=b.getUint16(a.g,!0),a.g+=2,this.pd=b.getUint16(a.g,!0),a.g+=2,this.Ma=b.getUint16(a.g,!0),a.g+=2,this.Ec=b.getUint16(a.g,!0),a.g+=2,this.$c=Array(8),2>this.wa?(this.fi=b.getUint8(a.g,!0),a.g+=1):(this.O=
b.getUint8(a.g,!0),a.g+=1,this.Yc=b.getUint8(a.g,!0),a.g+=1,this.wm(a)),this.ym(a),this.zm(a),this.df=this.c.h.Bj&&5>this.wa?3:this.wa))};m.wm=function(a){for(var b=a.Aa,c=this.Ma*this.Ec+7>>3,d=0;6>d;d++)if(0!=(this.O&1<<d)){for(var e=new Uint8Array(c),f=0;f<c;f++)e[f]=b.getUint8(a.g,!0),a.g+=1;this.$c[d]=e}};
m.ym=function(a){var b=a.Aa;2>this.wa&&(this.Yc=b.getUint8(a.g,!0),a.g+=1,b.getUint16(a.g,!0),a.g+=2);if(0==this.Yc)this.I=[];else{var c=this.Ma*this.Ec+7>>3;this.I=Array(this.Yc);for(var d=0,e=this.I.length;d<e;d++){var f=b.getUint16(a.g,!0);a.g+=2;for(var g=new Uint8Array(c),h=0;h<c;h++)g[h]=b.getUint8(a.g,!0),a.g+=1;f=this.c.Bk[f];this.I[d]={zk:f?f.Io:null,Ak:g}}}};
m.qk=function(a,b){for(var c=0;1>c;c++)if(this.$c[c]){bitplane_=this.$c[c];var d=this.Ma*b+a,e=1<<(d&7),d=d>>3;if(bitplane_[d]&e)switch(c){case 0:this.Ca[b*this.Ma+a].ph=!0}}};m.pk=function(a,b){for(var c=this.Ma*b+a,d=1<<(c&7),c=c>>3,e=0,f=this.I.length;e<f;e++)if(this.I[e].Ak[c]&d){var g=this.I[e].zk;g&&this.Ca[b*this.Ma+a].I.push(g)}};
m.zm=function(a){this.nm=a.g;this.Va=10;5<=this.wa?this.Va+=12:(this.Va+=Math.floor((6*(this.f[0]+2)+7)/8),4==this.wa&&(this.Va+=12));3<=this.wa&&(this.O&128?this.Va+=2:this.O&64&&(this.Va+=1));if(this.ca>=this.c.Pj){if(this.Pb=Rd(this.c,[this.ca,this.pe+this.od,this.qe+this.pd]))this.Pb=this.Pb[0]}else this.Pb=null;this.Ca=Array(this.Ma*this.Ec)};function qe(a,b,c,d,e){this.c=a;this.f=b;this.Xm=Fc(this.c,c);this.S=d;this.kj=e;this.Ll=1==b[0]&&(0==b[1]&&1==b[2]||1==b[1]&&0==b[2])}
function re(a,b,c){return se(a.Xm,b,a.c.bb.Xb.Ve,c)}function pe(a,b,c,d){var e=a.Xm;a=a.c.bb.Xb.Ve;var f=a.td,g=a.we,h=e.Wg[g];h||(h=e.Ib(e.td,f),e.Wg[g]=h);e=h.forward(b);c[d]=e[0];c[d+1]=e[1];c[d+2]=e[2];a.ib&&(c[d+2]-=te(a,b))}
function oc(a,b){this.c=a;this.Ib=a.Ib;this.Ae=!1;this.f=b.id||null;this.Yn=b.description||"";this.fp=[];var c=b.model;if(null!=c&&(this.Xb={Ve:Fc(a,c.physicalSrs),Sj:Fc(a,c.navigationSrs),Gm:Fc(a,c.publicSrs)},this.Rg={},null!=b.parameters&&(c=b.parameters,this.Rg.Oj=c.metaBinaryOrder||1,this.Rg.ep=c.navDelta||8),c=b.division,null!=c)){this.Dd={Sv:c.rootLod||0,nv:c.arity||null,kj:c.heightRange||[0,1]};var d;d=c.extents;d=null==d?{Z:[0,0,0],ea:[1,1,1]}:{Z:d.ll||[0,0,0],ea:d.ur||[1,1,1]};this.Dd.S=
d;a.xu=[d.ea[0]-d.Z[0],d.ea[1]-d.Z[1],d.ea[2]-d.Z[2]];a.wu=d.Z;c=c.nodes;this.Dd.Ca=[];if(null!=c){this.fs=4==c.length;d=0;for(var e=c.length;d<e;d++){var f;var g=c[d],h;f=g.srs;var k;k=g.extents;k=null==k?{Z:[0,0],ea:[1,1]}:{Z:k.ll||[0,0],ea:k.ur||[1,1]};h=g.id;null!=h?(g=h.lod||0,h=h.position||[0,0],f=new qe(this.c,[g,h[0],h[1]],f,k,this.kj)):f=void 0;this.fp[""+f.f[0]+"."+f.f[1]+"."+f.f[2]]=f;this.Dd.Ca.push(f)}this.Ae=!0}}}
oc.prototype.ub=function(){return{id:this.f,physicalSrs:this.Xb.Ve.f,navigationSrs:this.Xb.Sj.f,publicSrs:this.Xb.Gm.f}};oc.prototype.pb=function(a,b,c){var d,e;switch(b){case "public":d=this.Xb.Gm;break;case "physical":d=this.Xb.Ve;break;case "navigation":d=this.Xb.Sj}switch(c){case "public":e=this.Xb.Gm;break;case "physical":e=this.Xb.Ve;break;case "navigation":e=this.Xb.Sj}return se(d,a,e)};m=ec.prototype;m.Ei=function(a,b,c){this.Bb.push({id:a,Jn:b,Ba:c})};
m.pm=function(a,b){var c=Kc(this.Bb,"after-map-render"==a?"map":a),d=Kc(this.Bb,b);-1!=c&&-1!=d&&this.Bb.splice(d,0,this.Bb.splice(c,1)[0])};m.om=function(a,b){var c=Kc(this.Bb,"after-map-render"==a?"map":a),d=Kc(this.Bb,b);-1!=c&&-1!=d&&(d++,this.Bb.splice(d,0,this.Bb.splice(c,1)[0]))};m.Jm=function(a){a=Kc(this.Bb,a);-1!=a&&this.Bb.splice(a,1)};m.Um=function(a,b){var c=Kc(this.Bb,a);-1!=c&&(this.Bb[c].Ba=b)};m.nl=function(){var a=Kc(this.Bb,id2_);return-1!=a?this.Bb[a].Ba:!1};
function Mc(a){1!=a.Eb&&db(a.l.j);for(var b=0,c=a.Bb.length;b<c;b++){var d=a.Bb[b];d.Ba&&d.Jn&&d.Jn(a.mr[a.Eb])}}hd=function(a,b,c){this.Gb=a;this.c=a.c;this.F=b;this.f=a.f;this.K=c;this.Ca=[];this.L=this.fc=0;this.Ua=null;this.v=this.xa=0;this.fa=null};m=hd.prototype;m.C=function(a){1!=a&&null!=this.fa&&this.c.zc.remove(this.fa);this.Gb&&Xc(this.Gb,this);this.F=this.L=0;this.fa=null;this.Ca=[]};
m.clone=function(a){a=new hd(this.Gb,a);a.Ca=this.Ca;a.L=this.L;a.Ca=this.Ca;a.v=this.v;a.ca=this.ca;a.pe=this.pe;a.qe=this.qe;a.od=this.od;a.pd=this.pd;a.Ma=this.Ma;a.Ec=this.Ec;a.wa=this.wa;a.I=this.I;2>this.wa?a.fi=this.fi:(a.O=this.O,a.Yc=this.Yc,a.$c=this.$c);a.fa=jd(this.c.zc,a.C.bind(a,!0),a.v);return a};m.W=function(a){if(2==this.L)return!0;0==this.L&&(3==this.L?this.xa<=this.c.h.Pc&&performance.now()>this.Ua+this.c.h.Qc&&this.Cb(a):this.Cb(a));return!1};
m.rn=function(){null!=this.fa&&id(this.c.zc,this.fa)};m.Hh=function(a){var b=a[1]-this.f[1]-this.od;a=a[2]-this.f[2]-this.pd;if(0>b||0>a||b>=this.Ma||a>=this.Ec)return null;var c=this.Ca[this.Ma*a+b];if(!c){var d=this.Ma*a+b,c=new me(this,[this.ca,this.pe+this.od+b,this.qe+this.pd+a],{Aa:this.Aa,g:this.nm+d*this.Va},this.Pb);this.Ca[d]=c;this.pk(b,a);this.qk(b,a)}return c};m.Cb=function(){null==this.la&&(this.la=this.F.aj(this.f));this.c.xc.load(this.la,this.qd.bind(this),null,this.K,"metatile")};
m.qd=function(a,b,c){this.Rc=b;this.ld=c;r.hd(a,this.zb.bind(this),this.nc.bind(this),r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb);this.L=1};m.nc=function(){1!=this.c.T&&(this.L=3,this.Ua=performance.now(),this.xa++,this.xa<=this.c.h.Pc&&setTimeout(function(){this.c.T||D(this.c)}.bind(this),this.c.h.Qc),this.ld())};
m.zb=function(a,b){if(1!=this.c.T)if(b){a=new DataView(a);this.v+=4*a.byteLength;this.Aa=a;var c=performance.now();this.xm({Aa:a,g:0});this.c.m.cb+=performance.now()-c;this.fa=jd(this.c.zc,this.C.bind(this,!0),this.v);D(this.c);this.L=2;this.Ua=null;this.xa=0;this.Rc()}else D(this.c),this.c.Ld.push(this.zb.bind(this,a,!0))};
m.xm=function(a){var b=a.Aa,c;c=""+String.fromCharCode(b.getUint8(a.g,!0));a.g+=1;c+=String.fromCharCode(b.getUint8(a.g,!0));a.g+=1;"MT"==c&&(this.wa=b.getUint16(a.g,!0),a.g+=2,5<this.wa||(this.ca=b.getUint8(a.g,!0),a.g+=1,this.pe=b.getUint32(a.g,!0),a.g+=4,this.qe=b.getUint32(a.g,!0),a.g+=4,this.od=b.getUint16(a.g,!0),a.g+=2,this.pd=b.getUint16(a.g,!0),a.g+=2,this.Ma=b.getUint16(a.g,!0),a.g+=2,this.Ec=b.getUint16(a.g,!0),a.g+=2,this.$c=Array(8),2>this.wa?(this.fi=b.getUint8(a.g,!0),a.g+=1):(this.O=
b.getUint8(a.g,!0),a.g+=1,this.Yc=b.getUint8(a.g,!0),a.g+=1,this.wm(a)),this.ym(a),this.zm(a),this.df=this.c.h.Bj&&5>this.wa?3:this.wa))};m.wm=function(a){for(var b=a.Aa,c=this.Ma*this.Ec+7>>3,d=0;6>d;d++)if(0!=(this.O&1<<d)){for(var e=new Uint8Array(c),f=0;f<c;f++)e[f]=b.getUint8(a.g,!0),a.g+=1;this.$c[d]=e}};
m.ym=function(a){var b=a.Aa;2>this.wa&&(this.Yc=b.getUint8(a.g,!0),a.g+=1,b.getUint16(a.g,!0),a.g+=2);if(0==this.Yc)this.I=[];else{var c=this.Ma*this.Ec+7>>3;this.I=Array(this.Yc);for(var d=0,e=this.I.length;d<e;d++){var f=b.getUint16(a.g,!0);a.g+=2;for(var g=new Uint8Array(c),h=0;h<c;h++)g[h]=b.getUint8(a.g,!0),a.g+=1;f=this.c.Bk[f];this.I[d]={zk:f?f.Io:null,Ak:g}}}};
m.qk=function(a,b){for(var c=0;1>c;c++)if(this.$c[c]){bitplane_=this.$c[c];var d=this.Ma*b+a,e=1<<(d&7),d=d>>3;if(bitplane_[d]&e)switch(c){case 0:this.Ca[b*this.Ma+a].ph=!0}}};m.pk=function(a,b){for(var c=this.Ma*b+a,d=1<<(c&7),c=c>>3,e=0,f=this.I.length;e<f;e++)if(this.I[e].Ak[c]&d){var g=this.I[e].zk;g&&this.Ca[b*this.Ma+a].I.push(g)}};
m.zm=function(a){this.nm=a.g;this.Va=10;5<=this.wa?this.Va+=12:(this.Va+=Math.floor((6*(this.f[0]+2)+7)/8),4==this.wa&&(this.Va+=12));3<=this.wa&&(this.O&128?this.Va+=2:this.O&64&&(this.Va+=1));if(this.ca>=this.c.Pj){if(this.Pb=Rd(this.c,[this.ca,this.pe+this.od,this.qe+this.pd]))this.Pb=this.Pb[0]}else this.Pb=null;this.Ca=Array(this.Ma*this.Ec)};
function nc(a,b,c){this.c=a;this.f=b;this.Ib=a.Ib;this.Zq=c.comment||null;this.we=c.srsDef||null;this.Vp=c.srsModifiers||[];this.U=c.type||"projected";this.dv=c.vdatum||"orthometric";this.we=c.srsDefEllps||this.we;a=c.periodicity;this.nt=null==a?null:{type:a.type||"",period:a.period||0};this.Wm=this.Ib(this.we).info();this.He=this.ib=null;this.td=this.Ib(this.we,null,null,!0);this.uj=null;this.Wg={};c.geoidGrid&&(c=c.geoidGrid,this.ib={Wn:c.definition||null,Up:c.srsDefEllps||null,un:c.valueRange||
[0,1]},this.ib.S=c.extents?{Z:c.extents.ll,ea:c.extents.ur}:{Z:[0,0],ea:[1,1]},this.ib.Wn&&(c=Sc(this.c,this.ib.Wn,{},null),this.He=new Wc(this.c,c,!0)),this.ib.Up&&(this.ib.td=this.Ib(this.ib.Up,null,null,!0)))}nc.prototype.ub=function(){return{comment:this.Zq,srsDef:this.we,srsModifiers:this.Vp,type:this.U,vdatum:this.dv,srsDefEllps:this.we,a:this.Wm.a,b:this.Wm.b}};nc.prototype.Hd=function(){return this.Wm};nc.prototype.W=function(){return null==this.ib||null!=this.He&&this.He.W()};
function Sa(a){return"projected"==a.U}function ue(a,b){var c=b[2]||0,c=c/ve(a,b);return c-=te(a,b)}function we(a,b){var c=b[2]||0,c=c+te(a,b);return c*=ve(a,b)}
function te(a,b){if(null!=a.He&&(null==a.ib||null!=a.He&&a.He.W())){mapCoords_=a.Ib(a.td,a.ib.td,[b[0],b[1]]);var c=mapCoords_[0]-a.ib.S.Z[0],d=a.ib.S.ea[1]-mapCoords_[1],e=a.He.kd.mj,c=e[0]/(a.ib.S.ea[0]-a.ib.S.Z[0])*c,d=e[1]/(a.ib.S.ea[1]-a.ib.S.Z[1])*d,c=r.Ee(c,0,e[0]-2),d=r.Ee(d,0,e[1]-2),f=Math.floor(c),g=Math.floor(d),c=c-f,d=d-g,h=a.He.getImageData(),g=g*e[0],e=g+e[0],k=h[4*(g+f)],l=h[4*(e+f)],g=k+(h[4*(g+f+1)]-k)*c,f=g+(l+(h[4*(e+f+1)]-l)*c-g)*d;return f=a.ib.un[0]+(a.ib.un[1]-a.ib.un[0])/
255*f}return 0}function ve(a,b){if(-1!=a.Vp.indexOf("adjustVertical")){var c=a.Hd(),d="+proj=longlat  +alpha=0 +gamma=0 +a="+c.a+" +b="+c.b+" +x_0=0 +y_0=0";a.uj||(a.uj=a.Ib(d,null,null,!0));d=a.Ib(a.td,a.uj,[b[0],b[1]]);c=(new GeographicLib.Geodesic.Geodesic(c.a,c.a/c.b-1)).Direct(d[1],d[0],90,1E3);d=[c.Fv,c.Bv];d=a.Ib(a.uj,a.td,d);c=d[0]-b[0];d=d[1]-b[1];return Math.sqrt(c*c+d*d)/1E3}return 1}
function se(a,b,c,d){a.W();if("string"!==typeof c){if(c.f==a.f)return b.slice();c.W()}b=b.slice();var e="string"===typeof c;b[2]=ue(a,b);var f=e?c:c.td,g=e?c:c.we,h=a.Wg[g];h||(h=a.Ib(a.td,f),a.Wg[g]=h);a=h.forward(b);!d&&e&&(a[2]=we(c,a));return a}
function Id(a,b,c){a.W();if("string"!==typeof c){if(c.f==a.f)return b.slice();c.W()}b=b.slice();"string"!==typeof c&&(b[2]=ue(c,b));var d="string"===typeof c?c:c.td;c="string"===typeof c?c:c.we;var e=a.Wg[c];e||(e=a.Ib(a.td,d),a.Wg[c]=e);b=e.inverse(b);b[2]=we(a,b);return b}
function lc(a){this.c=a;this.u=a.u;this.ge=a.u.ge;this.Lo=this.cb=this.Bp=this.Zg=this.Lm=this.no=this.mo=this.Wp=this.Xc=this.ii=this.ji=this.vi=this.xh=this.mf=this.Vi=this.Yd=0;this.Tf=Array(32);this.ki=!1;this.Jh=0;this.jb=900;this.Hl=Array(this.jb);this.tl=Array(this.jb);this.sl=Array(this.jb);this.ul=Array(this.jb);this.yl=Array(this.jb);this.ql=Array(this.jb);this.rl=Array(this.jb);this.Cl=Array(this.jb);this.Al=Array(this.jb);this.zl=Array(this.jb);this.Bl=Array(this.jb);this.Fl=Array(this.jb);
this.Dl=Array(this.jb);this.pl=Array(this.jb);this.xl=Array(this.jb);this.wl=Array(this.jb);this.vl=Array(this.jb);this.fd=[[0,0],[0,0]];this.ed=[[0,0],[0,0]];this.dd=[[0,0],[0,0]];Wa(this);this.Bo=this.Co=this.jj=this.ij=this.Kh=this.Wh=this.wj=this.Wl=this.Xl=this.vb=this.$o=this.Fp=this.xo=this.Bg=this.Eg=this.Dg=0}
function Wa(a){for(var b=a.Jh=0;b<a.jb;b++)a.Hl[b]=0,a.tl[b]=0,a.sl[b]=0,a.ul[b]=0,a.yl[b]=0,a.rl[b]=0,a.ql[b]=0,a.Cl[b]=0,a.Al[b]=0,a.zl[b]=0,a.Bl[b]=0,a.Fl[b]=0,a.Dl[b]=[0,[]],a.pl[b]=0,a.xl[b]=[[0,0],[0,0]],a.wl[b]=[[0,0],[0,0]],a.vl[b]=[[0,0],[0,0]]}
lc.prototype.end=function(a){var b=performance.now(),c=b-this.Bp,d=b-this.no;this.no=b;a?(this.Zg+=c,this.Lo=c):this.Zg+=this.Lo;this.ki&&(a=this.Jh,this.Hl[a]=c,this.tl[a]=0,this.sl[a]=0,this.ul[a]=0,this.yl[a]=d,this.rl[a]=this.c.Jb.Gc,this.ql[a]=this.c.zc.Gc,this.Cl[a]=this.Eg,this.Al[a]=this.Dg,this.zl[a]=this.Bg,this.Bl[a]=this.vb,this.Fl[a]=this.mf,this.xl[a]=[[this.fd[0][0],this.fd[0][1]],[this.fd[1][0],this.fd[1][1]]],this.wl[a]=[[this.ed[0][0],this.ed[0][1]],[this.ed[1][0],this.ed[1][1]]],
this.vl[a]=[[this.dd[0][0],this.dd[0][1]],[this.dd[1][0],this.dd[1][1]]],this.Dl[a]=[this.Yd,this.Tf.slice()],this.pl[a]=this.cb,this.Jh=(this.Jh+1)%this.jb,Va(this.ge,this));if(0==this.Wp%50&&(this.Lm=this.Zg/100,this.mo=1E3/this.Lm,this.Zg=0,null!=this.ge&&(this.xo=this.c.Sb.Gc,this.Fp=this.c.Jb.Gc,this.$o=this.c.zc.Gc,c=this.ge,c.Xp))){d="FPS: "+Math.round(this.mo)+"<br/>Render time: "+Math.round(1E3*this.Lm)+"<br/> - resources: "+Math.round(this.vb/1048576)+"MB<br/>GPU Cache: "+Math.round(this.xo/
1048576)+"MB<br/> - textures: "+Math.round(this.Eg/1048576)+"MB<br/> - meshes: "+Math.round(this.Dg/1048576)+"MB<br/> - geodata: "+Math.round(this.Bg/1048576)+"MB<br/>CPU Cache: "+Math.round(this.Fp/1048576)+"MB<br/>Metaile Cache: "+Math.round(this.$o/1048576)+"MB<br/>Draw calls: "+this.xh+"<br/>Polygons: "+this.mf+"<br/><br/>Terrain Height: "+this.Co.toFixed(2)+"<br/>- float: "+this.Bo.toFixed(2)+"<br/>- desired lod: "+this.ij.toFixed(2)+"<br/>- used lod: "+this.jj.toFixed(2)+"<br/>- used source: "+
(2==this.Kh?"navtile":1==this.Kh?"node":"---")+"<br/>Terrain Radar Lod: "+c.Md+"<br/><br/>Loaded/Errors: "+this.Xl+" / "+this.Wl+"<br/>Load time: "+(.001*(this.Wh-this.wj)).toFixed(2)+"s <br/>";a="Metatiles: "+this.ii+"<br/>Metanodes: "+this.ji+" / "+this.vi+"<br/>GeodataTiles: "+this.Vi+"<br/><br/>Tiles: "+this.Yd+"<br/>";for(var b=0,e=this.Tf.length;b<e;b++)this.Tf[b]&&(a+="LOD "+b+": "+this.Tf[b]+"<br/>");c.Xp.innerHTML="<table style='width:305px'><tr><td>"+d+"</td><td>"+a+"</td></tr></table>";
d=c.u.ma();null!=d&&(d=d.uc(),a=""+(d.o[0]+","),b=Oc(d),a+=b[0]+","+b[1]+","+d.o[3]+","+b[2].toFixed(2)+",",b=d.Rb(),a+=b[0].toFixed(2)+","+b[1].toFixed(2)+","+b[2].toFixed(2)+",",a+=d.o[8].toFixed(2)+","+d.bd().toFixed(2),c.Yp.value!=a&&(c.Yp.value=a))}this.fd=[[0,0],[0,0]];this.ed=[[0,0],[0,0]];this.dd=[[0,0],[0,0]]};MelownSubmeshFlags_InternalTexcoords=1;MelownSubmeshFlags_ExternalTexcoords=2;MelownSubmeshFlags_PerVertexUndulation=4;MelownSubmeshFlags_TextureMode=8;
function ke(a,b){this.c=a.c;this.Zc=this.vc=this.V=null;this.mc=a;this.Ae=!0;this.T=!1;this.A=new jb;this.Ge=this.v=0;if(null!=b){var c=b.Aa;this.O=c.getUint8(b.g,!0);b.g+=1;1<this.mc.wa?(this.fg=c.getUint8(b.g,!0),b.g+=1):this.fg=0;this.ze=c.getUint16(b.g,!0);b.g+=2;var d=this.A.P,e=this.A.pa;d[0]=c.getFloat64(b.g,!0);b.g+=8;d[1]=c.getFloat64(b.g,!0);b.g+=8;d[2]=c.getFloat64(b.g,!0);b.g+=8;e[0]=c.getFloat64(b.g,!0);b.g+=8;e[1]=c.getFloat64(b.g,!0);b.g+=8;e[2]=c.getFloat64(b.g,!0);b.g+=8;Rb(this.A);
if(3<=this.mc.wa){var f=b.Aa,e=b.g,c=b.tq,g=f.getUint16(e,!0),e=e+2,h=f.getUint16(e,!0),e=e+2;g||(this.Ae=!1);for(var d=this.A.xk(),k=this.A.Lj,l=1/h,h=null,n=new Float32Array(3*g),p=0,v=0,u=0,q=d[0],z=d[1],x=d[2],w=this.A.P[0],C=this.A.P[1],B=this.A.P[2],t=1/(this.A.pa[0]-this.A.P[0]),J=1/(this.A.pa[1]-this.A.P[1]),y=1/(this.A.pa[2]-this.A.P[2]),d=[0,e],e=0;e<g;e++){xe(c,d);p+=d[0];xe(c,d);v+=d[0];xe(c,d);var u=u+d[0],A=3*e;n[A]=(p*l*k+q-w)*t;n[A+1]=(v*l*k+z-C)*J;n[A+2]=(u*l*k+x-B)*y}e=d[1];if(this.O&
MelownSubmeshFlags_ExternalTexcoords)for(h=f.getUint16(e,!0),l=1/h,h=new Float32Array(2*g),v=p=0,d[1]=e+2,e=0;e<g;e++)xe(c,d),p+=d[0],xe(c,d),v+=d[0],A=2*e,h[A]=p*l,h[A+1]=1-v*l;e=d[1];this.ti=n;this.ri=h;if(this.O&MelownSubmeshFlags_InternalTexcoords){n=f.getUint16(e,!0);e+=2;h=f.getUint16(e,!0);e+=2;A=f.getUint16(e,!0);h=1/h;A=1/A;v=p=0;g=new Float32Array(2*n);d[1]=e+2;e=0;for(n*=2;e<n;e+=2)xe(c,d),p+=d[0],xe(c,d),v+=d[0],g[e]=p*h,g[e+1]=1-v*A;e=d[1];this.si=g}f=f.getUint16(e,!0);h=g=null;n=new Float32Array(9*
f);this.O&MelownSubmeshFlags_InternalTexcoords&&(g=new Float32Array(6*f));this.O&MelownSubmeshFlags_ExternalTexcoords&&(h=new Float32Array(6*f));p=this.ti;v=this.ri;k=this.si;l=0;d[1]=e+2;for(e=0;e<f;e++)A=9*e,ye(c,d),u=l-d[0],d[0]||l++,ye(c,d),q=l-d[0],d[0]||l++,ye(c,d),z=l-d[0],d[0]||l++,x=3*u,n[A]=p[x],n[A+1]=p[x+1],n[A+2]=p[x+2],x=3*q,n[A+3]=p[x],n[A+4]=p[x+1],n[A+5]=p[x+2],x=3*z,n[A+6]=p[x],n[A+7]=p[x+1],n[A+8]=p[x+2],null!=h&&(A=6*e,h[A]=v[2*u],h[A+1]=v[2*u+1],h[A+2]=v[2*q],h[A+3]=v[2*q+1],
h[A+4]=v[2*z],h[A+5]=v[2*z+1]);l=0;if(null!=g)for(e=0;e<f;e++)ye(c,d),u=l-d[0],d[0]||l++,ye(c,d),q=l-d[0],d[0]||l++,ye(c,d),z=l-d[0],d[0]||l++,A=6*e,g[A]=k[2*u],g[A+1]=k[2*u+1],g[A+2]=k[2*q],g[A+3]=k[2*q+1],g[A+4]=k[2*z],g[A+5]=k[2*z+1];e=d[1];this.V=n;this.vc=g;this.Zc=h;this.ri=this.si=this.ti=null;b.g=e;this.v=this.V.length;this.vc&&(this.v+=this.vc.length);this.Zc&&(this.v+=this.Zc.length);this.v*=4;this.Ge=f}else{p=b.Aa;c=b.g;d=b.tq;A=p.getUint16(c,!0);c+=2;A||(this.Ae=!1);n=null;h=new Float32Array(3*
A);this.O&MelownSubmeshFlags_ExternalTexcoords&&(n=new Float32Array(2*A));g=v=1/65535;for(e=k=f=0;e<A;e++)h[f]=(d[c]+(d[c+1]<<8))*g,h[f+1]=(d[c+2]+(d[c+3]<<8))*g,h[f+2]=(d[c+4]+(d[c+5]<<8))*g,f+=3,null!=n?(n[k]=(d[c+6]+(d[c+7]<<8))*v,n[k+1]=(65535-(d[c+8]+(d[c+9]<<8)))*v,k+=2,c+=10):c+=6;this.ti=h;this.ri=n;if(this.O&MelownSubmeshFlags_InternalTexcoords){n=p.getUint16(c,!0);c+=2;A=new Float32Array(2*n);v=1/65535;e=0;for(n*=2;e<n;e+=2)A[e]=(d[c]+(d[c+1]<<8))*v,A[e+1]=(65535-(d[c+2]+(d[c+3]<<8)))*v,
c+=4;this.si=A}p=p.getUint16(c,!0);c+=2;n=A=null;h=new Float32Array(9*p);this.O&MelownSubmeshFlags_InternalTexcoords&&(A=new Float32Array(6*p));this.O&MelownSubmeshFlags_ExternalTexcoords&&(n=new Float32Array(6*p));v=this.ti;g=this.ri;k=this.si;for(e=0;e<p;e++)f=9*e,l=d[c]+(d[c+1]<<8),u=d[c+2]+(d[c+3]<<8),q=d[c+4]+(d[c+5]<<8),z=3*l,h[f]=v[z],h[f+1]=v[z+1],h[f+2]=v[z+2],z=3*u,h[f+3]=v[z],h[f+4]=v[z+1],h[f+5]=v[z+2],z=3*q,h[f+6]=v[z],h[f+7]=v[z+1],h[f+8]=v[z+2],null!=n&&(f=6*e,n[f]=g[2*l],n[f+1]=g[2*
l+1],n[f+2]=g[2*u],n[f+3]=g[2*u+1],n[f+4]=g[2*q],n[f+5]=g[2*q+1]),null!=A?(l=d[c+6]+(d[c+7]<<8),u=d[c+8]+(d[c+9]<<8),q=d[c+10]+(d[c+11]<<8),c+=12,f=6*e,A[f]=k[2*l],A[f+1]=k[2*l+1],A[f+2]=k[2*u],A[f+3]=k[2*u+1],A[f+4]=k[2*q],A[f+5]=k[2*q+1]):c+=6;this.V=h;this.vc=A;this.Zc=n;this.ri=this.si=this.ti=null;b.g=c;this.v=this.V.length;this.vc&&(this.v+=this.vc.length);this.Zc&&(this.v+=this.Zc.length);this.v*=4;this.Ge=p}}}m=ke.prototype;m.C=function(){this.T=!0;this.Zc=this.vc=this.V=null};
function ye(a,b){var c=a[b[1]];c&128?(b[0]=c&127|a[b[1]+1]<<7,b[1]+=2):(b[0]=c,b[1]++)}function xe(a,b){var c=a[b[1]];c&128?(c=c&127|a[b[1]+1]<<7,b[0]=c&1?-((c>>1)+1):c>>1,b[1]+=2):(b[0]=c&1?-((c>>1)+1):c>>1,b[1]++)}m.size=function(){return this.v};m.fileSize=function(){return this.gc};function je(a){return new vb(a.c.l.j,{A:a.A,V:a.V,wi:a.vc,wq:a.Zc},1,a.c.u)}
m.zg=function(a,b){var c=b;null!=c?(c[0]=Sb(this.A,0),c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=Sb(this.A,1),c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=Sb(this.A,2),c[11]=0,c[12]=this.A.P[0]-a[0],c[13]=this.A.P[1]-a[1],c[14]=this.A.P[2]-a[2],c[15]=1):(c=r.i.create(),r.i.multiply(r.qc(this.A.P[0]-a[0],this.A.P[1]-a[1],this.A.P[2]-a[2]),r.af(Sb(this.A,0),Sb(this.A,1),Sb(this.A,2)),c));return c};
m.ug=function(a){var b=this.c.l;b.j.useProgram(b.Ug,["aPosition"]);var c=r.i.create(),d=r.i.create();r.i.multiply(Nb(b.G),this.zg(a),d);a=Mb(b.G);r.i.multiply(a,d,c);ya(b.Ug,"uMVP",c);b.Gi.Xa(b.Ug,"aPosition")};
function yc(a,b,c){this.c=a;this.f=null;this.U="basic";this.Oj=1;this.qm=this.yc="";this.ep=1;this.fn=this.Nj="";this.Qa=this.c.Qa;this.rc=this.c.rc;this.Hc=this.c.Hc;this.ra=[0,0];this.aa=[[0,0],[0,0]];this.ze=null;this.Ic=[];this.wf="glue"==c;this.Ch="free"==c;this.Ud=!1;this.ng=0;this.ta=!1;this.Qb=null;this.Zd=0;this.po=!1;this.di=this.Qj=null;this.ap=-1;this.dr=[];this.Pf=this.ud=this.Qd=null;this.$m=!0;this.Kb=this.Ch?new Bc(this.c,0,this):null;"string"===typeof b?(this.wc=this.c.Hb(b),this.Qa=
r.za.Zi(this.wc),this.rc=r.za.dj(this.wc),this.Hc=r.za.bj(this.wc),r.Id(this.wc,function(a){this.Qf(a);this.ta=!0;Jc(this.c)}.bind(this),function(){}.bind(this),null,r.useCredentials?-1!=this.wc.indexOf(this.c.Qa):!1,this.c.u.Mb)):(this.Qf(b),this.ta=!0)}m=yc.prototype;
m.Qf=function(a){this.f=a.id||null;this.U=a.type||"basic";this.Oj=a.metaBinaryOrder||1;this.yc=this.Hb(a.metaUrl,"");this.qm=this.Hb(a.navUrl,"");this.ep=a.navDelta||1;this.Nj=this.Hb(a.meshUrl,"");this.fn=this.Hb(a.textureUrl,"");this.$d=this.Hb(a.geodataUrl||a.geodata,"");this.ra=a.lodRange||[0,0];this.aa=a.tileRange||[[0,0],[0,0]];this.ze=a.textureLayer||null;this.Ka="geodata"==this.U||"geodata-tiles"==this.U;this.I=a.credits||[];this.kf=a.displaySize||256;if(a.extents){var b=a.extents.ll,c=a.extents.ur;
this.S=new jb(b[0],b[1],b[2],c[0],c[1],c[2])}else this.S=new jb(0,0,0,1,1,1);this.bf=Math.pow(2,this.ra[0])/((this.aa[1][0]-this.aa[1][0]+1)*(this.aa[1][1]-this.aa[1][1]+1));switch(typeof this.I){case "string":this.I=[];break;case "object":if(!Array.isArray(this.I)){b=this.I;this.I=[];for(var d in b)pc(this.c,d,new qc(this.c,b[d])),this.I.push(d)}d=0;for(b=this.I.length;d<b;d++)c=this.c.I[this.I[d]],this.dr.push(c?c.f:null)}this.$d&&"string"===typeof this.$d&&-1!=this.$d.indexOf("{geonavtile}")&&
(this.po=!1);this.Ka&&(this.Pf=a=a.style)&&Ic(this,a);this.fg=[];if(this.wf)for(d=0,b=this.f.length;d<b;d++)this.fg.push(this.c.be(this.f[d]))};m.C=function(){this.Qb&&(this.Qb.C(),this.Qb=null);this.Pf=this.ud=this.Qd=this.$d=null};m.ub=function(){return this.Ka?{type:this.U,metaUrl:this.yc,geodataUrl:this.$d,lodRange:this.ra,tileRange:this.aa,style:this.Pf}:{type:this.U,metaUrl:this.yc,navUrl:this.qm,meshUrl:this.Nj,textureUrl:this.fn,lodRange:this.ra,tileRange:this.aa,textureLayer:this.ze}};
m.Hb=function(a,b){if(!a)return b;if("string"!==typeof a)return a;a=a.trim();return-1!=a.indexOf("://")?a:0==a.indexOf("//")?this.rc+a:0==a.indexOf("/")?this.Hc+a:this.Qa+a};
m.zo=function(a){var b=a[0]-this.ra[0],c=0>b;if(a[0]<this.ra[0]){var b=-b,d=this.aa[0][0]>>b,e=this.aa[0][1]>>b,f=this.aa[1][0]>>b,b=this.aa[1][1]>>b;if(a[0]>this.ra[1]||a[1]<d||a[1]>f||a[2]<e||a[2]>b)return[!1,!1]}else if(d=a[1]>>b,b=a[2]>>b,a[0]>this.ra[1]||d<this.aa[0][0]||d>this.aa[1][0]||b<this.aa[0][1]||b>this.aa[1][1])return[!1,!1];return[!0,c]};function Ic(a,b){a.Qd!=b&&(a.ud=a.c.cf[b],a.ud||(a.ud=new xc(a.c,b,b),a.c.cf[b]=a.ud),a.Qd=b,a.$m=!0,a.Zd++,D(a.c))}
m.aj=function(a,b){return Sc(this.c,this.yc,{ca:a[0],qb:a[1],rb:a[2]},null,b)};m.kl=function(a,b){return Sc(this.c,this.qm,{ca:a[0],qb:a[1],rb:a[2]},null,b)};function Hd(a,b,c){return Sc(a.c,a.fn,{ca:b[0],qb:b[1],rb:b[2]},c,void 0)}function Dd(a,b,c){return Sc(a.c,a.$d,{ca:b[0],qb:b[1],rb:b[2]},c,void 0)}
function Gc(a){var b,c=a.th;if(b=a.Kb){b.gg=[];b.Zv=[];b.fk=[];var d={},e=0,f=[],g=[],h;for(h in c.ya){var k=a.be(h);k&&(g.push(k.f),e++,d[h]=k.g+1,f.push([[k.g+1],k,!0,!1]))}1<=e&&(g.sort(),g=g.join(";"),k=a.bc[g])&&(f=[[[k.g+1],k,!0,!1]],e=1);if(1<e){var l=[];for(h in a.Ih){var n=a.Ih[h],p=n.f;if(p.length<=e){for(var v=!1,g=0,k=p.length;g<k;g++)if(!d[p[g]]){v=!0;break}if(!v){v=[];g=0;for(k=p.length;g<k;g++)v.unshift(d[p[g]]);l.push([v,n,!1,!1])}}}d=0;for(p=l.length;d<p;d++)g=l[d],n=g[1],n.vr=!0,
n.tr=!0,n.vr&&f.push(g),n.tr&&(v=g[0].slice(1),f.push([v,g[1],!1,!0]));do for(l=!0,d=0,p=f.length-1;d<p;d++){for(var n=f[d][0],v=f[d+1][0],u=!1,g=0,k=Math.min(n.length,v.length);g<k;g++)if(n[g]<v[g]||g==k-1&&n[g]==v[g]&&v.length>n.length){u=!0;break}u&&(g=f[d],f[d]=f[d+1],f[d+1]=g,l=!1)}while(!l);--e;d=0;for(p=f.length;d<p;d++)b.gg.push([f[d][1],f[d][3]]),f[d][1].vn=e,f[d][2]&&(e--,b.fk.push(f[d][1]))}else 1==e&&(b.gg.push([f[0][1],f[0][3]]),f[0][1].vn=e-1,b.fk=[f[0][1]]);a.sf=!1;for(h in c.X)if(b=
a.X[h])b.gg=[b],b.fk=[b],b.Ka&&(a.sf=!0);dc(a.l)}}
function Hc(a){var b=a.th,c;for(c in b.ya){var d=b.ya[c],e=a.be(c);if(null!=e){e.Ic=[];for(var f=0,g=d.length;f<g;f++){var h=d[f];if("string"===typeof h){var k=a.Ta[h];k&&e.Ic.push([k,1])}else if(k=a.Ta[h.id]){var l=1;"undefined"!==typeof h.alpha&&(l=h.alpha);e.Ic.push([k,l])}}}}for(c in b.X)if(f=b.X[c],d=a.X[c],null!=d&&d.ta&&(d.Ic=[],(e=f.boundLayers)&&Array.isArray(e)))for(f=0,g=e.length;f<g;f++)if(h=e[f],"string"===typeof h)(k=a.Ta[h])&&d.Ic.push([k,1]);else if(k=a.Ta[h.id])l=1,"undefined"!==
typeof h.alpha&&(l=h.alpha),d.Ic.push([k,l])}function ze(a,b,c,d,e){this.c=a;this.m=a.m;this.K=d;this.Cf=e;this.wb=this.mj=this.fe=this.Sa=null;this.L=0;this.Ua=null;this.xa=0;this.Kf=!1;this.la=b;this.Za=c||!1;this.Ha=0;this.Jc=this.tc=null;this.Xi=!1;this.gc=0;this.mb=this.fa=null}m=ze.prototype;m.C=function(){this.je();this.ie();this.If&&(this.If.je(),this.If.ie())};
m.je=function(a){this.fe=this.Sa=null;1!=a&&this.fa&&this.c.Jb.remove(this.fa);this.If&&this.If.je();this.wb||(this.L=0);this.fa=null};m.ie=function(a){null!=this.wb&&(this.m.Eg-=this.wb.v,this.wb.C(),this.m.fd[1][0]++,this.m.fd[1][1]+=this.wb.v,this.If&&this.If.ie());this.wb=null;1!=a&&this.mb&&this.c.Sb.remove(this.mb);this.Sa||this.fe||(this.L=0);this.mb=null};
m.W=function(a,b,c,d){var e=this.c.m.vb>=this.c.Pe;a=a||e;if(this.Kf)return!1;switch(d.tc){case "negative-type":case "negative-code":case "negative-size":if(2!=this.Ha){this.tc=d.tc;this.Jc=d.Jc;if(0==this.Ha)Ae(this,b,"negative-size"==this.tc);else if(3==this.Ha)this.xa<=this.c.h.Pc&&performance.now()>this.Ua+this.c.h.Qc&&Ae(this,b,"negative-size"==this.tc);else if(-1==this.Ha&&d.hb)for(d.J||(d.J={K:d.hb.K,Ia:d.hb.Ia},Be(d,d.J.K.va,d.J.Ia));d.J.N.J||-1==d.J.N.Ha;)Be(d,d.J.$f.va,d.J.Ia);return!1}}if(2==
this.L){!a&&this.fa&&id(this.c.Jb,this.fa);if((this.Za&&!this.fe||!this.Za&&!this.wb)&&this.m.cb>this.c.h.$h)return D(this.c),!1;if(c)return this.Za&&!this.fe&&(b=performance.now(),Ce(this),this.m.cb+=performance.now()-b),!0;if(this.Za)this.fe||(b=performance.now(),Ce(this),this.m.cb+=performance.now()-b);else{if(!this.wb){if(this.c.m.vb>=this.c.Pe||e)return!1;b=performance.now();this.wb=new $a(this.c.l.j,null,this.c.u);gb(this.wb,this.Sa,"linear",!1);this.m.Eg+=this.wb.v;this.m.fd[0][0]++;this.m.fd[0][1]+=
this.wb.v;this.mb=jd(this.c.Sb,this.ie.bind(this,!0),this.wb.v);this.m.cb+=performance.now()-b}!a&&this.mb&&id(this.c.Sb,this.mb)}return!0}0==this.L?a||this.Cb(b):3==this.L&&this.xa<=this.c.h.Pc&&performance.now()>this.Ua+this.c.h.Qc&&this.Cb(b);return!1};m.Cb=function(a,b){this.c.xc.load(this.la,this.qd.bind(this,b),a,this.K,this.Cf?"texture-in":"texture-ex")};
m.qd=function(a,b,c,d){this.Rc=c;this.ld=d;c=this.nc.bind(this);d=this.zb.bind(this);a?this.Ha=1:this.L=1;this.c.h.ci?r.hd(b,this.$s.bind(this),c,r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb,"blob"):this.Sa=r.kb.nj(b,d,c,this.c.u.hn?-1!=b.indexOf(this.c.u.hn):!1)};m.nc=function(a){1!=this.c.T&&(a&&window.URL.revokeObjectURL(this.Sa.src),this.L=3,this.Ua=performance.now(),this.xa++,this.xa<=this.c.h.Pc&&setTimeout(function(){this.c.T||D(this.c)}.bind(this),this.c.h.Qc),this.ld())};
m.$s=function(a){if(this.Xi&&this.tc&&"metatile"!=this.tc&&(this.mp(0,a,null),-1==this.Ha)){this.Rc();return}var b=new Image;b.onerror=this.nc.bind(this,!0);b.onload=this.zb.bind(this,!0);this.Sa=b;b.src=window.URL.createObjectURL(a);this.gc=a.size};m.zb=function(a){this.c.T||(a&&window.URL.revokeObjectURL(this.Sa.src),this.fa=jd(this.c.Jb,this.je.bind(this,!0),this.Sa.naturalWidth*this.Sa.naturalHeight*3),D(this.c),this.L=2,this.Ua=null,this.xa=0,this.Rc())};
function Ae(a,b,c){a.c.h.ci&&a.Xi?a.Cb(b,!0):a.c.xc.load(a.la,a.ct.bind(a,c),b,a.K,a.Cf,a.Cf?"texture-in":"texture-ex")}m.ct=function(a,b,c,d){this.Rc=c;this.ld=d;c=this.dt.bind(this,a);d=this.mp.bind(this,a);this.Ha=1;a?r.hd(b,d,c,r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb,"blob"):r.kb.Ao(b,d,c,r.useCredentials?-1!=this.la.indexOf(this.c.Qa):!1,this.c.u.Mb)};
m.dt=function(){this.c.T||(this.Ha=3,this.Ua=performance.now(),this.xa++,this.xa<=this.c.h.Pc&&setTimeout(function(){this.c.T||D(this.c)}.bind(this),this.c.h.Qc),this.ld())};
m.mp=function(a,b,c){if(!this.c.T)if(this.Ha=2,this.Ua=null,this.xa=0,this.c.h.ci&&this.Xi)switch(this.tc){case "negative-size":b&&b.size==this.Jc&&(this.Ha=-1);break;case "negative-type":b&&b.type==this.Jc&&(this.Ha=-1);break;case "negative-code":c&&-1!=this.Jc.indexOf(c)&&(this.Ha=-1)}else{switch(this.tc){case "negative-size":b&&b.byteLength==this.Jc&&(this.Ha=-1);break;case "negative-type":b&&-1!=b.indexOf(this.Jc)&&(this.Ha=-1);break;case "negative-code":c&&-1!=this.Jc.indexOf(c)&&(this.Ha=-1)}this.Rc()}};
function Ce(a){var b=document.createElement("canvas");b.width=a.Sa.naturalWidth;b.height=a.Sa.naturalHeight;b=b.getContext("2d");b.drawImage(a.Sa,0,0);a.fe=b.getImageData(0,0,a.Sa.naturalWidth,a.Sa.naturalHeight).data;a.mj=[a.Sa.naturalWidth,a.Sa.naturalHeight];a.Sa=null}m.Gh=function(){return this.wb};m.il=function(a,b){return this.fe?this.fe[4*(b*this.mj[0]+a)]:0};
function Wc(a,b,c,d,e,f,g){this.c=a;this.m=a.m;this.K=f;this.Cf=g;if(f){a=f.oc;var h;h=a.$p[b];h||(h=new ze(a.c,b,c,f,g),a.$p[b]=h);f=h}else f=new ze(a,b,c,f,g);this.kd=f;this.L=0;this.Ua=null;this.xa=0;this.Kf=!1;this.Wb=null;this.la=b;this.Za=c||!1;this.J=d;this.hb=e;this.Ha=0;this.Jc=this.tc=null;this.Xi=!1;this.gc=0;if(e&&e.Ia&&(b=e.Ia,b.Uc))switch(this.tc=b.Uc.U,this.tc){case "negative-type":this.Jc=b.Uc.Qs;break;case "negative-code":this.Jc=b.Uc.Yq;break;case "negative-size":this.Jc=b.Uc.v}}
m=Wc.prototype;m.C=function(){this.kd.je();this.kd.ie();this.kd=null;this.Wb&&(this.Wb.je(),this.Wb.ie())};m.je=function(){this.kd.je();this.Wb&&this.Wb.je()};m.ie=function(){this.kd.ie();this.Wb&&this.Wb.ie()};function Be(a,b,c){if(b&&c){a.J.$f=b;a.J.Ia=c;if(!b.lb[c.f]){b.Ta[c.f]=c;var d=Rc(c,b.f);b.lb[c.f]=Vc(b.oc,d,null,null,{K:b,Ia:c},a.K,a.Cf)}a.J.N=b.lb[c.f];c=a.J.K;var d=c.f[0]-b.f[0],e=1/Math.pow(2,d);a.J.sq=[e,e,(c.f[1]-(b.f[1]<<d))*e,(c.f[2]-(b.f[2]<<d))*e];D(a.c)}}
m.W=function(a,b,c){var d=this.c.m.vb>=this.c.Pe;a=a||d;if("https://ecn.t1.tiles.virtualearth.net/tiles/a120231032333003.jpeg?g=5594"==this.la||"https://ecn.t2.tiles.virtualearth.net/tiles/a120231032333003.jpeg?g=5594"==this.la||"https://ecn.t3.tiles.virtualearth.net/tiles/a120231032333003.jpeg?g=5594"==this.la||"https://ecn.t4.tiles.virtualearth.net/tiles/a120231032333003.jpeg?g=5594"==this.la||"https://ecn.t5.tiles.virtualearth.net/tiles/a120231032333003.jpeg?g=5594"==this.la)this.la=this.la;if(this.Kf)return!1;
if(this.J){if(this.J.N){for(;this.J.N.J||-1==this.J.N.Ha;){d=this.J.$f.va;if(d.f[0]<this.J.Ia.ra[0])return this.Kf=!0,this.J.K.Yf=!0,D(this.c),!1;Be(this,d,this.J.Ia)}(a=this.J.N.W(a,b,c))&&this.Ln&&(this.J.K.Yf=null!=Gd(this.J.N),this.Ln=!1);return a}Be(this,this.J.$f,this.J.Ia);return!1}switch(this.tc){case "metatile":if(2!=this.Ha){if(0==this.Ha&&this.hb&&this.hb.K){var e=this.hb.K.Fn;e||(e=Uc(this.c.Zj,this.hb.K.f,8),this.hb.K.Fn=e);var d=this.hb.Ia,f=this.hb.Zo;this.hb.Zo||(f=e.f,f=Sc(d.c,d.yc,
{ca:f[0],qb:f[1],rb:f[2]},null,void 0),this.hb.Zo=f);e=Vc(e,f,!0,null,null,this.K,this.Cf);this.Wb?this.Wb.W(a,b,c,this)&&(this.Ha=2):e.W(a,b,c)&&(a=this.hb.K,b=e.il(a.f[1]&255,a.f[2]&255),this.Ha=b&128?2:-1,2!=this.Ha||b&64||(b=a.f,f=Sc(d.c,d.km,{ca:b[0],qb:b[1],rb:b[2]},null,void 0),this.Wb=Vc(a.oc,f,null,null,null,this.K,this.Cf),this.Ha=0,a.Yf=!0,D(this.c)))}if(-1==this.Ha){if(!this.J){d=this.hb.K.va;if(d.f[0]<this.hb.Ia.ra[0])return this.Kf=!0,this.hb.K.Yf=!0,D(this.c),!1;this.J={K:this.hb.K,
Ia:this.hb.Ia};Be(this,this.J.K.va,this.J.Ia);this.Ln=!0}for(;this.J.N.J||-1==this.J.N.Ha;){d=this.J.$f.va;if(d.f[0]<this.J.Ia.ra[0]){this.Kf=!0;this.J.K.Yf=!0;D(this.c);break}Be(this,d,this.J.Ia)}}return!1}}d=!0;this.Wb&&(d=this.Wb.W(a,b,c,this));return this.kd.W(a,b,c,this)&&d};m.Gh=function(){return this.J?this.J.N?this.J.N.Gh():null:this.kd.Gh()};function Gd(a){return a.J&&a.J.N?Gd(a.J.N):a.Wb}function le(a){return a.J?a.J.N&&a.J.N.If?le(a.J.N):null:a.Wb?a.Wb.Gh():null}m.getImageData=function(){return this.kd.fe};
m.il=function(a,b){return this.kd.il(a,b)};function zc(a,b){this.c=a;this.f=null;this.jm=this.yc="";this.Qa=this.c.Qa;this.rc=this.c.rc;this.Hc=this.c.Hc;this.ra=[0,0];this.aa=[[0,0],[0,0]];this.ya=[];this.Qf(b);this.Ud=!0;this.ta=!1}m=zc.prototype;
m.Qf=function(a){this.f=a.id||null;this.yc=this.Hb(a.metaUrl,"");this.jm=this.Hb(a.mapping,"");this.ra=a.lodRange||[0,0];this.aa=a.tileRange||[[0,0],[0,0]];this.Zp=this.f?this.f.join(";"):null;if(this.f){var b=this.f.slice();b.sort();this.Zp=b.join(";")}a.extents?(b=a.extents.ll,a=a.extents.ur,this.S=new jb(b[0],b[1],b[2],a[0],a[1],a[2])):this.S=new jb(0,0,0,1,1,1);this.bf=Math.pow(2,this.ra[0])/((this.aa[1][0]-this.aa[1][0]+1)*(this.aa[1][1]-this.aa[1][1]+1));r.hd(this.jm,this.gt.bind(this),this.ft.bind(this),
r.useCredentials?-1!=this.wc.indexOf(this.c.Qa):!1,this.c.u.Mb)};m.gt=function(a){a=new DataView(a);var b=0,c;c=""+String.fromCharCode(a.getUint8(b,!0));b+=1;c+=String.fromCharCode(a.getUint8(b,!0));b+=1;if("TM"==c){c=a.getUint16(b,!0);for(var b=b+2,d=0;d<c;d++){for(var e=a.getUint8(b,!0),b=b+1,f=[],g=0;g<e;g++){var h=a.getUint16(b,!0),b=b+2;(h=this.f[h])&&f.push(h)}1==f.length?this.ya.push(this.c.be(f[0])):this.ya.push(this.c.Ih[f.join(";")])}}this.ta=!0;Jc(this.c)};m.ft=function(){};
m.ub=function(){return{metaUrl:this.yc,mapping:this.jm,lodRange:this.ra,tileRange:this.aa}};m.Hb=function(a,b){if(!a)return b;a=a.trim();return-1!=a.indexOf("://")?a:0==a.indexOf("//")?this.rc+a:0==a.indexOf("/")?this.Hc+a:this.Qa+a};
m.zo=function(a){var b=a[0]-this.ra[0],c=0>b;if(a[0]<this.ra[0]){var b=-b,d=this.aa[0][0]>>b,e=this.aa[0][1]>>b,f=this.aa[1][0]>>b,b=this.aa[1][1]>>b;if(a[0]>this.ra[1]||a[1]<d||a[1]>f||a[2]<e||a[2]>b)return[!1,!1]}else if(d=a[1]>>b,b=a[2]>>b,a[0]>this.ra[1]||d<this.aa[0][0]||d>this.aa[1][0]||b<this.aa[0][1]||b>this.aa[1][1])return[!1,!1];return[!0,c]};m.be=function(a){return this.ya[a-1]};m.aj=function(a,b){return Sc(this.c,this.yc,{ca:a[0],qb:a[1],rb:a[2]},null,b)};
function De(a,b,c){this.c=a;this.f=c;this.va=b;this.lh=a.lh;this.Km=!1;this.Zd=0;this.Ea=this.Fu=this.ob=1;this.pc=this.Rd=this.Pa=this.F=this.Fn=this.Gf=this.B=null;this.nb=[];this.Da=null;this.Ud=!1;this.bc=[];this.Yf=!1;this.Vc={};this.Ta={};this.lb={};this.ui=!0;this.Za=null;this.ja=[[],[],[]];this.Vb={};this.vf={};this.Ne={};a=this.c.Zj.Kb;for(b=c[0];0<b;b--){var d=1<<b-1,e=0;0!=(c[1]&d)&&(e+=1);0!=(c[2]&d)&&(e+=2);a.ha[e]||a.Ci(e);a=a.ha[e]}this.oc=a;this.Gb=Uc(this.c.Zj,c,5,!0);Uc(this.c.Zj,
c,8,!0);this.ha=[null,null,null,null]}m=De.prototype;m.C=function(){for(var a=0;4>a;a++)null!=this.ha[a]&&this.ha[a].C();this.Pa=this.F=this.B=this.Gb=this.oc=null;this.nb=[];this.Da=this.pc=this.Rd=null;this.Vc={};this.Ta={};this.lb={};this.ui=!0;this.Ud=!1;this.bc=[];this.Km=!1;this.Za=this.ic=this.le=this.Le=null;this.ja=[[],[],[]];this.Vb={};this.vf={};this.Ne={};this.ha=[null,null,null,null];a=this.va;this.va=null;null!=a&&a.removeChild(this)};
m.xq=function(){null!=this.Gb&&gd(this.Gb,this.F,null,this)};function Ee(a){a.le&&(a.Pa=a.le.Pa,a.nb=a.le.nb,a.lb=a.le.lb,a.Rd=a.le.Rd,a.pc=a.le.pc,a.Da=a.le.Da,a.Le=null,a.le=null)}m.Ci=function(a){if(!this.ha[a]){var b=this.f,b=[b[0]+1,b[1]<<1,b[2]<<1];switch(a){case 1:b[1]++;break;case 2:b[2]++;break;case 3:b[1]++,b[2]++}this.ha[a]=new De(this.c,this,b)}};m.Ap=function(a){null!=this.ha[a]&&(this.ha[a].C(),this.ha[a]=null)};
m.removeChild=function(a){for(var b=0;4>b;b++)this.ha[b]==a&&(this.ha[b].C(),this.ha[b]=null)};
function Fe(a,b,c,d){if(a.c.lh!=a.Td){a.Le=a.F;a.le={Pa:a.Pa,nb:a.nb,lb:a.lb,Rd:a.Rd,pc:a.pc,Da:a.Da};a.ic=0<a.ja[0].length?{ja:a.ja,Vb:a.Vb,Ne:a.Ne}:null;a.Km=!1;a.Gf=a.B;for(var e in a.Vc)a.Vc[e]={sd:[],fb:[],kk:!1,Td:0};a.Ta={};a.lb={};a.ui=!0;a.F=null;a.Pa=null;a.nb=[];a.Rd=null;a.pc=null;a.Da=null;a.Ud=!1;a.bc=[];a.ja=[[],[],[]];a.Vb={};a.vf={};a.Ne={};a.Td=a.c.lh;D(a.c);a.ic&&(a.ic=a.ic)}if(!d){if(a.yi||null==a.F&&0==a.bc.length)a:if(a.F=null,a.Ud=!1,a.bc=[],a.yi=!1,b.wg)a.F=b.wg;else{b=b.gg;
d=0;for(e=b.length;d<e;d++){var f=b[d][0],g=b[d][1];if(1==f.zo(a.f)[0]){if(0<a.f[0]){var h=a.va;if(h){if(h.yi){a.yi=!0;a.bc=[];break a}var k=gd(h.Gb,f,null,a);if(k){if(!k.W(c)){a.yi=!0;continue}if(h=k.Hh(h.f)){if(k=a.f,0==(h.O&1<<(k[2]-(h.f[2]<<1)<<1)+(k[1]-(h.f[1]<<1))+4))continue}else continue}else continue}}a.bc.push([f,g])}}1<a.bc.length?a.Ud=!0:a.F=a.bc[0]?a.bc[0][0]:null}if(null==a.B||a.Gf){if(!(b=a.yi)){a:{if(a.Ud){b=a.bc;e=d=0;for(f=b.length;e<f;e++)1==gd(a.Gb,b[e][0],!0,a).W(c)&&d++;if(d==
f){b=a.bc;d=null;e=0;for(f=b.length;e<f;e++){var g=b[e][0],k=b[e][1],l=gd(a.Gb,g,null,a);if(1==l.W(c)&&(h=l.Hh(a.f),null!=h&&k==h.ph)){if(!k&&g.wf&&0==(h.O&1)&&0<h.oj){for(var k=h.oj-1,k=a.c.be(g.f[k]).vn,l=!1,n=e;n<f;n++)if(b[n].vn<=k){l=n>e;e=n-1;break}if(l)continue}if(0!=(h.O&1)){d=h.clone();a.F=g;break}}}e=0;for(f=b.length;e<f;e++)g=b[e][0],l=gd(a.Gb,g,null,a),1==l.W(c)&&(h=l.Hh(a.f),null!=h&&(d?(d.O|=h.O&240,4>l.df&&(d.A.P[0]=Math.min(d.A.P[0],h.A.P[0]),d.A.P[1]=Math.min(d.A.P[1],h.A.P[1]),d.A.P[2]=
Math.min(d.A.P[2],h.A.P[2]),d.A.pa[0]=Math.max(d.A.pa[0],h.A.pa[0]),d.A.pa[1]=Math.max(d.A.pa[1],h.A.pa[1]),d.A.pa[2]=Math.max(d.A.pa[2],h.A.pa[2]))):(d=h.clone(),a.F=g)));d&&oe(d,!0);a.B=d;a.Gf=null;D(a.c)}else{c=!1;break a}}b=a.F;if(null==b)c=!1;else if(b=gd(a.Gb,b,!0,a),1==b.W(c)){a.Ud||(a.B=b.Hh(a.f),a.Gf=null,D(a.c));if(null!=a.B)for(a.B.K=a,a.Gf=null,D(a.c),c=0;4>c;c++)0!=(a.B.O&1<<c+4)==1?a.Ci(c):a.Ap(c);c=!0}else c=!1}b=c||null!=a.B&&a.Gf}if(!b)return;a.Gf&&(processFlag2_=!0)}}if(null==a.B)return!1;
a.B.$a.rn();a.Le&&a.Le==a.F&&(a.Le=null,Ee(a));a.F&&(a.F.Ud?(a.Da=a.F.be(a.B.Rp),a.Da||(a.Da=a.F)):a.Da=a.F);return!0}m.Ad=function(a,b,c,d){var e=this.c;if(a[0]<e.Pj)return!0;if(!e.h.bm&&e.Dh&&d){var f=d.jf,g=e.ba,g=[f[0]-g[0],f[1]-g[1],f[2]-g[2]],f=r.D.Ys(g)*e.wk,g=r.D.lf(g,d.Mc);if(15E4<f&&g>d.Oi)return!1}return 4<=d.$a.df?ac(e.G,d.Ra,c):!e.Dh||!e.h.Mg||4>a[0]?e.G.Ad(b,c):ac(e.G,d.Ra,c)};
function Ge(a,b,c,d){var e=b.P,f=b.pa;b=e[0]-d[0];var g=e[1]-d[1],h=f[0]-d[0],k=e[1]-d[1],l=f[0]-d[0],n=f[1]-d[1],p=e[0]-d[0],v=f[1]-d[1],u=e[2]-d[2],q=f[2]-d[2];if(!a.c.h.Ej&&d[0]>e[0]&&d[0]<f[0]&&d[1]>e[1]&&d[1]<f[1]&&d[2]>e[2]&&d[2]<f[2])return[Number.POSITIVE_INFINITY,.1];a=a.c.G;a=0<g?0<b?0>q?Tb(a,[b,g,q]):0<u?Tb(a,[b,g,u]):Tb(a,[b,g,.5*(u+q)]):0>h?0>q?Tb(a,[h,k,q]):0<u?Tb(a,[h,k,u]):Tb(a,[h,k,.5*(u+q)]):0>q?Tb(a,[.5*(b+h),k,q]):0<u?Tb(a,[.5*(b+h),k,u]):Tb(a,[.5*(b+h),k,.5*(u+q)]):0>v?0<p?0>
q?Tb(a,[p,v,q]):0<u?Tb(a,[p,v,u]):Tb(a,[p,v,.5*(u+q)]):0>l?0>q?Tb(a,[l,n,q]):0<u?Tb(a,[l,n,u]):Tb(a,[l,n,.5*(u+q)]):0>q?Tb(a,[.5*(p+l),n,q]):0<u?Tb(a,[.5*(p+l),n,u]):Tb(a,[.5*(p+l),n,.5*(u+q)]):0<p?0>q?Tb(a,[b,.5*(k+n),q]):0<u?Tb(a,[b,.5*(k+n),u]):Tb(a,[b,.5*(k+n),.5*(u+q)]):0>l?0>q?Tb(a,[h,.5*(k+n),q]):0<u?Tb(a,[h,.5*(k+n),u]):Tb(a,[h,.5*(k+n),.5*(u+q)]):0>q?Tb(a,[.5*(b+h),.5*(k+n),q]):0<u?Tb(a,[.5*(b+h),.5*(k+n),u]):Tb(a,[.5*(b+h),.5*(k+n),.5*(u+q)]);return[a[0]*c,a[1]]}
function He(a,b,c){var d=1*a.c.Tq-b.wh;0>d&&(d=-d);var e=r.D.lf(a.c.Uq,b.Mc);e<b.sg&&(e=Math.acos(e),e-=Math.acos(b.sg),b=Math.tan(e)*b.wh,d=Math.sqrt(b*b+d*d));a=a.c.G;b=d;a.ua&&a.update();a=b<a.Qg?Number.POSITIVE_INFINITY:a.We[0]/b;return[a*c,d]}
function Ie(a){var b,c=a.c,d=c.pi,e=a.B,f=c.ba,g=c.Dh&&(c.h.bi||4<=e.$a.df);0!=(e.O&1)?(b=Number.POSITIVE_INFINITY,0!=(e.O&4)?b=c.se*e.Tg:0!=(e.O&8)&&(b=e.A.Lj/e.kf*c.se),1==c.G.vm?(e=c.G.zq,b=[2*b/e,e]):0!=(e.O&8)?g?(b=e.A.Lj/256*c.se*(256/e.kf),b=He(a,e,b)):(b=e.A.Lj/256*c.se,d=e.kf/256*c.Db,g=c.Bd,f=[f[0]-g[0]*d,f[1]-g[1]*d,f[2]-g[2]*d],b=Ge(a,e.A,b,f)):!g&&1.1<d?(b=d/1.1*e.Tg*c.se,d=d/1.1*c.Db,g=c.Bd,f=[f[0]-g[0]*d,f[1]-g[1]*d,f[2]-g[2]*d],b=Ge(a,e.A,b,f)):b=g?He(a,e,b):Ge(a,e.A,b,f)):(b=g?He(a,
e,1):Ge(a,e.A,1,f),b[0]=Number.POSITIVE_INFINITY);a.ob=b[0];a.Ea=b[1];!c.h.Xh||1>c.Xn||(e=c.h.Aj,f=e[1],d=e[2],b=c.Xn*c.ir,g=a.Ea*c.wk,g<f?b=1:g>f&&g<d&&(b=1+(g-f)/(d-f)*(b-1)),b=Math.max(b,1),c=c.Vq,e=e[3],c>e?b=1:c<e&&1<b&&(b=1+(b-1)*(1-c/e)),a.ob/=b)}
function Cd(a,b,c,d){if(!(a.ob==Number.POSITIVE_INFINITY||4.4<a.ob)||!a.B||0==(a.B.O&240)){var e=a.c.h.Os,f=a.c;if(c){var g=c[0],h=c[1][0];c=c[1][1]}else{var k=Rd(f,a.f),g=k[0],h=k[1][0];c=k[1][1]}var l=[.5*(c[0]+h[0]),.5*(c[1]+h[1])],n=f.bb.fs;d=d||a.B.sg;if(n&&!g.Ll&&Math.acos(d)>.1*Math.PI)d=Math.cos(.5*Math.acos(d)),Cd(a,b,[g,[[h[0],h[1]],[l[0],l[1]]]],d),Cd(a,b,[g,[[l[0],h[1]],[c[0],l[1]]]],d),Cd(a,b,[g,[[h[0],l[1]],[l[0],c[1]]]],d),Cd(a,b,[g,[[l[0],l[1]],[c[0],c[1]]]],d);else{k=Math.log(5*(g.S.ea[1]-
g.S.Z[1])/a.Ea)/f.Is;k=Math.max(0,k-8+g.f[0]);d=[[c[0],c[1]],[c[0],h[1]],[h[0],h[1]],[h[0],c[1]],[l[0],c[1]],[l[0],h[1]],[h[0],l[1]],[c[0],l[1]]];if(e){if(!a.B)return;var e=a.B.Re,p=[[e],[e],[e],[e],[e],[e],[e],[e]];l[2]=e;l=re(g,l,!0)}else k=f.cd(null,k,null,g,l,d),l[2]=k[0],l=re(g,l,!0),(p=k[5])||(p=[[0],[0],[0],[0],[0],[0],[0],[0]]);var e=f.l,k=f.qt,v=Nb(e.G),u=Mb(e.G),q=b[0],z=b[1];b=b[2];d[0][2]=p[0][0];var x=re(g,d[0],!0);d[1][2]=p[1][0];var w=re(g,d[1],!0);d[2][2]=p[2][0];var C=re(g,d[2],!0);
d[3][2]=p[3][0];var B=re(g,d[3],!0);d[4][2]=p[4][0];var t=re(g,d[4],!0);d[5][2]=p[5][0];var J=re(g,d[5],!0);d[6][2]=p[6][0];var y=re(g,d[6],!0);d[7][2]=p[7][0];d=re(g,d[7],!0);k[0]=B[0]-q;k[1]=B[1]-z;k[2]=B[2]-b;k[3]=t[0]-q;k[4]=t[1]-z;k[5]=t[2]-b;k[6]=x[0]-q;k[7]=x[1]-z;k[8]=x[2]-b;k[9]=y[0]-q;k[10]=y[1]-z;k[11]=y[2]-b;k[12]=l[0]-q;k[13]=l[1]-z;k[14]=l[2]-b;k[15]=d[0]-q;k[16]=d[1]-z;k[17]=d[2]-b;k[18]=C[0]-q;k[19]=C[1]-z;k[20]=C[2]-b;k[21]=J[0]-q;k[22]=J[1]-z;k[23]=J[2]-b;k[24]=w[0]-q;k[25]=w[1]-
z;k[26]=w[2]-b;!n||f.Bm||1!=g.f[0]||g.Ll||(l=re(g,[g.S.ea[0],g.S.ea[1],0]),f.Bm=Math.sqrt(l[0]*l[0]+l[1]*l[1]),f.zt=8*Math.pow(2,552058/f.Bm));l=1;n&&g.Ll?(l=f.zt,n=e.Kt,e.j.useProgram(n,["aPosition","aTexCoord"]),rb(n,"uParams4",[-q,-z,f.Bm,0])):(n=e.Lt,e.j.useProgram(n,["aPosition","aTexCoord"]));ya(n,"uMV",v);ya(n,"uProj",u);Fb(n,"uPoints",k);f=g.yo*l;u=1/(c[0]-h[0]);v=1/(h[1]-c[1]);d=f/((g.S.ea[0]-g.S.Z[0])*u);k=f/((g.S.ea[1]-g.S.Z[1])*v);h=(h[0]-g.S.Z[0])*u*d;c=(c[1]-g.S.Z[1])*v*k;rb(n,"uParams",
[f*l,a.c.rf,1/15,g.es*l]);rb(n,"uParams3",[c-Math.floor(c),h-Math.floor(h),k,d]);rb(n,"uParams2",[0,0,g.ds,0]);e.j.bindTexture(e.Nh);e.tt.Xa(n,"aPosition","aTexCoord")}}}function Bc(a,b,c){this.c=a;this.G=a.G;this.mu=[0,0,0];this.wg=c;this.Oj=this.c.bb.Rg.Oj;this.Ke=!1;this.hg=new De(this.c,null,this.mu);this.gg=[];this.fk=[];this.h=this.c.h;this.rh=[0,0,0];this.se=1;this.Xc=0}m=Bc.prototype;m.C=function(){this.hg=null};
m.Oc=function(){var a=Sc(this.c,surface.yc,{ca:result_[0],qb:result_[1],rb:result_[2]});map_.xc.load(a,metatile_.Ev.bind(metatile_,a));this.Iv.load();this.hg.$a=1;this.Ke=!0};function Pd(a,b){for(var c=a.hg,d=b[0];0<d;d--){var e=1<<d-1,f=0;0!=(b[1]&e)&&(f+=1);0!=(b[2]&e)&&(f+=2);c=c.ha[f];if(!c)return null}return c}
m.Xa=function(){this.rh=[0,0,0];this.se=this.c.se;var a=this.c.bb.Xb.Ve.nt;if(!this.wg||!this.wg.Ka||0==this.c.Eb)if(null!=a)Je(this),"X"==a.U&&(Je(this),Je(this));else switch(this.wg&&this.wg.Ka?this.c.h.cm:this.c.h.Dj){case "topdown":Je(this);break;case "fit":this.Xc++;var b=this.hg;if(Fe(b,this,0)){var a=this.c,c=b.B,d=a.ba;if(b.Ad(b.f,c.A,d,c)){Ie(b);var e=b.F.Ch,e=!b.F.Ka&&!e&&a.h.Lg,f=a.Mk,g=a.Dm,h=a.Cm,k=0,l;g[0]=[b,0];var b=1,n=a.pi,p=a.w.eg||a.w.dg,v=a.w.Te;a.fc++;var u=1,q=1,z=1,x=a.fc,
w=a.h.Ps;do{var C=0;l=0;for(var B=b-1;0<=B;B--)if(c=g[B],b=c[0],depth_=c[1],depth_>=w)e&&(f[k]=[b,!0],k++);else{if(c=b.B)q++,c.$a.fc!=x&&(c.$a.fc=x,z++);if(b.Ad(b.f,c.A,d,c)){u++;b.ob!=Number.POSITIVE_INFINITY&&b.ob>C&&(C=b.ob);p&&v.push(b);var t=l,J=k;if(0!=(c.O&240)==0||b.ob<=n){var y=2E3*(b.f[0]+4)*b.Ea;if(0==(c.O&240)||ud(a,b,b.B,d,y,!0,0<depth_,!0))f[k]=[b,!1],k++;else for(depth_++,c=0;4>c;c++){var A=b.ha[c];A&&Fe(A,this,A.f[0],!0)&&(Ke(A,A.B),Ie(A),y=2E3*(A.f[0]+4)*A.Ea,ud(a,A,A.B,d,y,!0,0<
depth_,!0)?(f[k]=[A,!1],k++):(h[l]=[A,depth_],l++))}}else if(0==depth_&&0!=(c.O&1)&&b.ob<=2*n){for(var K=0,V=0,H=[],c=0;4>c;c++)if(A=b.ha[c])K++,Fe(A,this,A.f[0])&&(Ke(A,A.B),Ie(A),y=2E3*(A.f[0]+4)*A.Ea,ud(a,A,A.B,d,y,!0,!0,!0)&&(V++,H.push(A)));if(0<K&&K==V){do for(A=!0,c=0,y=H.length-1;c<y;c++)H[c].Ea>H[c+1].Ea&&(A=H[c],H[c]=H[c+1],H[c+1]=A,A=!1);while(!A);c=0;for(y=H.length;c<y;c++)h[l]=[H[c],depth_],l++}else if(y=2E3*(b.f[0]+4)*b.Ea,ud(a,b,b.B,d,y,!0,!0,!0))for(f[k]=[b,!1],k++,c=0;4>c;c++)(A=
b.ha[c])&&Fe(A,this,A.f[0])&&(y=2E3*(A.f[0]+4)*A.Ea,ud(a,A,A.B,d,y,!0,!1,!0));else for(c=0;4>c;c++)(A=b.ha[c])&&Fe(A,this,A.f[0])&&(Ke(A,A.B),Ie(A),h[l]=[A,depth_],l++)}else for(c=0;4>c;c++)(A=b.ha[c])&&Fe(A,this,A.f[0])&&(Ke(A,A.B),Ie(A),h[l]=[A,depth_],l++)}e&&t==l&&J==k&&(f[k]=[b,!0],k++)}b=g;g=h;h=b;b=l}while(0<b);a.m.vi=u;a.m.ji=q;a.m.ii=z;if(this.c.w.kh||this.c.w.jh)for(this.c.ac[0]||(this.c.ac[0]=[]),t=this.c.ac[0],B=k-1;0<=B;B--)t.push(f[B]);for(B=k-1;0<=B;B--)t=f[B],b=t[0],e&&t[1]?Cd(b,d):
t[1]||ud(a,b,b.B,d,0,!1,!1,!0)}}break;case "fitonly":if(this.Xc++,w=this.hg,Fe(w,this,0)&&(a=this.c,z=w.B,d=a.ba,w.Ad(w.f,z.A,d,z))){Ie(w);e=a.Mk;t=a.Dm;J=a.Cm;f=0;t[0]=w;q=1;b=a.pi;g=a.w.eg||a.w.dg;h=a.w.Te;a.fc++;p=n=l=1;v=a.fc;do{k=u=0;for(--q;0<=q;q--){w=t[q];if(z=w.B)n++,z.$a.fc!=v&&(z.$a.fc=v,p++);if(w.Ad(w.f,z.A,d,z))if(l++,g&&h.push(w),w.ob!=Number.POSITIVE_INFINITY&&w.ob>u&&(u=w.ob),w.ob<=b)e[f]=w,f++;else{B=0;z=[];for(x=0;4>x;x++)if(C=w.ha[x])B++,Fe(C,this,C.f[0])&&(Ke(C,C.B),Ie(C),z.push(C));
if(0<B){do for(B=!0,x=0,w=z.length-1;x<w;x++)z[x].Ea>z[x+1].Ea&&(B=z[x],z[x]=z[x+1],z[x+1]=B,B=!1);while(!B);x=0;for(w=z.length;x<w;x++)J[k]=z[x],k++}else e[f]=w,f++}}u=t;t=J;J=u;q=k}while(0<q);a.m.vi=l;a.m.ji=n;a.m.ii=p;if(this.c.w.kh||this.c.w.jh)for(this.c.ac[0]||(this.c.ac[0]=[]),t=this.c.ac[0],q=f-1;0<=q;q--)t.push(e[q]);for(q=f-1;0<=q;q--)w=e[q],ud(a,w,w.B,d,0,!1,!1)}}};
function Ke(a,b){if(!b.Mh&&4>b.$a.df){for(var c=a.va;c;){var d=c.B;if(0!=(d.O&2)){b.re=d.re;b.Jd=d.Jd;b.Re=d.Re;b.Qe=d.Qe;oe(b);break}c=c.va}b.Mh=!0}}
function Je(a){a.Xc++;var b=a.hg;if(Fe(b,a,0)){var c=a.c,d=b.B,e=c.ba;if(b.Ad(b.f,d.A,e,d)){Ie(b);var f=c.Mk,g=c.Dm,h=c.Cm,k=0,l,n;g[0]=b;l=1;var p=c.pi,v=0,u=c.w.eg||c.w.dg,q=c.w.Te;c.fc++;var z=1,x=1,w=1,C=c.fc;do{var B=0;n=0;for(--l;0<=l;l--){b=g[l];if(d=b.B)z++,d.$a.fc!=C&&(d.$a.fc=C,x++);if(b.Ad(b.f,d.A,e,d))if(w++,b.ob!=Number.POSITIVE_INFINITY&&b.ob>B&&(B=b.ob),u&&q.push(b),b.ob<=p)f[k]=b,k++;else{for(var t=0,J=0,d=[],y=0;4>y;y++){var A=b.ha[y];if(A&&(t++,Fe(A,a,A.f[0]))){Ke(A,A.B);Ie(A);var K=
1*A.f[0]*A.Ea;b.F&&0!=(A.B.O&1)?ud(c,A,A.B,e,K,!0,!1)&&(J++,d.push(A)):(J++,d.push(A))}}if(0<t&&t==J&&0!=t){do for(t=!0,y=0,b=d.length-1;y<b;y++)d[y].Ea>d[y+1].Ea&&(t=d[y],d[y]=d[y+1],d[y+1]=t,t=!1);while(!t);y=0;for(b=d.length;y<b;y++)h[n]=d[y],n++}else f[k]=b,k++}}l=g;g=h;h=l;l=n;0!=B&&(v=B)}while(0<l);v>a.c.Hi&&(a.c.Hi=v);c.m.vi=w;c.m.ji=z;c.m.ii=x;if(a.c.w.kh||a.c.w.jh)for(a.c.ac[0]||(a.c.ac[0]=[]),a=a.c.ac[0],l=k-1;0<=l;l--)a.push(f[l]);for(l=k-1;0<=l;l--)b=f[l],ud(c,b,b.B,e,0,!1,!1)}}}
function Od(a,b,c,d){if(b){a.Rg=c;c=d?a.Zu:a.Yu;if(1==b.f[0]&&(Le(a,b.va,!0),!b.va.B))return;Le(a,b,!1,c)}}function Le(a,b,c,d){if(null!=b&&Fe(b,a,0)&&!c&&(b.B.$a.rn(),b.Le&&b.Le==b.F&&(b.Le=null,Ee(b)),1==d(b,a.Rg,0))){var e=a.Rg;c=e.Qn;var e=e.S,f=[.5*(e.Z[0]+e.ea[0]),.5*(e.Z[1]+e.ea[1])],g=c[0]>=f[0];c=c[1]>=f[1];g?e.Z[0]=f[0]:e.ea[0]=f[0];c?e.Z[1]=f[1]:e.ea[1]=f[1];Le(a,b.ha[g?c?1:3:c?0:2],!1,d)}}
m.Yu=function(a,b){if(!a||a.f[0]>b.uh&&b.Za)return!1;var c=a.B;if(!c)return!1;if(0!=(c.O&2))if(!a.Za){if(!a.F||!a.Da||!a.Da.kl)return!1;c=a.Da.kl(a.f);a.Za=Vc(a.oc,c,!0)}else{if(1==a.Za.W())return b.va={B:b.B,Za:b.Za,Lh:b.Lh},b.B=c,b.Za=a.Za,b.Lh={Z:b.S.Z.slice(),ea:b.S.ea.slice()},a.f[0]!=b.uh}else return b.Za||(b.B=c),!0;return!1};m.Zu=function(a,b){if(!a||a.f[0]>b.uh)return!1;var c=a.B;if(!c)return!1;b.va={B:b.B};b.B=c;return a.f[0]!=b.uh};
ec.prototype.quad=function(a,b,c){var d="";for(i=a;0<i;i--){a=0;var e=1<<i-1;0!=(b&e)&&(a+=1);0!=(c&e)&&(a+=2);d+=a}return d};ec.prototype.msDigit=function(a,b){return((a&3)<<1)+(b&1)};function Me(a){for(a=a.toString(16);8>a.length;)a="0"+a;return a}ec.prototype.ppx=function(a,b){return Me(b<<28-a)};ec.prototype.ppy=function(a,b){return Me(268435456-(b+1<<28-a))};
ec.prototype.Ct=function(a,b,c){if("string"==typeof c)if(-1!=c.indexOf("quad")){b="(function(lod,x,y,loclod,locx,locy){"+c.replace("quad","return this.quad")+"})";try{var d=eval(b).bind(this);return d(a.ca,a.qb,a.rb,a.yj,a.Yl,a.Zl)}catch(e){return c}}else if(-1!=c.indexOf("ms_digit")){b="(function(x,y,loclod,locx,locy){"+c.replace("ms_digit","return this.msDigit")+"})";try{return d=eval(b).bind(this),d(a.qb,a.rb,a.yj,a.Yl,a.Zl)}catch(e){return c}}else{if(-1!=c.indexOf("alt"))return(a=/\(([^)]*)\)/.exec(c))&&
a[1]&&(a=a[1].match(/([^,]+)/g),0<a.length)?a[b%a.length]:c;if(-1!=c.indexOf("ppx")){b="(function(lod,x,loclod,locx){"+c.replace("ppx","return this.ppx")+"})";try{return d=eval(b).bind(this),d(a.ca,a.qb,a.yj,a.Yl)}catch(e){return c}}else if(-1!=c.indexOf("ppy")){b="(function(lod,y,loclod,locy){"+c.replace("ppy","return this.ppy")+"})";try{return d=eval(b).bind(this),d(a.ca,a.rb,a.yj,a.Zl)}catch(e){return c}}else return c}else return c};
function Sc(a,b,c,d,e){var f=e=0,g=0;if(c.ca){var h=[c.ca,c.qb,c.rb],k=a.bb.Dd.Ca;e=[];g=0;for(f=k.length;g<f;g++){var l=k[g],n=h[0]-l.f[0];ix_=h[1]>>n;iy_=h[2]>>n;ix_==l.f[1]&&iy_==l.f[2]&&e.push(l)}h=null;g=0;for(f=e.length;g<f;g++)-1<e[g].f[0]&&(h=e[g]);g=c.ca-(h?h.f.slice():[0,0,0])[0];f=(1<<g)-1;e=c.qb&f;f&=c.rb}h={ca:c.ca,qb:c.qb,rb:c.rb,yj:g,Yl:e,Zl:f};b=b.replace(/ /g,"");b=r.uu(b,{lod:c.ca,x:c.qb,y:c.rb,sub:d,locx:e,locy:f,loclod:g,geonavtile:d,here_app_id:"abcde",here_app_code:"12345"},
a.Ct.bind(a,h,a.vq));a.vq++;return(e=-1!=b.indexOf("//"))?0==b.indexOf("//")?a.rc+b:b:a.Qa+b}function gc(a,b){this.parse(b)}gc.prototype.parse=function(a){this.Yn=a.description||"";this.X=a.freeLayers||{};this.ya={};if(a.surfaces)if(a=a.surfaces,Array.isArray(a))for(var b=0,c=a.length;b<c;b++)this.ya[a[b]]=[];else this.ya=a;this.X=!this.X||Array.isArray(this.X)?{}:JSON.parse(JSON.stringify(this.X));this.ya=JSON.parse(JSON.stringify(this.ya))};
gc.prototype.ub=function(){return{description:JSON.parse(JSON.stringify(this.Yn)),surfaces:JSON.parse(JSON.stringify(this.ya)),freeLayers:JSON.parse(JSON.stringify(this.X))}};
function bf(a,b,c){this.T=!1;this.h={c:null,zj:900,Cj:360,Fj:60,im:1.1,Ps:2,Ej:0,Yh:20,$h:2E4,gm:!1,fm:!0,ai:1,oe:4,em:!1,Hj:!0,Qo:!0,Ro:!0,So:!0,bm:!1,hm:!0,Kg:!0,dm:!0,To:!1,Mg:!1,bi:!1,Lg:!0,Bj:!1,Os:!0,Vo:!0,Qc:3E3,Pc:3,Dj:"topdown",cm:"fit",ci:!1,Gj:!0,Xh:!1,Aj:[1,1500,97500,3500],Jg:!0,Nm:!0,Mm:!1,ge:!0,zd:null,Wo:!1};this.sh={};this.Od(b);this.nf=a;this.ps=c;this.ta=!1;this.Hf=[];this.Vl=0;this.kn=this.hn=null;this.Mb={};this.ge=null!=ma?new ma(this):null;this.Zh=this.c=null;this.l=new Ib(this,
this.nf,0,this.Vj.bind(this),this.h);this.$t=new P(this.l);this.Ib=window._mproj4_;r.Ga.Oc();this.xj(this.h.c);window.Ep(this.pp.bind(this))}m=bf.prototype;m.Vj=function(){null!=this.c&&D(this.c)};
m.xj=function(a){null!=this.c&&this.vh();if(null!=a){a=r.za.wo(a,window.location.href);this.jn=!0;this.pq=this.jk=this.am=null;this.qq=!1;this.oq=!0;this.Uo=!1;var b=function(){if((this.jn||this.oq)&&this.am&&!this.Uo){this.Uo=!0;var b=this.am;this.dc("map-mapconfig-loaded",b);this.c=new ec(this,b,a,this.h);this.Zh=new S(this.c);this.Od(this.c.uk);this.Od(this.sh);this.h.sa&&(this.c.setPosition(this.h.sa),this.h.sa=null);this.h.Aq&&(this.c.ve(this.h.Aq),this.h.Aq=null);this.dc("map-loaded",{browserOptions:this.c.uk})}}.bind(this),
c=function(a){this.am=a;b()}.bind(this),d=function(){}.bind(this),e=function(b){this.Mb.token=b.token;this.Mb.tokenHeader=b.header;this.jk=1E3*b.expires;this.pq=function(){this.jk=null;this.qq=!0;"string"===typeof this.h.zd?r.Id(this.h.zd,e,f,null,r.useCredentials,this.Mb):this.h.zd(e)}.bind(this);this.qq||h(a);"string"===typeof this.h.zd?k(b.cookieInjector,this.h.zd):k(b.cookieInjector,a)}.bind(this),f=function(){console.log("auth token not loaded");this.oq&&h(a)}.bind(this),g=function(){document.body.removeChild(this.kn);
this.kn=null;this.jn=!0;b()}.bind(this),h=function(a){r.Id(a,c,d,null,r.useCredentials,this.Mb)}.bind(this),k=function(a,b){a=r.za.wo(a,b);this.hn=r.za.Ir(a);var c=document.createElement("iframe");this.kn=c;c.onload=g;c.src=a;c.style.display="none";document.body.appendChild(c)}.bind(this);this.h.zd?(this.jn=!1,"string"===typeof this.h.zd?r.Id(this.h.zd,e,f,null,r.useCredentials,this.Mb):this.h.zd(e)):h(a)}};m.Gk=function(){this.T||(this.vh(),this.l&&this.l.C(),this.nf=null,this.T=!0)};
m.vh=function(){this.c&&(this.c.C(),this.Zh=this.c=null,this.dc("map-unloaded",{}))};m.ma=function(){return this.c};m.cj=function(){return this.l};m.ae=function(){return this.$t};m.ml=function(){return this.Ib};m.Uj=function(a,b){if(1!=this.T&&null!=b)return this.Vl++,this.Hf.push({Us:a,Vh:b,f:this.Vl}),function(a){this.removeListener(a)}.bind(this,this.Vl)};m.dc=function(a,b,c){for(var d=0;d<this.Hf.length;d++)this.Hf[d].Us==a&&this.Hf[d].Vh(b);c&&console.log("event "+a+": "+JSON.stringify(b))};
m.removeListener=function(a){for(var b=0;b<this.Hf.length;b++)if(this.Hf[b].f==a){this.Hf.splice(b,1);break}};r.to=function(a){return(a?"Core: ":"")+"1.98"};r.Mn=function(){r.Ga.Oc();var a=document.createElement("canvas");if(null==a)return!1;a.width=1024;a.height=768;if(null==a.getContext)return!1;var b=null;try{b=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(c){return!1}return b?!0:!1};
r.zn=function(a,b){a="string"!==typeof a?a:document.getElementById(a);return r.Mn()?new cf(a,b):null};function cf(a,b){this.u=new bf(a,b,this);this.c=this.u.ma()}m=cf.prototype;m.Gk=function(){this.u.Gk();this.u=null};m.ma=function(){return this.u?this.u.Zh:null};m.xj=function(a){return this.u?this.u.xj(a):null};m.vh=function(){return this.u?this.u.vh():null};m.cj=function(){return this.u?this.u.ae():null};m.ml=function(){return this.u?this.u.ml():null};
m.Uj=function(a,b){if(!this.u)return null;this.u.Uj(a,b)};m.dc=function(a,b){if(!this.u)return null;this.u.dc(a,b)};r.MapCore=r.zn;r.mapCore=r.zn;cf.prototype.destroy=cf.prototype.Gk;cf.prototype.loadMap=cf.prototype.xj;cf.prototype.destroyMap=cf.prototype.vh;cf.prototype.getMap=cf.prototype.ma;cf.prototype.getRenderer=cf.prototype.cj;cf.prototype.on=cf.prototype.Uj;cf.prototype.callListener=cf.prototype.dc;r.getCoreVersion=r.to;r.checkSupport=r.Mn;
bf.prototype.Od=function(a){if("object"===typeof a&&null!==a)for(var b in a)this.Nd(b,a[b])};
bf.prototype.Nd=function(a,b){if("pos"==a||"position"==a||"view"==a)this.ma()?("view"==a?this.ma().ve(b):this.ma().setPosition(new fc(this,b)),this.sh[a]&&delete this.sh[a]):this.sh[a]=b;else if("map"==a)this.h.c=r.mk(b,null);else if("mapVirtualSurfaces"==a)this.h.Hj=r.Ja(b,!0);else if("inspector"==a)this.h.ge=r.Ja(b,!0);else if("authorization"==a)this.h.zd="string"===typeof b||"function"===typeof b?b:null;else{if(0==a.indexOf("map")||"mario"==a)this.sh[a]=b,null!=this.ma()&&this.ma().Nd(a,b);if(0==
a.indexOf("renderer"))switch(a){case "rendererAntialiasing":this.h.Nm=r.Ja(b,!0);break;case "rendererAllowScreenshots":this.h.Mm=r.Ja(b,!1)}}};bf.prototype.Ie=function(a){if("map"==a)return this.h.c;if("inspector"==a)return this.h.ge;if(0==a.indexOf("map")&&null!=this.ma())return this.ma().Ie(a,value_);if(0==a.indexOf("renderer")){a:{switch(a){case "rendererAntialiasing":a=this.h.Nm;break a;case "rendererAllowScreenshots":a=this.h.Mm;break a}a=void 0}return a}};
bf.prototype.pp=function(){this.T||(null!=this.c&&this.c.update(),this.dc("tick",{}),window.Ep(this.pp.bind(this)))};
